{"version":3,"file":"core.esm.js","sources":["../src/lib/idl/jupiter.ts","../src/constants.ts","../src/utils/layout.ts","../src/lib/cropper/swapLayout.ts","../src/lib/jupiterInstruction.ts","../src/lib/saber/saberAddDecimalsAmm.ts","../src/utils/getTwoPermutations.ts","../src/utils/chunks.ts","../src/utils/chunkedGetMultipleAccountInfos.ts","../src/lib/amm.ts","../src/lib/raydium/pools.ts","../src/lib/raydium/raydiumAmm.ts","../src/lib/serum/market.ts","../src/lib/serum/serumAmm.ts","../src/lib/split-trade/splitTradeAmm.ts","../src/lib/market.ts","../src/lib/saber/saberAmm.ts","../src/lib/aldrin/percentage.ts","../src/lib/aldrin/poolState.ts","../src/lib/aldrin/aldrinAmm.ts","../src/lib/spl-token-swap/splTokenSwapPools.ts","../src/lib/spl-token-swap/tokenSwapLayout.ts","../src/lib/spl-token-swap/splTokenSwapAmm.ts","../src/lib/mercurial/swapLayout.ts","../src/lib/mercurial/mercurialAmm.ts","../src/lib/cropper/cropperAmm.ts","../src/lib/crema/swapLayout.ts","../src/lib/crema/cremaAmm.ts","../src/lib/sencha/swapLayout.ts","../src/lib/sencha/senchaAmm.ts","../src/lib/lifinity/swapLayout.ts","../src/lib/lifinity/lifinityAmm.ts","../src/lib/whirlpool/whirlpoolAmm.ts","../src/lib/cykura/solanaTickDataProvider.ts","../src/lib/cykura/cykuraAmm.ts","../src/lib/marinade/helpers.ts","../src/lib/marinade/marinadeAmm.ts","../src/lib/ammFactory.ts","../src/lib/routes.ts","../src/utils/instruction.ts","../src/utils/token.ts","../src/lib/routeToInstructions.ts","../src/lib/serum/openOrders.ts","../src/lib/fee.ts","../src/utils/TransactionBuilder.ts","../src/utils/Owner.ts","../src/utils/wait.ts","../src/utils/transactionHelpers.ts","../src/utils/cartesian.ts","../src/lib/computeRouteInfos.ts","../src/utils/tx/errors.ts","../src/lib/getTopTokens.ts","../src/lib/jupiter.ts"],"sourcesContent":["export type Jupiter = {\n  version: '0.1.0';\n  name: 'jupiter';\n  instructions: [\n    {\n      name: 'mercurialExchange';\n      accounts: [\n        {\n          name: 'swapProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'swapState';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'poolAuthority';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'userTransferAuthority';\n          isMut: false;\n          isSigner: true;\n        },\n        {\n          name: 'sourceTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'destinationTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'inAmount';\n          type: {\n            option: 'u64';\n          };\n        },\n        {\n          name: 'minimumOutAmount';\n          type: 'u64';\n        },\n        {\n          name: 'platformFeeBps';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'saberExchange';\n      accounts: [\n        {\n          name: 'swapProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'swap';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'swapAuthority';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'userAuthority';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'clock';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'inputUserAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'inputTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'outputUserAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'outputTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'feesTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'inAmount';\n          type: {\n            option: 'u64';\n          };\n        },\n        {\n          name: 'minimumOutAmount';\n          type: 'u64';\n        },\n        {\n          name: 'platformFeeBps';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'saberSwap';\n      accounts: [\n        {\n          name: 'swapProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'swap';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'swapAuthority';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'userAuthority';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'inputUserAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'inputTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'outputUserAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'outputTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'feesTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'inAmount';\n          type: {\n            option: 'u64';\n          };\n        },\n        {\n          name: 'minimumOutAmount';\n          type: 'u64';\n        },\n        {\n          name: 'platformFeeBps';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'saberAddDecimalsDeposit';\n      accounts: [\n        {\n          name: 'addDecimalsProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'wrapper';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'wrapperMint';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'wrapperUnderlyingTokens';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'owner';\n          isMut: false;\n          isSigner: true;\n        },\n        {\n          name: 'userUnderlyingTokens';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'userWrappedTokens';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'inAmount';\n          type: {\n            option: 'u64';\n          };\n        },\n        {\n          name: 'minimumOutAmount';\n          type: 'u64';\n        },\n        {\n          name: 'platformFeeBps';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'saberAddDecimalsWithdraw';\n      accounts: [\n        {\n          name: 'addDecimalsProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'wrapper';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'wrapperMint';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'wrapperUnderlyingTokens';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'owner';\n          isMut: false;\n          isSigner: true;\n        },\n        {\n          name: 'userUnderlyingTokens';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'userWrappedTokens';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'inAmount';\n          type: {\n            option: 'u64';\n          };\n        },\n        {\n          name: 'minimumOutAmount';\n          type: 'u64';\n        },\n        {\n          name: 'platformFeeBps';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'senchaExchange';\n      accounts: [\n        {\n          name: 'swapProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'swap';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'userAuthority';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'inputUserAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'inputTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'inputFeesAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'outputUserAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'outputTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'outputFeesAccount';\n          isMut: true;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'inAmount';\n          type: {\n            option: 'u64';\n          };\n        },\n        {\n          name: 'minimumOutAmount';\n          type: 'u64';\n        },\n        {\n          name: 'platformFeeBps';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'serumSwap';\n      accounts: [\n        {\n          name: 'market';\n          accounts: [\n            {\n              name: 'market';\n              isMut: true;\n              isSigner: false;\n            },\n            {\n              name: 'openOrders';\n              isMut: true;\n              isSigner: false;\n            },\n            {\n              name: 'requestQueue';\n              isMut: true;\n              isSigner: false;\n            },\n            {\n              name: 'eventQueue';\n              isMut: true;\n              isSigner: false;\n            },\n            {\n              name: 'bids';\n              isMut: true;\n              isSigner: false;\n            },\n            {\n              name: 'asks';\n              isMut: true;\n              isSigner: false;\n            },\n            {\n              name: 'coinVault';\n              isMut: true;\n              isSigner: false;\n            },\n            {\n              name: 'pcVault';\n              isMut: true;\n              isSigner: false;\n            },\n            {\n              name: 'vaultSigner';\n              isMut: false;\n              isSigner: false;\n            },\n          ];\n        },\n        {\n          name: 'authority';\n          isMut: false;\n          isSigner: true;\n        },\n        {\n          name: 'orderPayerTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'coinWallet';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'pcWallet';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'dexProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'rent';\n          isMut: false;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'side';\n          type: {\n            defined: 'Side';\n          };\n        },\n        {\n          name: 'inAmount';\n          type: {\n            option: 'u64';\n          };\n        },\n        {\n          name: 'minimumOutAmount';\n          type: 'u64';\n        },\n        {\n          name: 'platformFeeBps';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'tokenSwap';\n      accounts: [\n        {\n          name: 'tokenSwapProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'swap';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'authority';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'userTransferAuthority';\n          isMut: false;\n          isSigner: true;\n        },\n        {\n          name: 'source';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'swapSource';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'swapDestination';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'destination';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'poolMint';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'poolFee';\n          isMut: true;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'inAmount';\n          type: {\n            option: 'u64';\n          };\n        },\n        {\n          name: 'minimumOutAmount';\n          type: 'u64';\n        },\n        {\n          name: 'platformFeeBps';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'stepTokenSwap';\n      accounts: [\n        {\n          name: 'tokenSwapProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'swap';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'authority';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'userTransferAuthority';\n          isMut: false;\n          isSigner: true;\n        },\n        {\n          name: 'source';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'swapSource';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'swapDestination';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'destination';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'poolMint';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'poolFee';\n          isMut: true;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'inAmount';\n          type: {\n            option: 'u64';\n          };\n        },\n        {\n          name: 'minimumOutAmount';\n          type: 'u64';\n        },\n        {\n          name: 'platformFeeBps';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'cropperTokenSwap';\n      accounts: [\n        {\n          name: 'tokenSwapProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'swap';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'swapState';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'authority';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'userTransferAuthority';\n          isMut: false;\n          isSigner: true;\n        },\n        {\n          name: 'source';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'swapSource';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'swapDestination';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'destination';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'poolMint';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'poolFee';\n          isMut: true;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'inAmount';\n          type: {\n            option: 'u64';\n          };\n        },\n        {\n          name: 'minimumOutAmount';\n          type: 'u64';\n        },\n        {\n          name: 'platformFeeBps';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'raydiumSwap';\n      accounts: [\n        {\n          name: 'swapProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'ammId';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'ammAuthority';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'ammOpenOrders';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'ammTargetOrders';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'poolCoinTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'poolPcTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'serumProgramId';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'serumMarket';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'serumBids';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'serumAsks';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'serumEventQueue';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'serumCoinVaultAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'serumPcVaultAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'serumVaultSigner';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'userSourceTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'userDestinationTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'userSourceOwner';\n          isMut: false;\n          isSigner: true;\n        },\n      ];\n      args: [\n        {\n          name: 'inAmount';\n          type: {\n            option: 'u64';\n          };\n        },\n        {\n          name: 'minimumOutAmount';\n          type: 'u64';\n        },\n        {\n          name: 'platformFeeBps';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'raydiumSwapV2';\n      accounts: [\n        {\n          name: 'swapProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'ammId';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'ammAuthority';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'ammOpenOrders';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'poolCoinTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'poolPcTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'serumProgramId';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'serumMarket';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'serumBids';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'serumAsks';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'serumEventQueue';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'serumCoinVaultAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'serumPcVaultAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'serumVaultSigner';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'userSourceTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'userDestinationTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'userSourceOwner';\n          isMut: false;\n          isSigner: true;\n        },\n      ];\n      args: [\n        {\n          name: 'inAmount';\n          type: {\n            option: 'u64';\n          };\n        },\n        {\n          name: 'minimumOutAmount';\n          type: 'u64';\n        },\n        {\n          name: 'platformFeeBps';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'aldrinSwap';\n      accounts: [\n        {\n          name: 'swapProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'pool';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'poolSigner';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'poolMint';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'baseTokenVault';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'quoteTokenVault';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'feePoolTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'walletAuthority';\n          isMut: false;\n          isSigner: true;\n        },\n        {\n          name: 'userBaseTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'userQuoteTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'inAmount';\n          type: {\n            option: 'u64';\n          };\n        },\n        {\n          name: 'minimumOutAmount';\n          type: 'u64';\n        },\n        {\n          name: 'side';\n          type: {\n            defined: 'Side';\n          };\n        },\n        {\n          name: 'platformFeeBps';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'aldrinV2Swap';\n      accounts: [\n        {\n          name: 'swapProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'pool';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'poolSigner';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'poolMint';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'baseTokenVault';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'quoteTokenVault';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'feePoolTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'walletAuthority';\n          isMut: false;\n          isSigner: true;\n        },\n        {\n          name: 'userBaseTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'userQuoteTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'curve';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'inAmount';\n          type: {\n            option: 'u64';\n          };\n        },\n        {\n          name: 'minimumOutAmount';\n          type: 'u64';\n        },\n        {\n          name: 'side';\n          type: {\n            defined: 'Side';\n          };\n        },\n        {\n          name: 'platformFeeBps';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'cremaTokenSwap';\n      accounts: [\n        {\n          name: 'swapProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'pool';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'poolSigner';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'userSourceTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'userDestinationTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'poolSourceTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'poolDestinationTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'poolTicksAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'walletAuthority';\n          isMut: false;\n          isSigner: true;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'inAmount';\n          type: {\n            option: 'u64';\n          };\n        },\n        {\n          name: 'minimumOutAmount';\n          type: 'u64';\n        },\n        {\n          name: 'platformFeeBps';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'lifinityTokenSwap';\n      accounts: [\n        {\n          name: 'swapProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'authority';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'amm';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'userTransferAuthority';\n          isMut: false;\n          isSigner: true;\n        },\n        {\n          name: 'sourceInfo';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'destinationInfo';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'swapSource';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'swapDestination';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'poolMint';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'feeAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'pythAccount';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'pythPcAccount';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'configAccount';\n          isMut: true;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'inAmount';\n          type: {\n            option: 'u64';\n          };\n        },\n        {\n          name: 'minimumOutAmount';\n          type: 'u64';\n        },\n        {\n          name: 'platformFeeBps';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'cykuraSwap';\n      accounts: [\n        {\n          name: 'swapProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'signer';\n          isMut: false;\n          isSigner: true;\n        },\n        {\n          name: 'factoryState';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'poolState';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'inputTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'outputTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'inputVault';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'outputVault';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'lastObservationState';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'coreProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'inAmount';\n          type: {\n            option: 'u64';\n          };\n        },\n        {\n          name: 'minimumOutAmount';\n          type: 'u64';\n        },\n        {\n          name: 'platformFeeBps';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'whirlpoolSwap';\n      accounts: [\n        {\n          name: 'swapProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'tokenAuthority';\n          isMut: false;\n          isSigner: true;\n        },\n        {\n          name: 'whirlpool';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'tokenOwnerAccountA';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'tokenVaultA';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'tokenOwnerAccountB';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'tokenVaultB';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'tickArray0';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'tickArray1';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'tickArray2';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'oracle';\n          isMut: false;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'inAmount';\n          type: {\n            option: 'u64';\n          };\n        },\n        {\n          name: 'minimumOutAmount';\n          type: 'u64';\n        },\n        {\n          name: 'aToB';\n          type: 'bool';\n        },\n        {\n          name: 'platformFeeBps';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'whirlpoolSwapExactOutput';\n      accounts: [\n        {\n          name: 'swapProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'tokenAuthority';\n          isMut: false;\n          isSigner: true;\n        },\n        {\n          name: 'whirlpool';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'tokenOwnerAccountA';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'tokenVaultA';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'tokenOwnerAccountB';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'tokenVaultB';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'tickArray0';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'tickArray1';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'tickArray2';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'oracle';\n          isMut: false;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'outAmount';\n          type: 'u64';\n        },\n        {\n          name: 'maximumInAmount';\n          type: 'u64';\n        },\n        {\n          name: 'aToB';\n          type: 'bool';\n        },\n        {\n          name: 'platformFeeBps';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'marinadeFinanceDeposit';\n      accounts: [\n        {\n          name: 'marinadeFinanceProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'state';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'msolMint';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'liqPoolSolLegPda';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'liqPoolMsolLeg';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'liqPoolMsolLegAuthority';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'reservePda';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'transferFrom';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'mintTo';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'msolMintAuthority';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'systemProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'userWsolTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'tempWsolTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'userTransferAuthority';\n          isMut: true;\n          isSigner: true;\n        },\n        {\n          name: 'wsolMint';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'rent';\n          isMut: false;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'inAmount';\n          type: {\n            option: 'u64';\n          };\n        },\n        {\n          name: 'minimumOutAmount';\n          type: 'u64';\n        },\n        {\n          name: 'platformFeeBps';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'marinadeFinanceLiquidUnstake';\n      accounts: [\n        {\n          name: 'marinadeFinanceProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'state';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'msolMint';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'liqPoolSolLegPda';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'liqPoolMsolLeg';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'treasuryMsolAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'getMsolFrom';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'getMsolFromAuthority';\n          isMut: false;\n          isSigner: true;\n        },\n        {\n          name: 'transferSolTo';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'systemProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'userWsolTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'inAmount';\n          type: {\n            option: 'u64';\n          };\n        },\n        {\n          name: 'minimumOutAmount';\n          type: 'u64';\n        },\n        {\n          name: 'platformFeeBps';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'riskCheckAndFee';\n      accounts: [\n        {\n          name: 'tokenLedger';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'userDestinationTokenAccount';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'userTransferAuthority';\n          isMut: false;\n          isSigner: true;\n        },\n        {\n          name: 'tokenProgram';\n          isMut: false;\n          isSigner: false;\n        },\n      ];\n      args: [\n        {\n          name: 'minimumOutAmount';\n          type: 'u64';\n        },\n        {\n          name: 'platformFeeBps';\n          type: 'u8';\n        },\n      ];\n    },\n    {\n      name: 'initializeTokenLedger';\n      accounts: [\n        {\n          name: 'tokenLedger';\n          isMut: true;\n          isSigner: true;\n        },\n        {\n          name: 'payer';\n          isMut: true;\n          isSigner: true;\n        },\n        {\n          name: 'systemProgram';\n          isMut: false;\n          isSigner: false;\n        },\n      ];\n      args: [];\n    },\n    {\n      name: 'setTokenLedger';\n      accounts: [\n        {\n          name: 'tokenLedger';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'tokenAccount';\n          isMut: false;\n          isSigner: false;\n        },\n      ];\n      args: [];\n    },\n    {\n      name: 'createOpenOrders';\n      accounts: [\n        {\n          name: 'openOrders';\n          isMut: true;\n          isSigner: false;\n        },\n        {\n          name: 'payer';\n          isMut: true;\n          isSigner: true;\n        },\n        {\n          name: 'dexProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'systemProgram';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'rent';\n          isMut: false;\n          isSigner: false;\n        },\n        {\n          name: 'market';\n          isMut: false;\n          isSigner: false;\n        },\n      ];\n      args: [];\n    },\n  ];\n  accounts: [\n    {\n      name: 'tokenLedger';\n      type: {\n        kind: 'struct';\n        fields: [\n          {\n            name: 'tokenAccount';\n            type: 'publicKey';\n          },\n          {\n            name: 'amount';\n            type: 'u64';\n          },\n        ];\n      };\n    },\n  ];\n  types: [\n    {\n      name: 'Swap';\n      type: {\n        kind: 'struct';\n        fields: [\n          {\n            name: 'tokens';\n            type: 'u64';\n          },\n          {\n            name: 'minTokens';\n            type: 'u64';\n          },\n          {\n            name: 'side';\n            type: {\n              defined: 'Side';\n            };\n          },\n        ];\n      };\n    },\n    {\n      name: 'Swap';\n      type: {\n        kind: 'struct';\n        fields: [\n          {\n            name: 'tokens';\n            type: 'u64';\n          },\n          {\n            name: 'minTokens';\n            type: 'u64';\n          },\n          {\n            name: 'side';\n            type: {\n              defined: 'Side';\n            };\n          },\n        ];\n      };\n    },\n    {\n      name: 'Swap';\n      type: {\n        kind: 'struct';\n        fields: [\n          {\n            name: 'amountIn';\n            type: 'u64';\n          },\n          {\n            name: 'minimumAmountOut';\n            type: 'u64';\n          },\n        ];\n      };\n    },\n    {\n      name: 'Deposit';\n      type: {\n        kind: 'struct';\n        fields: [\n          {\n            name: 'lamports';\n            type: 'u64';\n          },\n        ];\n      };\n    },\n    {\n      name: 'LiquidUnstake';\n      type: {\n        kind: 'struct';\n        fields: [\n          {\n            name: 'msolAmount';\n            type: 'u64';\n          },\n        ];\n      };\n    },\n    {\n      name: 'Swap';\n      type: {\n        kind: 'struct';\n        fields: [\n          {\n            name: 'amount';\n            type: 'u64';\n          },\n          {\n            name: 'otherAmountThreshold';\n            type: 'u64';\n          },\n          {\n            name: 'sqrtPriceLimit';\n            type: 'u128';\n          },\n          {\n            name: 'amountSpecifiedIsInput';\n            type: 'bool';\n          },\n          {\n            name: 'aToB';\n            type: 'bool';\n          },\n        ];\n      };\n    },\n    {\n      name: 'SwapInstrution';\n      type: {\n        kind: 'enum';\n        variants: [\n          {\n            name: 'Swap';\n            fields: [\n              {\n                defined: 'Swap';\n              },\n            ];\n          },\n        ];\n      };\n    },\n    {\n      name: 'Side';\n      type: {\n        kind: 'enum';\n        variants: [\n          {\n            name: 'Bid';\n          },\n          {\n            name: 'Ask';\n          },\n        ];\n      };\n    },\n    {\n      name: 'Direction';\n      type: {\n        kind: 'enum';\n        variants: [\n          {\n            name: 'LeftToRight';\n          },\n          {\n            name: 'RightToLeft';\n          },\n        ];\n      };\n    },\n  ];\n  errors: [\n    {\n      code: 6000;\n      name: 'SlippageToleranceExceeded';\n      msg: 'Slippage tolerance exceeded';\n    },\n    {\n      code: 6001;\n      name: 'InvalidTokenLedger';\n      msg: 'Invalid token ledger';\n    },\n    {\n      code: 6002;\n      name: 'MissingTokenLedger';\n      msg: 'Missing token ledger';\n    },\n    {\n      code: 6003;\n      name: 'MissingMercurialExchangeTokenAccount';\n      msg: 'Missing mercurial exchange token account';\n    },\n    {\n      code: 6004;\n      name: 'LedgerTokenAccountDoesNotMatch';\n      msg: 'Ledger token account does not match';\n    },\n    {\n      code: 6005;\n      name: 'MissingPlatformFeeAccount';\n      msg: 'Missing platform fee account';\n    },\n    {\n      code: 6006;\n      name: 'InvalidCalculation';\n      msg: 'Invalid calculation';\n    },\n  ];\n};\n\nexport const IDL: Jupiter = {\n  version: '0.1.0',\n  name: 'jupiter',\n  instructions: [\n    {\n      name: 'mercurialExchange',\n      accounts: [\n        {\n          name: 'swapProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'swapState',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'poolAuthority',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'userTransferAuthority',\n          isMut: false,\n          isSigner: true,\n        },\n        {\n          name: 'sourceTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'destinationTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'inAmount',\n          type: {\n            option: 'u64',\n          },\n        },\n        {\n          name: 'minimumOutAmount',\n          type: 'u64',\n        },\n        {\n          name: 'platformFeeBps',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'saberExchange',\n      accounts: [\n        {\n          name: 'swapProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'swap',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'swapAuthority',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'userAuthority',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'clock',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'inputUserAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'inputTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'outputUserAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'outputTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'feesTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'inAmount',\n          type: {\n            option: 'u64',\n          },\n        },\n        {\n          name: 'minimumOutAmount',\n          type: 'u64',\n        },\n        {\n          name: 'platformFeeBps',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'saberSwap',\n      accounts: [\n        {\n          name: 'swapProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'swap',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'swapAuthority',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'userAuthority',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'inputUserAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'inputTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'outputUserAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'outputTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'feesTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'inAmount',\n          type: {\n            option: 'u64',\n          },\n        },\n        {\n          name: 'minimumOutAmount',\n          type: 'u64',\n        },\n        {\n          name: 'platformFeeBps',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'saberAddDecimalsDeposit',\n      accounts: [\n        {\n          name: 'addDecimalsProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'wrapper',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'wrapperMint',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'wrapperUnderlyingTokens',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'owner',\n          isMut: false,\n          isSigner: true,\n        },\n        {\n          name: 'userUnderlyingTokens',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'userWrappedTokens',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'inAmount',\n          type: {\n            option: 'u64',\n          },\n        },\n        {\n          name: 'minimumOutAmount',\n          type: 'u64',\n        },\n        {\n          name: 'platformFeeBps',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'saberAddDecimalsWithdraw',\n      accounts: [\n        {\n          name: 'addDecimalsProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'wrapper',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'wrapperMint',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'wrapperUnderlyingTokens',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'owner',\n          isMut: false,\n          isSigner: true,\n        },\n        {\n          name: 'userUnderlyingTokens',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'userWrappedTokens',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'inAmount',\n          type: {\n            option: 'u64',\n          },\n        },\n        {\n          name: 'minimumOutAmount',\n          type: 'u64',\n        },\n        {\n          name: 'platformFeeBps',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'senchaExchange',\n      accounts: [\n        {\n          name: 'swapProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'swap',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'userAuthority',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'inputUserAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'inputTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'inputFeesAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'outputUserAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'outputTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'outputFeesAccount',\n          isMut: true,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'inAmount',\n          type: {\n            option: 'u64',\n          },\n        },\n        {\n          name: 'minimumOutAmount',\n          type: 'u64',\n        },\n        {\n          name: 'platformFeeBps',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'serumSwap',\n      accounts: [\n        {\n          name: 'market',\n          accounts: [\n            {\n              name: 'market',\n              isMut: true,\n              isSigner: false,\n            },\n            {\n              name: 'openOrders',\n              isMut: true,\n              isSigner: false,\n            },\n            {\n              name: 'requestQueue',\n              isMut: true,\n              isSigner: false,\n            },\n            {\n              name: 'eventQueue',\n              isMut: true,\n              isSigner: false,\n            },\n            {\n              name: 'bids',\n              isMut: true,\n              isSigner: false,\n            },\n            {\n              name: 'asks',\n              isMut: true,\n              isSigner: false,\n            },\n            {\n              name: 'coinVault',\n              isMut: true,\n              isSigner: false,\n            },\n            {\n              name: 'pcVault',\n              isMut: true,\n              isSigner: false,\n            },\n            {\n              name: 'vaultSigner',\n              isMut: false,\n              isSigner: false,\n            },\n          ],\n        },\n        {\n          name: 'authority',\n          isMut: false,\n          isSigner: true,\n        },\n        {\n          name: 'orderPayerTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'coinWallet',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'pcWallet',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'dexProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'rent',\n          isMut: false,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'side',\n          type: {\n            defined: 'Side',\n          },\n        },\n        {\n          name: 'inAmount',\n          type: {\n            option: 'u64',\n          },\n        },\n        {\n          name: 'minimumOutAmount',\n          type: 'u64',\n        },\n        {\n          name: 'platformFeeBps',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'tokenSwap',\n      accounts: [\n        {\n          name: 'tokenSwapProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'swap',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'authority',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'userTransferAuthority',\n          isMut: false,\n          isSigner: true,\n        },\n        {\n          name: 'source',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'swapSource',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'swapDestination',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'destination',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'poolMint',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'poolFee',\n          isMut: true,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'inAmount',\n          type: {\n            option: 'u64',\n          },\n        },\n        {\n          name: 'minimumOutAmount',\n          type: 'u64',\n        },\n        {\n          name: 'platformFeeBps',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'stepTokenSwap',\n      accounts: [\n        {\n          name: 'tokenSwapProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'swap',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'authority',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'userTransferAuthority',\n          isMut: false,\n          isSigner: true,\n        },\n        {\n          name: 'source',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'swapSource',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'swapDestination',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'destination',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'poolMint',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'poolFee',\n          isMut: true,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'inAmount',\n          type: {\n            option: 'u64',\n          },\n        },\n        {\n          name: 'minimumOutAmount',\n          type: 'u64',\n        },\n        {\n          name: 'platformFeeBps',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'cropperTokenSwap',\n      accounts: [\n        {\n          name: 'tokenSwapProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'swap',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'swapState',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'authority',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'userTransferAuthority',\n          isMut: false,\n          isSigner: true,\n        },\n        {\n          name: 'source',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'swapSource',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'swapDestination',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'destination',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'poolMint',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'poolFee',\n          isMut: true,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'inAmount',\n          type: {\n            option: 'u64',\n          },\n        },\n        {\n          name: 'minimumOutAmount',\n          type: 'u64',\n        },\n        {\n          name: 'platformFeeBps',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'raydiumSwap',\n      accounts: [\n        {\n          name: 'swapProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'ammId',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'ammAuthority',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'ammOpenOrders',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'ammTargetOrders',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'poolCoinTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'poolPcTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'serumProgramId',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'serumMarket',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'serumBids',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'serumAsks',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'serumEventQueue',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'serumCoinVaultAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'serumPcVaultAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'serumVaultSigner',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'userSourceTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'userDestinationTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'userSourceOwner',\n          isMut: false,\n          isSigner: true,\n        },\n      ],\n      args: [\n        {\n          name: 'inAmount',\n          type: {\n            option: 'u64',\n          },\n        },\n        {\n          name: 'minimumOutAmount',\n          type: 'u64',\n        },\n        {\n          name: 'platformFeeBps',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'raydiumSwapV2',\n      accounts: [\n        {\n          name: 'swapProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'ammId',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'ammAuthority',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'ammOpenOrders',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'poolCoinTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'poolPcTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'serumProgramId',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'serumMarket',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'serumBids',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'serumAsks',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'serumEventQueue',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'serumCoinVaultAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'serumPcVaultAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'serumVaultSigner',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'userSourceTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'userDestinationTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'userSourceOwner',\n          isMut: false,\n          isSigner: true,\n        },\n      ],\n      args: [\n        {\n          name: 'inAmount',\n          type: {\n            option: 'u64',\n          },\n        },\n        {\n          name: 'minimumOutAmount',\n          type: 'u64',\n        },\n        {\n          name: 'platformFeeBps',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'aldrinSwap',\n      accounts: [\n        {\n          name: 'swapProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'pool',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'poolSigner',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'poolMint',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'baseTokenVault',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'quoteTokenVault',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'feePoolTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'walletAuthority',\n          isMut: false,\n          isSigner: true,\n        },\n        {\n          name: 'userBaseTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'userQuoteTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'inAmount',\n          type: {\n            option: 'u64',\n          },\n        },\n        {\n          name: 'minimumOutAmount',\n          type: 'u64',\n        },\n        {\n          name: 'side',\n          type: {\n            defined: 'Side',\n          },\n        },\n        {\n          name: 'platformFeeBps',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'aldrinV2Swap',\n      accounts: [\n        {\n          name: 'swapProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'pool',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'poolSigner',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'poolMint',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'baseTokenVault',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'quoteTokenVault',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'feePoolTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'walletAuthority',\n          isMut: false,\n          isSigner: true,\n        },\n        {\n          name: 'userBaseTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'userQuoteTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'curve',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'inAmount',\n          type: {\n            option: 'u64',\n          },\n        },\n        {\n          name: 'minimumOutAmount',\n          type: 'u64',\n        },\n        {\n          name: 'side',\n          type: {\n            defined: 'Side',\n          },\n        },\n        {\n          name: 'platformFeeBps',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'cremaTokenSwap',\n      accounts: [\n        {\n          name: 'swapProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'pool',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'poolSigner',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'userSourceTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'userDestinationTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'poolSourceTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'poolDestinationTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'poolTicksAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'walletAuthority',\n          isMut: false,\n          isSigner: true,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'inAmount',\n          type: {\n            option: 'u64',\n          },\n        },\n        {\n          name: 'minimumOutAmount',\n          type: 'u64',\n        },\n        {\n          name: 'platformFeeBps',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'lifinityTokenSwap',\n      accounts: [\n        {\n          name: 'swapProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'authority',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'amm',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'userTransferAuthority',\n          isMut: false,\n          isSigner: true,\n        },\n        {\n          name: 'sourceInfo',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'destinationInfo',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'swapSource',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'swapDestination',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'poolMint',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'feeAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'pythAccount',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'pythPcAccount',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'configAccount',\n          isMut: true,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'inAmount',\n          type: {\n            option: 'u64',\n          },\n        },\n        {\n          name: 'minimumOutAmount',\n          type: 'u64',\n        },\n        {\n          name: 'platformFeeBps',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'cykuraSwap',\n      accounts: [\n        {\n          name: 'swapProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'signer',\n          isMut: false,\n          isSigner: true,\n        },\n        {\n          name: 'factoryState',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'poolState',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'inputTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'outputTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'inputVault',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'outputVault',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'lastObservationState',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'coreProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'inAmount',\n          type: {\n            option: 'u64',\n          },\n        },\n        {\n          name: 'minimumOutAmount',\n          type: 'u64',\n        },\n        {\n          name: 'platformFeeBps',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'whirlpoolSwap',\n      accounts: [\n        {\n          name: 'swapProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'tokenAuthority',\n          isMut: false,\n          isSigner: true,\n        },\n        {\n          name: 'whirlpool',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'tokenOwnerAccountA',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'tokenVaultA',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'tokenOwnerAccountB',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'tokenVaultB',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'tickArray0',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'tickArray1',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'tickArray2',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'oracle',\n          isMut: false,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'inAmount',\n          type: {\n            option: 'u64',\n          },\n        },\n        {\n          name: 'minimumOutAmount',\n          type: 'u64',\n        },\n        {\n          name: 'aToB',\n          type: 'bool',\n        },\n        {\n          name: 'platformFeeBps',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'whirlpoolSwapExactOutput',\n      accounts: [\n        {\n          name: 'swapProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'tokenAuthority',\n          isMut: false,\n          isSigner: true,\n        },\n        {\n          name: 'whirlpool',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'tokenOwnerAccountA',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'tokenVaultA',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'tokenOwnerAccountB',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'tokenVaultB',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'tickArray0',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'tickArray1',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'tickArray2',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'oracle',\n          isMut: false,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'outAmount',\n          type: 'u64',\n        },\n        {\n          name: 'maximumInAmount',\n          type: 'u64',\n        },\n        {\n          name: 'aToB',\n          type: 'bool',\n        },\n        {\n          name: 'platformFeeBps',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'marinadeFinanceDeposit',\n      accounts: [\n        {\n          name: 'marinadeFinanceProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'state',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'msolMint',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'liqPoolSolLegPda',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'liqPoolMsolLeg',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'liqPoolMsolLegAuthority',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'reservePda',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'transferFrom',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'mintTo',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'msolMintAuthority',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'systemProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'userWsolTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'tempWsolTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'userTransferAuthority',\n          isMut: true,\n          isSigner: true,\n        },\n        {\n          name: 'wsolMint',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'rent',\n          isMut: false,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'inAmount',\n          type: {\n            option: 'u64',\n          },\n        },\n        {\n          name: 'minimumOutAmount',\n          type: 'u64',\n        },\n        {\n          name: 'platformFeeBps',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'marinadeFinanceLiquidUnstake',\n      accounts: [\n        {\n          name: 'marinadeFinanceProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'state',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'msolMint',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'liqPoolSolLegPda',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'liqPoolMsolLeg',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'treasuryMsolAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'getMsolFrom',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'getMsolFromAuthority',\n          isMut: false,\n          isSigner: true,\n        },\n        {\n          name: 'transferSolTo',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'systemProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'userWsolTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'inAmount',\n          type: {\n            option: 'u64',\n          },\n        },\n        {\n          name: 'minimumOutAmount',\n          type: 'u64',\n        },\n        {\n          name: 'platformFeeBps',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'riskCheckAndFee',\n      accounts: [\n        {\n          name: 'tokenLedger',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'userDestinationTokenAccount',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'userTransferAuthority',\n          isMut: false,\n          isSigner: true,\n        },\n        {\n          name: 'tokenProgram',\n          isMut: false,\n          isSigner: false,\n        },\n      ],\n      args: [\n        {\n          name: 'minimumOutAmount',\n          type: 'u64',\n        },\n        {\n          name: 'platformFeeBps',\n          type: 'u8',\n        },\n      ],\n    },\n    {\n      name: 'initializeTokenLedger',\n      accounts: [\n        {\n          name: 'tokenLedger',\n          isMut: true,\n          isSigner: true,\n        },\n        {\n          name: 'payer',\n          isMut: true,\n          isSigner: true,\n        },\n        {\n          name: 'systemProgram',\n          isMut: false,\n          isSigner: false,\n        },\n      ],\n      args: [],\n    },\n    {\n      name: 'setTokenLedger',\n      accounts: [\n        {\n          name: 'tokenLedger',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'tokenAccount',\n          isMut: false,\n          isSigner: false,\n        },\n      ],\n      args: [],\n    },\n    {\n      name: 'createOpenOrders',\n      accounts: [\n        {\n          name: 'openOrders',\n          isMut: true,\n          isSigner: false,\n        },\n        {\n          name: 'payer',\n          isMut: true,\n          isSigner: true,\n        },\n        {\n          name: 'dexProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'systemProgram',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'rent',\n          isMut: false,\n          isSigner: false,\n        },\n        {\n          name: 'market',\n          isMut: false,\n          isSigner: false,\n        },\n      ],\n      args: [],\n    },\n  ],\n  accounts: [\n    {\n      name: 'tokenLedger',\n      type: {\n        kind: 'struct',\n        fields: [\n          {\n            name: 'tokenAccount',\n            type: 'publicKey',\n          },\n          {\n            name: 'amount',\n            type: 'u64',\n          },\n        ],\n      },\n    },\n  ],\n  types: [\n    {\n      name: 'Swap',\n      type: {\n        kind: 'struct',\n        fields: [\n          {\n            name: 'tokens',\n            type: 'u64',\n          },\n          {\n            name: 'minTokens',\n            type: 'u64',\n          },\n          {\n            name: 'side',\n            type: {\n              defined: 'Side',\n            },\n          },\n        ],\n      },\n    },\n    {\n      name: 'Swap',\n      type: {\n        kind: 'struct',\n        fields: [\n          {\n            name: 'tokens',\n            type: 'u64',\n          },\n          {\n            name: 'minTokens',\n            type: 'u64',\n          },\n          {\n            name: 'side',\n            type: {\n              defined: 'Side',\n            },\n          },\n        ],\n      },\n    },\n    {\n      name: 'Swap',\n      type: {\n        kind: 'struct',\n        fields: [\n          {\n            name: 'amountIn',\n            type: 'u64',\n          },\n          {\n            name: 'minimumAmountOut',\n            type: 'u64',\n          },\n        ],\n      },\n    },\n    {\n      name: 'Deposit',\n      type: {\n        kind: 'struct',\n        fields: [\n          {\n            name: 'lamports',\n            type: 'u64',\n          },\n        ],\n      },\n    },\n    {\n      name: 'LiquidUnstake',\n      type: {\n        kind: 'struct',\n        fields: [\n          {\n            name: 'msolAmount',\n            type: 'u64',\n          },\n        ],\n      },\n    },\n    {\n      name: 'Swap',\n      type: {\n        kind: 'struct',\n        fields: [\n          {\n            name: 'amount',\n            type: 'u64',\n          },\n          {\n            name: 'otherAmountThreshold',\n            type: 'u64',\n          },\n          {\n            name: 'sqrtPriceLimit',\n            type: 'u128',\n          },\n          {\n            name: 'amountSpecifiedIsInput',\n            type: 'bool',\n          },\n          {\n            name: 'aToB',\n            type: 'bool',\n          },\n        ],\n      },\n    },\n    {\n      name: 'SwapInstrution',\n      type: {\n        kind: 'enum',\n        variants: [\n          {\n            name: 'Swap',\n            fields: [\n              {\n                defined: 'Swap',\n              },\n            ],\n          },\n        ],\n      },\n    },\n    {\n      name: 'Side',\n      type: {\n        kind: 'enum',\n        variants: [\n          {\n            name: 'Bid',\n          },\n          {\n            name: 'Ask',\n          },\n        ],\n      },\n    },\n    {\n      name: 'Direction',\n      type: {\n        kind: 'enum',\n        variants: [\n          {\n            name: 'LeftToRight',\n          },\n          {\n            name: 'RightToLeft',\n          },\n        ],\n      },\n    },\n  ],\n  errors: [\n    {\n      code: 6000,\n      name: 'SlippageToleranceExceeded',\n      msg: 'Slippage tolerance exceeded',\n    },\n    {\n      code: 6001,\n      name: 'InvalidTokenLedger',\n      msg: 'Invalid token ledger',\n    },\n    {\n      code: 6002,\n      name: 'MissingTokenLedger',\n      msg: 'Missing token ledger',\n    },\n    {\n      code: 6003,\n      name: 'MissingMercurialExchangeTokenAccount',\n      msg: 'Missing mercurial exchange token account',\n    },\n    {\n      code: 6004,\n      name: 'LedgerTokenAccountDoesNotMatch',\n      msg: 'Ledger token account does not match',\n    },\n    {\n      code: 6005,\n      name: 'MissingPlatformFeeAccount',\n      msg: 'Missing platform fee account',\n    },\n    {\n      code: 6006,\n      name: 'InvalidCalculation',\n      msg: 'Invalid calculation',\n    },\n  ],\n};\n","import { Cluster, PublicKey } from '@solana/web3.js';\nimport { IDL } from './lib/idl/jupiter';\n\nexport const WRAPPED_SOL_MINT = new PublicKey('So11111111111111111111111111111111111111112');\n\nexport const MAINNET_SERUM_DEX_PROGRAM = new PublicKey('9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin');\n\nexport const DEVNET_SERUM_DEX_PROGRAM = new PublicKey('DESVgJVGajEgKGXhb6XmqDHGz3VjdgP7rEVESBgxmroY');\n\nexport const MARKETS_URL: Record<Cluster, string> = {\n  devnet: 'https://api.jup.ag/api/markets/cache/devnet',\n  'mainnet-beta': 'https://cache.jup.ag/markets?v=3',\n  testnet: 'https://api.jup.ag/api/markets/cache/devnet',\n};\n\nexport const TOKEN_LIST_URL: Record<Cluster, string> = {\n  devnet: 'https://api.jup.ag/api/tokens/devnet',\n  testnet: 'https://api.jup.ag/api/markets/devnet',\n  'mainnet-beta': 'https://cache.jup.ag/tokens',\n};\n\nexport const LAMPORTS_PER_SIGNATURE = 5000;\n\nexport const RAYDIUM_AMM_V4_PROGRAM_ID = new PublicKey('675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8');\n\nexport const ALDRIN_SWAP_PROGRAM_ID = new PublicKey('AMM55ShdkoGRB5jVYPjWziwk8m5MpwyDgsMWHaMSQWH6');\n\n// https://github.com/aldrin-exchange/aldrin-sdk/blob/f93fe3f2d847d79d8ddff507d8d4f62fd803421b/src/v2.json\nexport const ALDRIN_SWAP_V2_PROGRAM_ID = new PublicKey('CURVGoZn8zycx6FXwwevgBTB2gVvdbGTEpvMJDbgs2t4');\n\nexport const SABER_ADD_DECIMALS_PROGRAM_ID = new PublicKey('DecZY86MU5Gj7kppfUCEmd4LbXXuyZH1yHaP2NTqdiZB');\n\nexport const CROPPER_PROGRAM_ID = new PublicKey('CTMAxxk34HjKWxQ3QLZK1HpaLXmBveao3ESePXbiyfzh');\n\nexport const SENCHA_PROGRAM_ID = new PublicKey('SCHAtsf8mbjyjiv4LkhLKutTf6JnZAbdJKFkXQNMFHZ');\n\nexport const LIFINITY_PROGRAM_ID = new PublicKey('EewxydAPCCVuNEyrVN68PuSYdQ7wKn27V9Gjeoi8dy3S');\n\nexport const CREMA_PROGRAM_ID = new PublicKey('6MLxLqiXaaSUpkgMnWDTuejNZEz3kE7k2woyHGVFw319');\n\nexport const JUPITER_WALLET = new PublicKey('BUX7s2ef2htTGb2KKoPHWkmzxPj4nTWMWRgs5CSbQxf9');\n\nexport const MERCURIAL_SWAP_PROGRAM_ID = new PublicKey('MERLuDFBMmsHnsBPZw2sDQZHvXFMwp8EdjudcU2HKky');\n\nexport const WHIRLPOOL_PROGRAM_ID = new PublicKey('whirLbMiicVdio4qvUfM5KAg6Ct8VwpYzGff3uctyCc');\n\nexport const CYKURA_PROGRAM_ID = new PublicKey('cysPXAjehMpVKUapzbMCCnpFxUFFryEWEaLgnb9NrR8');\n\nexport const CYKURA_FACTORY_STATE_ADDRESS = new PublicKey('DBsMwKfeoUHhxMi9x6wd2AsT12UwUCssjNbUzu1aKgqj');\n\nexport const MARINADE_PROGRAM_ID = new PublicKey('MarBmsSgKXdrN1egZf5sqe1TMai9K1rChYNDJgjq7aD');\n\nexport const STEPN_PROGRAM_ID = new PublicKey('Dooar9JkhdZ7J3LHN3A7YCuoGRUggXhQaG4kijfLGU2j');\n\n/** Tokens which are fundamental pivot in certain protocols */\nexport const SWAP_PROTOCOL_TOKENS = [\n  'StepAscQoEioFxxWGnh2sLBDFp9d8rvKz2Yp39iDpyT', // STEP\n  'DubwWZNWiNGMMeeQHPnMATNj77YZPZSAz2WVR5WjLJqz', // CRP\n];\n\ninterface ErrorDetails {\n  code: number;\n  name: string;\n  msg: string;\n}\n\ntype JUPITER_ERROR_TYPES =\n  | 'TransactionNotConfirmed'\n  | 'BalancesNotExtractedProperly'\n  | typeof IDL.errors[number]['name'];\n\nexport const JUPITER_ERRORS: Record<JUPITER_ERROR_TYPES, ErrorDetails> = Object.freeze({\n  TransactionNotConfirmed: {\n    code: 7000, // a code that is not in the list of errors\n    name: 'TransactionNotConfirmed',\n    msg: 'Transaction was not confirmed',\n  },\n  BalancesNotExtractedProperly: {\n    code: 7001, // a code that is not in the list of errors\n    name: 'BalancesNotExtractedProperly',\n    msg: 'Balances cannot be extracted properly',\n  },\n  ...IDL.errors.reduce((accErrors, error) => {\n    return { ...accErrors, [error.name]: error };\n  }, {} as Record<typeof IDL.errors[number]['name'], ErrorDetails>),\n});\n\nexport const IS_DEV = process.env.NODE_ENV === 'development';\n\nexport const MIN_SEGMENT_SIZE_FOR_INTERMEDIATE_MINTS = 100;\n","import { blob, Layout, Structure, u8, union } from '@solana/buffer-layout';\nimport { u64 } from '@solana/spl-token';\nimport { PublicKey } from '@solana/web3.js';\n\nclass PublicKeyLayout extends Layout<PublicKey> {\n  private layout: Layout<any>;\n\n  constructor(property?: string) {\n    const layout = blob(32);\n    super(layout.span, property);\n    this.layout = layout;\n  }\n\n  getSpan(b: Uint8Array, offset?: number) {\n    return this.layout.getSpan(b, offset);\n  }\n\n  decode(b: Uint8Array, offset?: number): PublicKey {\n    return new PublicKey(this.layout.decode(b, offset));\n  }\n\n  encode(src: PublicKey, b: Uint8Array, offset: number): number {\n    return this.layout.encode(src.toBuffer(), b, offset);\n  }\n}\n\n/**\n * Layout for a public key\n */\nexport const publicKey = (property: string) => new PublicKeyLayout(property);\n\nclass U64Layout extends Layout<u64> {\n  private layout: Layout<any>;\n\n  constructor(span = 8, property: string) {\n    const layout = blob(span);\n    super(layout.span, property);\n    this.layout = layout;\n  }\n\n  getSpan(b: Uint8Array, offset?: number) {\n    return this.layout.getSpan(b, offset);\n  }\n\n  decode(b: Uint8Array, offset?: number): u64 {\n    const bn = new u64(this.layout.decode(b, offset), 10, 'le');\n\n    return bn;\n  }\n\n  encode(src: u64, b: Uint8Array, offset: number): number {\n    return this.layout.encode(src.toArrayLike(Buffer, 'le', this.layout.span), b, offset);\n  }\n}\n\n/**\n * Layout for a 64bit unsigned value\n */\nexport const uint64 = (property: string) => new U64Layout(8, property);\n\nexport const uint128 = (property: string) => new U64Layout(16, property);\n\nexport const rustEnum = (variants: Structure<any>[], property: string) => {\n  // @ts-expect-error TODO: fix this\n  const unionLayout = union(u8(), u8(), property);\n  variants.forEach((variant, index) => unionLayout.addVariant(index, variant, variant.property || ''));\n  return unionLayout;\n};\n","import { findProgramAddressSync } from '@project-serum/anchor/dist/cjs/utils/pubkey';\nimport { blob, struct, u8 } from '@solana/buffer-layout';\nimport { u64 } from '@solana/spl-token';\nimport { AccountInfo, PublicKey } from '@solana/web3.js';\nimport { publicKey, uint64 } from '../../utils/layout';\n\ninterface CropperTokenSwapLayout {\n  version: number;\n  isInitialized: number;\n  nonce: number;\n  ammId: PublicKey;\n  serumProgramId: PublicKey;\n  serumMarket: PublicKey;\n  tokenProgramId: PublicKey;\n  tokenAAccount: PublicKey;\n  tokenBAccount: PublicKey;\n  poolMint: PublicKey;\n  mintA: PublicKey;\n  mintB: PublicKey;\n}\n\nexport const CropperTokenSwapLayout = struct<CropperTokenSwapLayout>([\n  u8('version'),\n  u8('isInitialized'),\n  u8('nonce'),\n  publicKey('ammId'),\n  publicKey('serumProgramId'),\n  publicKey('serumMarket'),\n  publicKey('tokenProgramId'),\n  publicKey('tokenAAccount'),\n  publicKey('tokenBAccount'),\n  publicKey('poolMint'),\n  publicKey('mintA'),\n  publicKey('mintB'),\n]);\n\ninterface CropperStateLayout {\n  isInitialized: number;\n  stateOwner: PublicKey;\n  feeOwner: PublicKey;\n  initialSupply: u64;\n  returnFeeNumerator: u64;\n  fixedFeeNumerator: u64;\n  feeDenominator: u64;\n  curveType: number;\n  curveParameters: Uint8Array;\n}\n\nconst CropperStateLayout = struct<CropperStateLayout>([\n  u8('isInitialized'),\n  publicKey('stateOwner'),\n  publicKey('feeOwner'),\n  uint64('initialSupply'),\n  uint64('returnFeeNumerator'),\n  uint64('fixedFeeNumerator'),\n  uint64('feeDenominator'),\n  u8('curveType'),\n  blob(32, 'curveParameters'),\n]);\n\nexport interface CropperState {\n  isInitialized: boolean;\n  stateOwner: PublicKey;\n  feeOwner: PublicKey;\n  initialSupply: u64;\n  returnFeeNumerator: number;\n  fixedFeeNumerator: number;\n  feeDenominator: number;\n  curveType: number;\n  curveParameters: Uint8Array;\n}\n\nexport interface CropperPoolState {\n  programId: PublicKey;\n  authority: PublicKey;\n  version: number;\n  isInitialized: boolean;\n  nonce: number;\n  ammId: PublicKey;\n  serumProgramId: PublicKey;\n  serumMarket: PublicKey;\n  tokenProgramId: PublicKey;\n  tokenAAccount: PublicKey;\n  tokenBAccount: PublicKey;\n  poolMint: PublicKey;\n  mintA: PublicKey;\n  mintB: PublicKey;\n}\n\n// This seems to be hardcoded.\nexport const CROPPER_STATE_ADDRESS = new PublicKey('3hsU1VgsBgBgz5jWiqdw9RfGU6TpWdCmdah1oi4kF3Tq');\n\nexport const accountInfoToCropperPoolState = (\n  address: PublicKey,\n  accountInfo: AccountInfo<Buffer>,\n): CropperPoolState => {\n  const programId = accountInfo.owner;\n\n  const decoded = CropperTokenSwapLayout.decode(accountInfo.data);\n  const [authority] = findProgramAddressSync([address.toBuffer()], programId);\n\n  return {\n    programId,\n    authority,\n    version: decoded.version,\n    isInitialized: Boolean(decoded.isInitialized),\n    nonce: decoded.nonce,\n    ammId: decoded.ammId,\n    serumProgramId: decoded.serumProgramId,\n    tokenProgramId: decoded.tokenProgramId,\n    tokenAAccount: decoded.tokenAAccount,\n    tokenBAccount: decoded.tokenBAccount,\n    serumMarket: decoded.serumMarket,\n    poolMint: decoded.poolMint,\n    mintA: decoded.mintA,\n    mintB: decoded.mintB,\n  };\n};\n\nexport const stateAccountInfoToCropperState = (accountInfo: AccountInfo<Buffer>): CropperState => {\n  const decoded = CropperStateLayout.decode(accountInfo.data);\n\n  return {\n    isInitialized: Boolean(decoded.isInitialized),\n    stateOwner: decoded.stateOwner,\n    feeOwner: decoded.feeOwner,\n    initialSupply: decoded.initialSupply,\n    returnFeeNumerator: decoded.returnFeeNumerator.toNumber(),\n    fixedFeeNumerator: decoded.fixedFeeNumerator.toNumber(),\n    feeDenominator: decoded.feeDenominator.toNumber(),\n    curveType: decoded.curveType,\n    curveParameters: decoded.curveParameters,\n  };\n};\n","import type { Provider } from '@project-serum/anchor';\nimport { Program } from '@project-serum/anchor';\nimport { createProgramAddressSync, findProgramAddressSync } from '@project-serum/anchor/dist/cjs/utils/pubkey';\nimport { Market } from '@project-serum/serum';\nimport { NATIVE_MINT, TOKEN_PROGRAM_ID } from '@solana/spl-token';\nimport { AccountMeta, PublicKey, SystemProgram, SYSVAR_RENT_PUBKEY, TransactionInstruction } from '@solana/web3.js';\nimport BN from 'bn.js';\nimport { Jupiter as JupiterIDL, IDL } from './idl/jupiter';\nimport type { RaydiumAmm } from './raydium/raydiumAmm';\nimport { StableSwap } from '@saberhq/stableswap-sdk';\nimport {\n  ALDRIN_SWAP_PROGRAM_ID,\n  ALDRIN_SWAP_V2_PROGRAM_ID,\n  RAYDIUM_AMM_V4_PROGRAM_ID,\n  SABER_ADD_DECIMALS_PROGRAM_ID,\n  MERCURIAL_SWAP_PROGRAM_ID,\n  CYKURA_PROGRAM_ID,\n  CYKURA_FACTORY_STATE_ADDRESS,\n  WHIRLPOOL_PROGRAM_ID,\n  MARINADE_PROGRAM_ID,\n} from '../constants';\nimport { AldrinPoolState } from './aldrin/poolState';\nimport type { TokenSwapState } from './spl-token-swap/tokenSwapLayout';\nimport { PlatformFee } from './types';\nimport type { AddDecimals } from './saber/saberAddDecimalsAmm';\nimport { CropperPoolState, CROPPER_STATE_ADDRESS } from './cropper/swapLayout';\nimport { SenchaPoolState } from './sencha/swapLayout';\nimport { CremaPoolState } from './crema/swapLayout';\nimport { MercurialSwapLayoutState } from './mercurial/swapLayout';\nimport { LifinitySwapLayoutState } from './lifinity/swapLayout';\nimport { MarinadeStateResponse } from './marinade/marinade-state.types';\nimport JSBI from 'jsbi';\n\n// Side rust enum used for the program's RPC API.\nconst Side = {\n  Bid: { bid: {} },\n  Ask: { ask: {} },\n};\n\nexport const JUPITER_PROGRAM_ID_STAGING = new PublicKey('JUPSjgjMFjU4453KMgxhqVmzep6W352bQpE4RsNqXAx');\nexport const JUPITER_PROGRAM_ID_PRODUCTION = new PublicKey('JUP3c2Uh3WA4Ng34tw6kPd2G4C5BB21Xo36Je1s32Ph');\n\nconst JUPITER_PROGRAM_ID = JUPITER_PROGRAM_ID_PRODUCTION; // JUPITER_PROGRAM_ID_PRODUCTION;\n\nconst JUPITER_PROGRAM = new Program<JupiterIDL>(IDL, JUPITER_PROGRAM_ID, {} as Provider);\n\nexport const PRODUCTION_TOKEN_LEDGERS = [\n  new PublicKey('755CiAfB63jK8DTZSM38ZRBTjf1inGM4QfLJTfpPM9x3'),\n  new PublicKey('5ZZ7w2C1c348nQm4zaYgrgb8gfyyqQNzH61zPwGvEQK9'),\n  new PublicKey('H4K65yLyYqVsDxgNCVGqK7MqrpKFLZjmqf95ZvmfyVDx'),\n  new PublicKey('HE4STzYv5dzw2G374ynt4EYvzuKLG41P2xnNffzpdWnG'),\n  new PublicKey('3HmXTbZf6G2oEjN3bPreZmF7YGLbbEXFkgAbVFPaimwU'),\n  new PublicKey('CUNMrNvGNh1aWR6cVzAQekdsW2dfacnQicyfvgvrN5ap'),\n  new PublicKey('6Q6vMHsUFA7kuwdkG9vm7gByMfk151Z9eMSwE14fHcrG'),\n];\nexport const STAGING_TOKEN_LEDGERS = [new PublicKey('755CiAfB63jK8DTZSM38ZRBTjf1inGM4QfLJTfpPM9x3')];\n\nexport const TOKEN_LEDGER: PublicKey =\n  PRODUCTION_TOKEN_LEDGERS[Math.floor(Math.random() * PRODUCTION_TOKEN_LEDGERS.length)];\n\ntype CreateSwapInstructionParams = {\n  sourceMint: PublicKey;\n  userSourceTokenAccount: PublicKey;\n  userDestinationTokenAccount: PublicKey;\n  userTransferAuthority: PublicKey;\n  inAmount: BN | null;\n  minimumOutAmount: BN;\n  tokenLedger: PublicKey;\n  platformFee?: PlatformFee;\n};\n\ntype CreateSwapExactOutputInstructionParams = {\n  sourceMint: PublicKey;\n  userSourceTokenAccount: PublicKey;\n  userDestinationTokenAccount: PublicKey;\n  userTransferAuthority: PublicKey;\n  outAmount: BN;\n  maximumInAmount: BN;\n  tokenLedger: PublicKey;\n  platformFee?: PlatformFee;\n};\n\nfunction stableSwapNPoolIntoMercurialExchange(\n  swayLayout: MercurialSwapLayoutState,\n  sourceTokenAccount: PublicKey,\n  destinationTokenAccount: PublicKey,\n  userTransferAuthority: PublicKey,\n) {\n  return {\n    swapProgram: MERCURIAL_SWAP_PROGRAM_ID,\n    swapState: swayLayout.ammId,\n    tokenProgram: TOKEN_PROGRAM_ID,\n    poolAuthority: swayLayout.authority,\n    userTransferAuthority: userTransferAuthority,\n\n    sourceTokenAccount,\n    destinationTokenAccount,\n  };\n}\n\nfunction raydiumAmmToRaydiumSwap(\n  raydiumAmm: RaydiumAmm,\n  userSourceTokenAccount: PublicKey,\n  userDestinationTokenAccount: PublicKey,\n  userTransferAuthority: PublicKey,\n) {\n  const [ammAuthority] = findProgramAddressSync(\n    [new Uint8Array(Buffer.from('amm authority'.replace('\\u00A0', ' '), 'utf-8'))],\n    RAYDIUM_AMM_V4_PROGRAM_ID,\n  );\n\n  if (!raydiumAmm.serumMarketKeys) {\n    throw new Error('RaydiumAmm is missing serumMarketKeys');\n  }\n\n  return {\n    swapProgram: RAYDIUM_AMM_V4_PROGRAM_ID,\n    tokenProgram: TOKEN_PROGRAM_ID,\n    ammId: raydiumAmm.ammId,\n    ammAuthority,\n    ammOpenOrders: raydiumAmm.ammOpenOrders,\n    poolCoinTokenAccount: raydiumAmm.poolCoinTokenAccount,\n    poolPcTokenAccount: raydiumAmm.poolPcTokenAccount,\n    serumProgramId: raydiumAmm.serumProgramId,\n    serumMarket: raydiumAmm.serumMarket,\n    serumBids: raydiumAmm.serumMarketKeys.serumBids,\n    serumAsks: raydiumAmm.serumMarketKeys.serumAsks,\n    serumEventQueue: raydiumAmm.serumMarketKeys.serumEventQueue,\n    serumCoinVaultAccount: raydiumAmm.serumMarketKeys.serumCoinVaultAccount,\n    serumPcVaultAccount: raydiumAmm.serumMarketKeys.serumPcVaultAccount,\n    serumVaultSigner: raydiumAmm.serumMarketKeys.serumVaultSigner,\n    userSourceTokenAccount: userSourceTokenAccount,\n    userDestinationTokenAccount: userDestinationTokenAccount,\n    userSourceOwner: userTransferAuthority,\n  };\n}\n\nfunction marketIntoSerumSwap(\n  market: Market,\n  openOrdersAddress: PublicKey,\n  orderPayerTokenAccountAddress: PublicKey,\n  coinWallet: PublicKey,\n  pcWallet: PublicKey,\n  userTransferAuthority: PublicKey,\n) {\n  const vaultSigner = createProgramAddressSync(\n    [market.address.toBuffer(), market.decoded.vaultSignerNonce.toArrayLike(Buffer, 'le', 8)],\n    market.programId,\n  );\n\n  return {\n    market: {\n      market: market.address,\n      openOrders: openOrdersAddress,\n      requestQueue: market.decoded.requestQueue,\n      eventQueue: market.decoded.eventQueue,\n      bids: market.bidsAddress,\n      asks: market.asksAddress,\n      coinVault: market.decoded.baseVault,\n      pcVault: market.decoded.quoteVault,\n      vaultSigner,\n    },\n    authority: userTransferAuthority,\n    orderPayerTokenAccount: orderPayerTokenAccountAddress,\n    coinWallet,\n    pcWallet,\n    // Programs.\n    dexProgram: market.programId,\n    tokenProgram: TOKEN_PROGRAM_ID,\n    // Sysvars.\n    rent: SYSVAR_RENT_PUBKEY,\n  };\n}\n\nexport function createMercurialExchangeInstruction({\n  swapLayout,\n  userSourceTokenAccount,\n  userDestinationTokenAccount,\n  userTransferAuthority,\n  inAmount,\n  minimumOutAmount,\n  tokenLedger,\n  platformFee,\n}: { swapLayout: MercurialSwapLayoutState } & CreateSwapInstructionParams): TransactionInstruction {\n  const remainingAccounts: AccountMeta[] = [];\n\n  for (const swapTokenAccount of swapLayout.tokenAccounts) {\n    remainingAccounts.push({\n      pubkey: swapTokenAccount,\n      isSigner: false,\n      isWritable: true,\n    });\n  }\n  remainingAccounts.push(...prepareRemainingAccounts(inAmount, tokenLedger, platformFee?.feeAccount));\n\n  return JUPITER_PROGRAM.instruction.mercurialExchange(inAmount, minimumOutAmount, platformFee?.feeBps ?? 0, {\n    accounts: stableSwapNPoolIntoMercurialExchange(\n      swapLayout,\n      userSourceTokenAccount,\n      userDestinationTokenAccount,\n      userTransferAuthority,\n    ),\n    remainingAccounts,\n  });\n}\n\nexport function createSerumSwapInstruction({\n  market,\n  sourceMint,\n  openOrdersAddress,\n  userSourceTokenAccount,\n  userDestinationTokenAccount,\n  userTransferAuthority,\n  inAmount,\n  minimumOutAmount,\n  tokenLedger,\n  platformFee,\n  referrer,\n}: {\n  market: Market;\n  openOrdersAddress: PublicKey;\n  referrer: PublicKey | undefined;\n} & CreateSwapInstructionParams): TransactionInstruction {\n  const { side, coinWallet, pcWallet } = sourceMint.equals(market.baseMintAddress)\n    ? {\n        side: Side.Ask,\n        coinWallet: userSourceTokenAccount,\n        pcWallet: userDestinationTokenAccount,\n      }\n    : {\n        side: Side.Bid,\n        coinWallet: userDestinationTokenAccount,\n        pcWallet: userSourceTokenAccount,\n      };\n\n  let remainingAccounts = prepareRemainingAccounts(inAmount, tokenLedger, platformFee?.feeAccount);\n\n  if (referrer) {\n    remainingAccounts.push({\n      pubkey: referrer,\n      isSigner: false,\n      isWritable: true,\n    });\n  }\n\n  return JUPITER_PROGRAM.instruction.serumSwap(side, inAmount, minimumOutAmount, platformFee?.feeBps ?? 0, {\n    accounts: marketIntoSerumSwap(\n      market,\n      openOrdersAddress,\n      userSourceTokenAccount,\n      coinWallet,\n      pcWallet,\n      userTransferAuthority,\n    ),\n    remainingAccounts,\n  });\n}\n\nexport function createTokenSwapInstruction({\n  tokenSwapState,\n  sourceMint,\n  userSourceTokenAccount,\n  userDestinationTokenAccount,\n  userTransferAuthority,\n  inAmount,\n  minimumOutAmount,\n  tokenLedger,\n  platformFee,\n  isStep,\n}: { tokenSwapState: TokenSwapState; isStep: boolean } & CreateSwapInstructionParams): TransactionInstruction {\n  const [swapSource, swapDestination] = sourceMint.equals(tokenSwapState.mintA)\n    ? [tokenSwapState.tokenAccountA, tokenSwapState.tokenAccountB]\n    : [tokenSwapState.tokenAccountB, tokenSwapState.tokenAccountA];\n\n  return (isStep ? JUPITER_PROGRAM.instruction.stepTokenSwap : JUPITER_PROGRAM.instruction.tokenSwap)(\n    inAmount,\n    minimumOutAmount,\n    platformFee?.feeBps ?? 0,\n    {\n      accounts: {\n        tokenSwapProgram: tokenSwapState.programId,\n        tokenProgram: TOKEN_PROGRAM_ID,\n        swap: tokenSwapState.address,\n        authority: tokenSwapState.authority,\n        userTransferAuthority: userTransferAuthority,\n        source: userSourceTokenAccount,\n        swapSource,\n        swapDestination,\n        destination: userDestinationTokenAccount,\n        poolMint: tokenSwapState.poolToken,\n        poolFee: tokenSwapState.feeAccount,\n      },\n      remainingAccounts: prepareRemainingAccounts(inAmount, tokenLedger, platformFee?.feeAccount),\n    },\n  );\n}\n\nexport function createSenchaSwapInstruction({\n  poolState,\n  sourceMint,\n  userSourceTokenAccount,\n  userDestinationTokenAccount,\n  userTransferAuthority,\n  inAmount,\n  minimumOutAmount,\n  tokenLedger,\n  platformFee,\n}: { poolState: SenchaPoolState } & CreateSwapInstructionParams): TransactionInstruction {\n  const [swapSource, swapDestination] = sourceMint.equals(poolState.token0Mint)\n    ? [poolState.token0Reserves, poolState.token1Reserves]\n    : [poolState.token1Reserves, poolState.token0Reserves];\n\n  const [feesSource, feesDestination] = sourceMint.equals(poolState.token0Mint)\n    ? [poolState.token0Fees, poolState.token1Fees]\n    : [poolState.token1Fees, poolState.token0Fees];\n\n  return JUPITER_PROGRAM.instruction.senchaExchange(inAmount, minimumOutAmount, platformFee?.feeBps ?? 0, {\n    accounts: {\n      swapProgram: poolState.programId,\n      tokenProgram: TOKEN_PROGRAM_ID,\n      swap: poolState.ammId,\n      userAuthority: userTransferAuthority,\n      inputUserAccount: userSourceTokenAccount,\n      inputTokenAccount: swapSource,\n      inputFeesAccount: feesSource,\n      outputUserAccount: userDestinationTokenAccount,\n      outputTokenAccount: swapDestination,\n      outputFeesAccount: feesDestination,\n    },\n    remainingAccounts: prepareRemainingAccounts(inAmount, tokenLedger, platformFee?.feeAccount),\n  });\n}\n\nexport function createCropperSwapInstruction({\n  poolState,\n  feeAccount,\n  sourceMint,\n  userSourceTokenAccount,\n  userDestinationTokenAccount,\n  userTransferAuthority,\n  inAmount,\n  minimumOutAmount,\n  tokenLedger,\n  platformFee,\n}: { poolState: CropperPoolState; feeAccount: PublicKey } & CreateSwapInstructionParams): TransactionInstruction {\n  const [swapSource, swapDestination] = sourceMint.equals(poolState.mintA)\n    ? [poolState.tokenAAccount, poolState.tokenBAccount]\n    : [poolState.tokenBAccount, poolState.tokenAAccount];\n\n  return JUPITER_PROGRAM.instruction.cropperTokenSwap(inAmount, minimumOutAmount, platformFee?.feeBps ?? 0, {\n    accounts: {\n      tokenSwapProgram: poolState.programId,\n      tokenProgram: TOKEN_PROGRAM_ID,\n      swap: poolState.ammId,\n      swapState: CROPPER_STATE_ADDRESS,\n      authority: poolState.authority,\n      userTransferAuthority: userTransferAuthority,\n      source: userSourceTokenAccount,\n      swapSource,\n      swapDestination,\n      destination: userDestinationTokenAccount,\n      poolMint: poolState.poolMint,\n      poolFee: feeAccount,\n    },\n    remainingAccounts: prepareRemainingAccounts(inAmount, tokenLedger, platformFee?.feeAccount),\n  });\n}\n\nexport function createRaydiumSwapInstruction({\n  raydiumAmm,\n  userSourceTokenAccount,\n  userDestinationTokenAccount,\n  userTransferAuthority,\n  inAmount,\n  minimumOutAmount,\n  tokenLedger,\n  platformFee,\n}: { raydiumAmm: RaydiumAmm } & CreateSwapInstructionParams): TransactionInstruction {\n  return JUPITER_PROGRAM.instruction.raydiumSwapV2(inAmount, minimumOutAmount, platformFee?.feeBps ?? 0, {\n    accounts: raydiumAmmToRaydiumSwap(\n      raydiumAmm,\n      userSourceTokenAccount,\n      userDestinationTokenAccount,\n      userTransferAuthority,\n    ),\n    remainingAccounts: prepareRemainingAccounts(inAmount, tokenLedger, platformFee?.feeAccount),\n  });\n}\n\nexport function createAldrinSwapInstruction({\n  poolState,\n  sourceMint,\n  userSourceTokenAccount,\n  userDestinationTokenAccount,\n  userTransferAuthority,\n  inAmount,\n  minimumOutAmount,\n  tokenLedger,\n  platformFee,\n}: {\n  poolState: AldrinPoolState;\n} & CreateSwapInstructionParams): TransactionInstruction {\n  const [side, userBaseTokenAccount, userQuoteTokenAccount] = sourceMint.equals(poolState.baseTokenMint)\n    ? [Side.Ask, userSourceTokenAccount, userDestinationTokenAccount]\n    : [Side.Bid, userDestinationTokenAccount, userSourceTokenAccount];\n\n  return JUPITER_PROGRAM.instruction.aldrinSwap(inAmount, minimumOutAmount, side, platformFee?.feeBps ?? 0, {\n    accounts: {\n      swapProgram: ALDRIN_SWAP_PROGRAM_ID,\n      pool: poolState.address,\n      poolSigner: poolState.poolSigner,\n      poolMint: poolState.poolMint,\n      baseTokenVault: poolState.baseTokenVault,\n      quoteTokenVault: poolState.quoteTokenVault,\n      feePoolTokenAccount: poolState.feePoolTokenAccount,\n      walletAuthority: userTransferAuthority,\n      userBaseTokenAccount,\n      userQuoteTokenAccount,\n      tokenProgram: TOKEN_PROGRAM_ID,\n    },\n    remainingAccounts: prepareRemainingAccounts(inAmount, tokenLedger, platformFee?.feeAccount),\n  });\n}\n\nexport function createAldrinV2SwapInstruction({\n  poolState,\n  sourceMint,\n  userSourceTokenAccount,\n  userDestinationTokenAccount,\n  curve,\n  userTransferAuthority,\n  inAmount,\n  minimumOutAmount,\n  tokenLedger,\n  platformFee,\n}: { poolState: AldrinPoolState; curve: PublicKey } & CreateSwapInstructionParams): TransactionInstruction {\n  const [side, userBaseTokenAccount, userQuoteTokenAccount] = sourceMint.equals(poolState.baseTokenMint)\n    ? [Side.Ask, userSourceTokenAccount, userDestinationTokenAccount]\n    : [Side.Bid, userDestinationTokenAccount, userSourceTokenAccount];\n\n  return JUPITER_PROGRAM.instruction.aldrinV2Swap(inAmount, minimumOutAmount, side, platformFee?.feeBps ?? 0, {\n    accounts: {\n      swapProgram: ALDRIN_SWAP_V2_PROGRAM_ID,\n      pool: poolState.address,\n      poolSigner: poolState.poolSigner,\n      poolMint: poolState.poolMint,\n      baseTokenVault: poolState.baseTokenVault,\n      quoteTokenVault: poolState.quoteTokenVault,\n      feePoolTokenAccount: poolState.feePoolTokenAccount,\n      walletAuthority: userTransferAuthority,\n      userBaseTokenAccount,\n      userQuoteTokenAccount,\n      curve,\n      tokenProgram: TOKEN_PROGRAM_ID,\n    },\n    remainingAccounts: prepareRemainingAccounts(inAmount, tokenLedger, platformFee?.feeAccount),\n  });\n}\n\nexport function createCremaSwapInstruction({\n  poolState,\n  sourceMint,\n  userSourceTokenAccount,\n  userDestinationTokenAccount,\n  userTransferAuthority,\n  inAmount,\n  minimumOutAmount,\n  tokenLedger,\n  platformFee,\n}: { poolState: CremaPoolState } & CreateSwapInstructionParams): TransactionInstruction {\n  const [swapSource, swapDestination] = sourceMint.equals(poolState.mintA)\n    ? [poolState.tokenAAccount, poolState.tokenBAccount]\n    : [poolState.tokenBAccount, poolState.tokenAAccount];\n\n  return JUPITER_PROGRAM.instruction.cremaTokenSwap(inAmount, minimumOutAmount, platformFee?.feeBps ?? 0, {\n    accounts: {\n      swapProgram: poolState.programId,\n      pool: poolState.ammId,\n      poolSigner: poolState.authority,\n      userSourceTokenAccount: userSourceTokenAccount,\n      userDestinationTokenAccount: userDestinationTokenAccount,\n      poolSourceTokenAccount: swapSource,\n      poolDestinationTokenAccount: swapDestination,\n      poolTicksAccount: poolState.ticksKey,\n      walletAuthority: userTransferAuthority,\n      tokenProgram: TOKEN_PROGRAM_ID,\n    },\n    remainingAccounts: prepareRemainingAccounts(inAmount, tokenLedger, platformFee?.feeAccount),\n  });\n}\n\nexport function createRiskCheckAndFeeInstruction(\n  userDestinationTokenAccount: PublicKey,\n  userTransferAuthority: PublicKey,\n  minimumOutAmount: BN,\n  tokenLedger: PublicKey,\n  platformFee: PlatformFee | undefined,\n): TransactionInstruction {\n  const remainingAccounts: AccountMeta[] = [];\n\n  if (platformFee?.feeAccount) {\n    remainingAccounts.push({\n      pubkey: platformFee.feeAccount,\n      isSigner: false,\n      isWritable: true,\n    });\n  }\n\n  return JUPITER_PROGRAM.instruction.riskCheckAndFee(minimumOutAmount, platformFee?.feeBps ?? 0, {\n    accounts: {\n      tokenLedger,\n      userDestinationTokenAccount,\n      userTransferAuthority,\n      tokenProgram: TOKEN_PROGRAM_ID,\n    },\n    remainingAccounts,\n  });\n}\n\nexport function createSetTokenLedgerInstruction(\n  tokenLedger: PublicKey,\n  tokenAccountAddress: PublicKey,\n): TransactionInstruction {\n  return JUPITER_PROGRAM.instruction.setTokenLedger({\n    accounts: {\n      tokenLedger,\n      tokenAccount: tokenAccountAddress,\n    },\n  });\n}\n\nexport function createInitializeTokenLedgerInstruction(\n  tokenLedger: PublicKey,\n  payer: PublicKey,\n): TransactionInstruction {\n  return JUPITER_PROGRAM.instruction.initializeTokenLedger({\n    accounts: {\n      tokenLedger,\n      payer,\n      systemProgram: SystemProgram.programId,\n    },\n  });\n}\n\nexport function createOpenOrdersInstruction(\n  market: Market,\n  userTransferAuthority: PublicKey,\n): [PublicKey, TransactionInstruction] {\n  const [openOrders] = findProgramAddressSync(\n    [Buffer.from('open_orders'), market.publicKey.toBuffer(), userTransferAuthority.toBuffer()],\n    JUPITER_PROGRAM_ID,\n  );\n\n  const ix = JUPITER_PROGRAM.instruction.createOpenOrders({\n    accounts: {\n      openOrders,\n      payer: userTransferAuthority,\n      dexProgram: market.programId,\n      systemProgram: SystemProgram.programId,\n      rent: SYSVAR_RENT_PUBKEY,\n      market: market.publicKey,\n    },\n  });\n  return [openOrders, ix];\n}\n\nfunction saberPoolIntoSaberSwap(\n  saberPool: StableSwap,\n  sourceMintAddress: PublicKey,\n  userSourceTokenAccount: PublicKey,\n  userDestinationTokenAccount: PublicKey,\n  userTransferAuthority: PublicKey,\n) {\n  const feesTokenAccount = sourceMintAddress.equals(saberPool.state.tokenA.mint)\n    ? saberPool.state.tokenB.adminFeeAccount\n    : saberPool.state.tokenA.adminFeeAccount;\n  const [inputTokenAccount, outputTokenAccount] = sourceMintAddress.equals(saberPool.state.tokenA.mint)\n    ? [saberPool.state.tokenA.reserve, saberPool.state.tokenB.reserve]\n    : [saberPool.state.tokenB.reserve, saberPool.state.tokenA.reserve];\n\n  return {\n    swapProgram: saberPool.config.swapProgramID,\n    tokenProgram: TOKEN_PROGRAM_ID,\n    swap: saberPool.config.swapAccount,\n    swapAuthority: saberPool.config.authority,\n    userAuthority: userTransferAuthority,\n    inputUserAccount: userSourceTokenAccount,\n    inputTokenAccount,\n    outputUserAccount: userDestinationTokenAccount,\n    outputTokenAccount,\n    feesTokenAccount,\n  };\n}\n\nexport function createSaberSwapInstruction({\n  stableSwap,\n  sourceMint,\n  userSourceTokenAccount,\n  userDestinationTokenAccount,\n  userTransferAuthority,\n  inAmount,\n  minimumOutAmount,\n  tokenLedger,\n  platformFee,\n}: { stableSwap: StableSwap } & CreateSwapInstructionParams): TransactionInstruction {\n  const remainingAccounts = prepareRemainingAccounts(inAmount, tokenLedger, platformFee?.feeAccount);\n  return JUPITER_PROGRAM.instruction.saberSwap(inAmount, minimumOutAmount, platformFee?.feeBps ?? 0, {\n    accounts: saberPoolIntoSaberSwap(\n      stableSwap,\n      sourceMint,\n      userSourceTokenAccount,\n      userDestinationTokenAccount,\n      userTransferAuthority,\n    ),\n    remainingAccounts,\n  });\n}\n\nexport function createSaberAddDecimalsDepositInstruction({\n  addDecimals,\n  userSourceTokenAccount,\n  userDestinationTokenAccount,\n  userTransferAuthority,\n  inAmount,\n  minimumOutAmount,\n  tokenLedger,\n  platformFee,\n}: { addDecimals: AddDecimals } & CreateSwapInstructionParams) {\n  const remainingAccounts = prepareRemainingAccounts(inAmount, tokenLedger, platformFee?.feeAccount);\n  return JUPITER_PROGRAM.instruction.saberAddDecimalsDeposit(inAmount, minimumOutAmount, platformFee?.feeBps ?? 0, {\n    accounts: {\n      addDecimalsProgram: SABER_ADD_DECIMALS_PROGRAM_ID,\n      wrapper: addDecimals.wrapper,\n      wrapperMint: addDecimals.mint,\n      wrapperUnderlyingTokens: addDecimals.wrapperUnderlyingTokens,\n      owner: userTransferAuthority,\n      userUnderlyingTokens: userSourceTokenAccount,\n      userWrappedTokens: userDestinationTokenAccount,\n      tokenProgram: TOKEN_PROGRAM_ID,\n    },\n    remainingAccounts,\n  });\n}\n\nexport function createSaberAddDecimalsWithdrawInstruction({\n  addDecimals,\n  userSourceTokenAccount,\n  userDestinationTokenAccount,\n  userTransferAuthority,\n  inAmount,\n  minimumOutAmount,\n  tokenLedger,\n  platformFee,\n}: { addDecimals: AddDecimals } & CreateSwapInstructionParams) {\n  const remainingAccounts = prepareRemainingAccounts(inAmount, tokenLedger, platformFee?.feeAccount);\n  return JUPITER_PROGRAM.instruction.saberAddDecimalsWithdraw(inAmount, minimumOutAmount, platformFee?.feeBps ?? 0, {\n    accounts: {\n      addDecimalsProgram: SABER_ADD_DECIMALS_PROGRAM_ID,\n      wrapper: addDecimals.wrapper,\n      wrapperMint: addDecimals.mint,\n      wrapperUnderlyingTokens: addDecimals.wrapperUnderlyingTokens,\n      owner: userTransferAuthority,\n      userUnderlyingTokens: userDestinationTokenAccount,\n      userWrappedTokens: userSourceTokenAccount,\n      tokenProgram: TOKEN_PROGRAM_ID,\n    },\n    remainingAccounts,\n  });\n}\n\nexport function createLifinitySwapInstruction({\n  swapState,\n  sourceMint,\n  userSourceTokenAccount,\n  userDestinationTokenAccount,\n  userTransferAuthority,\n  inAmount,\n  minimumOutAmount,\n  tokenLedger,\n  platformFee,\n}: { swapState: LifinitySwapLayoutState } & CreateSwapInstructionParams): TransactionInstruction {\n  const [swapSource, swapDestination] = sourceMint.equals(swapState.tokenAMint)\n    ? [swapState.poolCoinTokenAccount, swapState.poolPcTokenAccount]\n    : [swapState.poolPcTokenAccount, swapState.poolCoinTokenAccount];\n\n  return JUPITER_PROGRAM.instruction.lifinityTokenSwap(inAmount, minimumOutAmount, platformFee?.feeBps ?? 0, {\n    accounts: {\n      swapProgram: swapState.programId,\n      authority: swapState.authority,\n      amm: swapState.amm,\n      userTransferAuthority: userTransferAuthority,\n      sourceInfo: userSourceTokenAccount,\n      destinationInfo: userDestinationTokenAccount,\n      swapSource,\n      swapDestination,\n      poolMint: swapState.poolMint,\n      feeAccount: swapState.feeAccount,\n      tokenProgram: TOKEN_PROGRAM_ID,\n      pythAccount: swapState.pythAccount,\n      pythPcAccount: swapState.pythPcAccount,\n      configAccount: swapState.configAccount,\n    },\n    remainingAccounts: prepareRemainingAccounts(inAmount, tokenLedger, platformFee?.feeAccount),\n  });\n}\n\ntype CykuraSwapInstructionArgs = {\n  poolAddress: PublicKey;\n  inputVault: PublicKey;\n  outputVault: PublicKey;\n  nextObservationState: PublicKey;\n  lastObservationState: PublicKey;\n  swapAccountMetas: AccountMeta[];\n};\n\nexport function createCykuraSwapInstruction({\n  additionalArgs,\n  userSourceTokenAccount,\n  userDestinationTokenAccount,\n  userTransferAuthority,\n  inAmount,\n  minimumOutAmount,\n  tokenLedger,\n  platformFee,\n}: { additionalArgs: CykuraSwapInstructionArgs } & CreateSwapInstructionParams): TransactionInstruction {\n  const remainingAccounts = prepareRemainingAccounts(inAmount, tokenLedger, platformFee?.feeAccount);\n\n  return JUPITER_PROGRAM.instruction.cykuraSwap(inAmount, minimumOutAmount, platformFee?.feeBps ?? 0, {\n    accounts: {\n      swapProgram: CYKURA_PROGRAM_ID,\n      signer: userTransferAuthority,\n      factoryState: CYKURA_FACTORY_STATE_ADDRESS,\n      poolState: additionalArgs.poolAddress,\n      inputTokenAccount: userSourceTokenAccount,\n      outputTokenAccount: userDestinationTokenAccount,\n      inputVault: additionalArgs.inputVault,\n      outputVault: additionalArgs.outputVault,\n      lastObservationState: additionalArgs.lastObservationState,\n      coreProgram: CYKURA_PROGRAM_ID, // Duplicated as in Cykura accounts\n      tokenProgram: TOKEN_PROGRAM_ID,\n    },\n    remainingAccounts: remainingAccounts.concat([\n      ...additionalArgs.swapAccountMetas,\n      { pubkey: additionalArgs.nextObservationState, isSigner: false, isWritable: true },\n    ]),\n  });\n}\n\ntype WhirlpoolSwapInstructionArgs = {\n  aToB: boolean;\n  whirlpool: PublicKey;\n  tokenVaultA: PublicKey;\n  tokenVaultB: PublicKey;\n  tickArray0: PublicKey;\n  tickArray1: PublicKey;\n  tickArray2: PublicKey;\n  oracle: PublicKey;\n};\n\nexport function createWhirlpoolSwapInstruction({\n  additionalArgs,\n  userSourceTokenAccount,\n  userDestinationTokenAccount,\n  userTransferAuthority,\n  inAmount,\n  minimumOutAmount,\n  tokenLedger,\n  platformFee,\n}: { additionalArgs: WhirlpoolSwapInstructionArgs } & CreateSwapInstructionParams): TransactionInstruction {\n  const [tokenOwnerAccountA, tokenOwnerAccountB] = additionalArgs.aToB\n    ? [userSourceTokenAccount, userDestinationTokenAccount]\n    : [userDestinationTokenAccount, userSourceTokenAccount];\n\n  return JUPITER_PROGRAM.instruction.whirlpoolSwap(\n    inAmount,\n    minimumOutAmount,\n    additionalArgs.aToB,\n    platformFee?.feeBps ?? 0,\n    {\n      accounts: {\n        swapProgram: WHIRLPOOL_PROGRAM_ID,\n        tokenProgram: TOKEN_PROGRAM_ID,\n        tokenAuthority: userTransferAuthority,\n        whirlpool: additionalArgs.whirlpool,\n        tokenOwnerAccountA,\n        tokenVaultA: additionalArgs.tokenVaultA,\n        tokenOwnerAccountB,\n        tokenVaultB: additionalArgs.tokenVaultB,\n        tickArray0: additionalArgs.tickArray0,\n        tickArray1: additionalArgs.tickArray1,\n        tickArray2: additionalArgs.tickArray2,\n        oracle: additionalArgs.oracle,\n      },\n      remainingAccounts: prepareRemainingAccounts(inAmount, tokenLedger, platformFee?.feeAccount),\n    },\n  );\n}\n\ntype MarinadeFinanceDepositInstructionArgs = {\n  address: PublicKey;\n  marinadeStateResponse: MarinadeStateResponse;\n  liqPoolSolLegPda: PublicKey;\n  liqPoolMsolLegAuthority: PublicKey;\n  reservePda: PublicKey;\n  msolMintAuthority: PublicKey;\n};\n\nexport function createMarinadeFinanceDepositInstruction({\n  additionalArgs,\n  userSourceTokenAccount,\n  userDestinationTokenAccount,\n  userTransferAuthority,\n  inAmount,\n  minimumOutAmount,\n  tokenLedger,\n  platformFee,\n}: { additionalArgs: MarinadeFinanceDepositInstructionArgs } & CreateSwapInstructionParams): TransactionInstruction {\n  const transferFrom = userTransferAuthority;\n  const tempWsolTokenAccount = findProgramAddressSync(\n    [Buffer.from('temp-wsol-token-account'), transferFrom.toBuffer()],\n    JUPITER_PROGRAM_ID,\n  )[0];\n  const tempSolPda = findProgramAddressSync(\n    [Buffer.from('temp-sol-pda'), userTransferAuthority.toBuffer()],\n    JUPITER_PROGRAM_ID,\n  )[0];\n\n  return JUPITER_PROGRAM.instruction.marinadeFinanceDeposit(inAmount, minimumOutAmount, platformFee?.feeBps ?? 0, {\n    accounts: {\n      marinadeFinanceProgram: MARINADE_PROGRAM_ID,\n      state: additionalArgs.address,\n      userTransferAuthority,\n      msolMint: additionalArgs.marinadeStateResponse.msolMint,\n      liqPoolSolLegPda: additionalArgs.liqPoolSolLegPda,\n      liqPoolMsolLeg: additionalArgs.marinadeStateResponse.liqPool.msolLeg,\n      liqPoolMsolLegAuthority: additionalArgs.liqPoolMsolLegAuthority,\n      reservePda: additionalArgs.reservePda,\n      transferFrom: tempSolPda,\n      mintTo: userDestinationTokenAccount,\n      msolMintAuthority: additionalArgs.msolMintAuthority,\n      systemProgram: SystemProgram.programId,\n      tokenProgram: TOKEN_PROGRAM_ID,\n      userWsolTokenAccount: userSourceTokenAccount,\n      tempWsolTokenAccount,\n      wsolMint: NATIVE_MINT,\n      rent: SYSVAR_RENT_PUBKEY,\n    },\n    remainingAccounts: prepareRemainingAccounts(inAmount, tokenLedger, platformFee?.feeAccount),\n  });\n}\n\ntype MarinadeFinanceLiquidUnstakeInstructionArgs = {\n  address: PublicKey;\n  marinadeStateResponse: MarinadeStateResponse;\n  liqPoolSolLegPda: PublicKey;\n};\n\nexport function createMarinadeFinanceLiquidUnstakeInstruction({\n  additionalArgs,\n  userSourceTokenAccount,\n  userDestinationTokenAccount,\n  userTransferAuthority,\n  inAmount,\n  minimumOutAmount,\n  tokenLedger,\n  platformFee,\n}: {\n  additionalArgs: MarinadeFinanceLiquidUnstakeInstructionArgs;\n} & CreateSwapInstructionParams): TransactionInstruction {\n  const tempSolPda = findProgramAddressSync(\n    [Buffer.from('temp-sol-pda'), userTransferAuthority.toBuffer()],\n    JUPITER_PROGRAM_ID,\n  )[0];\n\n  return JUPITER_PROGRAM.instruction.marinadeFinanceLiquidUnstake(\n    inAmount,\n    minimumOutAmount,\n    platformFee?.feeBps ?? 0,\n    {\n      accounts: {\n        marinadeFinanceProgram: MARINADE_PROGRAM_ID,\n        state: additionalArgs.address,\n        msolMint: additionalArgs.marinadeStateResponse.msolMint,\n        liqPoolSolLegPda: additionalArgs.liqPoolSolLegPda,\n        liqPoolMsolLeg: additionalArgs.marinadeStateResponse.liqPool.msolLeg,\n        treasuryMsolAccount: additionalArgs.marinadeStateResponse.treasuryMsolAccount,\n        getMsolFrom: userSourceTokenAccount,\n        getMsolFromAuthority: userTransferAuthority,\n        transferSolTo: tempSolPda,\n        systemProgram: SystemProgram.programId,\n        tokenProgram: TOKEN_PROGRAM_ID,\n        userWsolTokenAccount: userDestinationTokenAccount,\n      },\n      remainingAccounts: prepareRemainingAccounts(inAmount, tokenLedger, platformFee?.feeAccount),\n    },\n  );\n}\n\nexport function createWhirlpoolSwapExactOutputInstruction({\n  additionalArgs,\n  userSourceTokenAccount,\n  userDestinationTokenAccount,\n  userTransferAuthority,\n  outAmount,\n  maximumInAmount,\n  tokenLedger,\n  platformFee,\n}: { additionalArgs: WhirlpoolSwapInstructionArgs } & CreateSwapExactOutputInstructionParams): TransactionInstruction {\n  const [tokenOwnerAccountA, tokenOwnerAccountB] = additionalArgs.aToB\n    ? [userSourceTokenAccount, userDestinationTokenAccount]\n    : [userDestinationTokenAccount, userSourceTokenAccount];\n\n  return JUPITER_PROGRAM.instruction.whirlpoolSwapExactOutput(\n    outAmount,\n    maximumInAmount,\n    additionalArgs.aToB,\n    platformFee?.feeBps ?? 0,\n    {\n      accounts: {\n        swapProgram: WHIRLPOOL_PROGRAM_ID,\n        tokenProgram: TOKEN_PROGRAM_ID,\n        tokenAuthority: userTransferAuthority,\n        whirlpool: additionalArgs.whirlpool,\n        tokenOwnerAccountA,\n        tokenVaultA: additionalArgs.tokenVaultA,\n        tokenOwnerAccountB,\n        tokenVaultB: additionalArgs.tokenVaultB,\n        tickArray0: additionalArgs.tickArray0,\n        tickArray1: additionalArgs.tickArray1,\n        tickArray2: additionalArgs.tickArray2,\n        oracle: additionalArgs.oracle,\n      },\n      remainingAccounts: prepareRemainingAccounts(new BN(0), tokenLedger, platformFee?.feeAccount),\n    },\n  );\n}\n\nfunction prepareRemainingAccounts(\n  inAmount: BN | null,\n  tokenLedger: PublicKey,\n  feeAccount: PublicKey | undefined,\n): AccountMeta[] {\n  const remainingAccounts = [];\n\n  if (inAmount === null) {\n    remainingAccounts.push({\n      pubkey: tokenLedger,\n      isSigner: false,\n      isWritable: true,\n    });\n  }\n  if (feeAccount) {\n    remainingAccounts.push({\n      pubkey: feeAccount,\n      isSigner: false,\n      isWritable: true,\n    });\n  }\n\n  return remainingAccounts;\n}\n","import { PublicKey, TransactionInstruction } from '@solana/web3.js';\nimport JSBI from 'jsbi';\nimport { AccountInfoMap, Amm, QuoteParams, SwapParams } from '../amm';\n// Modified from saber's registry to contain the underlying mint decimal to avoid pointless queries\nimport addDecimalsJson from './add-decimals-complete-state.mainnet-beta.json';\nimport {\n  createSaberAddDecimalsDepositInstruction,\n  createSaberAddDecimalsWithdrawInstruction,\n} from '../jupiterInstruction';\nimport { ZERO } from '@jup-ag/math';\n\nexport interface AddDecimals {\n  wrapper: PublicKey;\n  underlying: PublicKey;\n  underlyingDecimals: number;\n  wrapperUnderlyingTokens: PublicKey;\n  mint: PublicKey;\n  decimals: number;\n}\n\nexport function getSaberWrappedDecimalsAmms() {\n  return addDecimalsJson.map((addDecimalJson) => {\n    const addDecimals = {\n      wrapper: new PublicKey(addDecimalJson.wrapper),\n      underlying: new PublicKey(addDecimalJson.underlying),\n      underlyingDecimals: addDecimalJson.underlyingDecimals,\n      wrapperUnderlyingTokens: new PublicKey(addDecimalJson.wrapperUnderlyingTokens),\n      mint: new PublicKey(addDecimalJson.mint),\n      decimals: addDecimalJson.decimals,\n    };\n\n    return new SaberAddDecimalsAmm(new WrappedToken(addDecimals));\n  });\n}\n\nexport class WrappedToken {\n  multiplier: JSBI;\n\n  constructor(public addDecimals: AddDecimals) {\n    this.multiplier = JSBI.BigInt(10 ** (this.addDecimals.decimals - this.addDecimals.underlyingDecimals));\n  }\n\n  getOutputAmount(inputAmount: JSBI, inputMint: PublicKey): JSBI {\n    if (this.addDecimals.mint.equals(inputMint)) {\n      // withdraw, so divide\n      return this.calculateWithdrawOutputAmount(inputAmount);\n    } else if (this.addDecimals.underlying.equals(inputMint)) {\n      // deposit, so multiply\n      return this.calculateDepositOutputAmount(inputAmount);\n    }\n    throw new Error(`unknown input token: ${inputMint.toString()}`);\n  }\n\n  private calculateDepositOutputAmount(inputAmount: JSBI) {\n    return JSBI.multiply(inputAmount, this.multiplier);\n  }\n\n  private calculateWithdrawOutputAmount(inputAmount: JSBI) {\n    return JSBI.divide(inputAmount, this.multiplier);\n  }\n}\n\n// This isn't technically an Amm but this the smoothest solution to allow its usage without a major refactor of the abstractions for now\nexport class SaberAddDecimalsAmm implements Amm {\n  id: string;\n  label = 'Saber (Decimals)' as const;\n  shouldPrefetch = false;\n  exactOutputSupported = false;\n\n  constructor(public wrappedToken: WrappedToken) {\n    this.id = this.wrappedToken.addDecimals.wrapper.toBase58();\n  }\n\n  getAccountsForUpdate() {\n    return new Array<PublicKey>();\n  }\n\n  update(_accountInfoMap: AccountInfoMap) {}\n\n  getQuote({ sourceMint, amount }: QuoteParams) {\n    const outAmount = this.wrappedToken.getOutputAmount(amount, sourceMint);\n    return {\n      notEnoughLiquidity: false,\n      inAmount: amount,\n      outAmount,\n      feeAmount: ZERO,\n      feeMint: sourceMint.toBase58(),\n      feePct: 0,\n      priceImpactPct: 0,\n    };\n  }\n\n  createSwapInstructions(swapParams: SwapParams) {\n    if (this.wrappedToken.addDecimals.underlying.equals(swapParams.sourceMint)) {\n      return [\n        createSaberAddDecimalsDepositInstruction({\n          addDecimals: this.wrappedToken.addDecimals,\n          ...swapParams,\n          inAmount: swapParams.amount,\n          minimumOutAmount: swapParams.otherAmountThreshold,\n        }),\n      ];\n    } else {\n      return [\n        createSaberAddDecimalsWithdrawInstruction({\n          addDecimals: this.wrappedToken.addDecimals,\n          ...swapParams,\n          inAmount: swapParams.amount,\n          minimumOutAmount: swapParams.otherAmountThreshold,\n        }),\n      ];\n    }\n  }\n\n  get reserveTokenMints() {\n    return [this.wrappedToken.addDecimals.underlying, this.wrappedToken.addDecimals.mint];\n  }\n}\n","export function getTwoPermutations<T>(array: T[]) {\n  return array.reduce((acc, item) => {\n    array.forEach((otherItem) => {\n      if (item !== otherItem) {\n        acc.push([item, otherItem]);\n      }\n    });\n    return acc;\n  }, new Array<T[]>());\n}\n","export function chunks<T>(array: T[], size: number): T[][] {\n  return Array.apply<number, T[], T[][]>(0, new Array(Math.ceil(array.length / size))).map((_, index) =>\n    array.slice(index * size, (index + 1) * size),\n  );\n}\n","import { AccountInfo, Connection, PublicKey } from '@solana/web3.js';\nimport { chunks } from './chunks';\n\ninterface Result {\n  jsonrpc: string;\n  result: {\n    context: { slot: number };\n    value: (AccountInfo<string[]> | null)[];\n  };\n}\n\nexport async function chunkedGetMultipleAccountInfos(\n  connection: Connection,\n  pks: string[],\n  batchChunkSize: number = 1000,\n  maxAccountsChunkSize: number = 100,\n): Promise<Array<AccountInfo<Buffer> | null>> {\n  return (\n    await Promise.all(\n      chunks(pks, batchChunkSize).map(async (batchPubkeys) => {\n        const batch = chunks(batchPubkeys, maxAccountsChunkSize).map((pubkeys) => ({\n          methodName: 'getMultipleAccounts',\n          args: connection._buildArgs([pubkeys], connection.commitment, 'base64'),\n        }));\n\n        return (\n          // getMultipleAccounts is quite slow, so we use fetch directly\n          connection\n            // @ts-ignore\n            ._rpcBatchRequest(batch)\n            .then((batchResults: Result[]) => {\n              const accounts = batchResults.reduce((acc, res) => {\n                res.result.value.forEach((item) => {\n                  if (item) {\n                    const value = item as unknown as AccountInfo<Buffer>;\n                    value.data = Buffer.from(item.data[0], item.data[1] as 'base64');\n                    value.owner = new PublicKey(item.owner);\n                    acc.push(value);\n                  } else {\n                    acc.push(null);\n                  }\n                });\n                return acc;\n              }, [] as (AccountInfo<Buffer> | null)[]);\n\n              return accounts;\n            })\n            .catch((e: any) => {\n              console.error('Failed to fetch account infos', e);\n              return batchPubkeys.map(() => null);\n            })\n        );\n      }),\n    )\n  ).flat();\n}\n","import { AccountInfo, Connection, PublicKey, TransactionInstruction } from '@solana/web3.js';\nimport { PlatformFee, QuoteMintToReferrer, TokenMintAddress } from '..';\nimport { AccountInfo as TokenAccountInfo } from '@solana/spl-token';\nimport JSBI from 'jsbi';\nimport { chunkedGetMultipleAccountInfos } from '../utils/chunkedGetMultipleAccountInfos';\nimport type BN from 'bn.js';\n\nexport enum SwapMode {\n  ExactIn = 'ExactIn',\n  ExactOut = 'ExactOut',\n}\n\nexport interface QuoteParams {\n  sourceMint: PublicKey;\n  destinationMint: PublicKey;\n  amount: JSBI;\n  swapMode: SwapMode;\n}\n\nexport interface Quote {\n  notEnoughLiquidity: boolean;\n  minInAmount?: JSBI;\n  minOutAmount?: JSBI;\n  inAmount: JSBI;\n  outAmount: JSBI;\n  feeAmount: JSBI;\n  feeMint: TokenMintAddress;\n  feePct: number;\n  priceImpactPct: number;\n}\n\nexport interface SwapParams {\n  sourceMint: PublicKey;\n  destinationMint: PublicKey;\n  userSourceTokenAccount: PublicKey;\n  userDestinationTokenAccount: PublicKey;\n  userTransferAuthority: PublicKey;\n  amount: BN | null;\n  otherAmountThreshold: BN;\n  swapMode: SwapMode;\n  tokenLedger: PublicKey;\n  openOrdersAddress?: PublicKey;\n  platformFee?: PlatformFee;\n  quoteMintToReferrer?: QuoteMintToReferrer;\n}\n\nexport type AccountInfoMap = Map<string, AccountInfo<Buffer> | null>;\n\nexport interface Amm {\n  /* Label for UI usage */\n  label: string;\n  /* Unique id to recognize the AMM */\n  id: string;\n  /* Reserve token mints for the purpose of routing */\n  reserveTokenMints: PublicKey[];\n  /* State if we need to prefetch the accounts 1 time */\n  shouldPrefetch: boolean;\n  /* Exact output swap mode is supported */\n  exactOutputSupported: boolean;\n\n  getAccountsForUpdate(): PublicKey[];\n  update(accountInfoMap: AccountInfoMap): void;\n  getQuote(quoteParams: QuoteParams): Quote;\n  createSwapInstructions(swapParams: SwapParams): TransactionInstruction[];\n}\n\nexport const mapAddressToAccountInfos = (accountInfoMap: AccountInfoMap, addresses: PublicKey[]) => {\n  const accountInfos = addresses.map((address) => {\n    const accountInfo = accountInfoMap.get(address.toString());\n    if (!accountInfo) {\n      throw new Error(`Account info ${address.toBase58()} missing`);\n    }\n    return accountInfo;\n  });\n\n  return accountInfos;\n};\n\nexport const tokenAccountsToJSBIs = (tokenAccounts: TokenAccountInfo[]): JSBI[] => {\n  return tokenAccounts.map((tokenAccount) => {\n    return JSBI.BigInt(tokenAccount.amount);\n  });\n};\n\nexport const prefetchAmms = async (amms: Amm[], connection: Connection) => {\n  const accounts = amms.map((amm) => amm.getAccountsForUpdate().map((item) => item.toBase58())).flat();\n  const accountInfosMap = new Map<string, AccountInfo<Buffer>>();\n  const accountInfos = await chunkedGetMultipleAccountInfos(connection, accounts);\n\n  accountInfos.forEach((item, index) => {\n    const publicKey = accounts[index];\n    if (item) {\n      accountInfosMap.set(publicKey, item);\n    }\n  });\n\n  for (let amm of amms) {\n    amm.update(accountInfosMap);\n  }\n};\n","// Only a few hardcoded pools for now, until we query the whole lot through api\nimport { struct, nu64 } from '@solana/buffer-layout';\nimport { u64 } from '@solana/spl-token';\nimport { PublicKey } from '@solana/web3.js';\nimport { publicKey, uint128, uint64 } from '../../utils/layout';\n\ninterface AmmInfoLayoutV4 {\n  status: number;\n  nonce: number;\n  orderNum: number;\n  depth: number;\n  coinDecimals: number;\n  pcDecimals: number;\n  state: number;\n  resetFlag: number;\n  minSize: number;\n  volMaxCutRatio: number;\n  amountWaveRatio: number;\n  coinLotSize: number;\n  pcLotSize: number;\n  minPriceMultiplier: number;\n  maxPriceMultiplier: number;\n  systemDecimalsValue: number;\n  minSeparateNumerator: number;\n  minSeparateDenominator: number;\n  tradeFeeNumerator: number;\n  tradeFeeDenominator: number;\n  pnlNumerator: number;\n  pnlDenominator: number;\n  swapFeeNumerator: u64;\n  swapFeeDenominator: u64;\n  needTakePnlCoin: number;\n  needTakePnlPc: number;\n  totalPnlPc: number;\n  totalPnlCoin: number;\n  poolTotalDepositPc: u64;\n  poolTotalDepositCoin: u64;\n  swapCoinInAmount: u64;\n  swapPcOutAmount: u64;\n  swapCoin2PcFee: number;\n  swapPcInAmount: u64;\n  swapCoinOutAmount: u64;\n  swapPc2CoinFee: number;\n  poolCoinTokenAccount: PublicKey;\n  poolPcTokenAccount: PublicKey;\n  coinMintAddress: PublicKey;\n  pcMintAddress: PublicKey;\n  lpMintAddress: PublicKey;\n  ammOpenOrders: PublicKey;\n  serumMarket: PublicKey;\n  serumProgramId: PublicKey;\n  ammTargetOrders: PublicKey;\n  poolWithdrawQueue: PublicKey;\n  poolTempLpTokenAccount: PublicKey;\n  ammOwner: PublicKey;\n  pnlOwner: PublicKey;\n}\n\nexport const AMM_INFO_LAYOUT_V4 = struct<AmmInfoLayoutV4>([\n  nu64('status'),\n  nu64('nonce'),\n  nu64('orderNum'),\n  nu64('depth'),\n  nu64('coinDecimals'),\n  nu64('pcDecimals'),\n  nu64('state'),\n  nu64('resetFlag'),\n  nu64('minSize'),\n  nu64('volMaxCutRatio'),\n  nu64('amountWaveRatio'),\n  nu64('coinLotSize'),\n  nu64('pcLotSize'),\n  nu64('minPriceMultiplier'),\n  nu64('maxPriceMultiplier'),\n  nu64('systemDecimalsValue'),\n  // Fees\n  nu64('minSeparateNumerator'),\n  nu64('minSeparateDenominator'),\n  nu64('tradeFeeNumerator'),\n  nu64('tradeFeeDenominator'),\n  nu64('pnlNumerator'),\n  nu64('pnlDenominator'),\n  nu64('swapFeeNumerator'),\n  nu64('swapFeeDenominator'),\n  // OutPutData\n  nu64('needTakePnlCoin'),\n  nu64('needTakePnlPc'),\n  nu64('totalPnlPc'),\n  nu64('totalPnlCoin'),\n  uint128('poolTotalDepositPc'),\n  uint128('poolTotalDepositCoin'),\n  uint128('swapCoinInAmount'),\n  uint128('swapPcOutAmount'),\n  nu64('swapCoin2PcFee'),\n  uint128('swapPcInAmount'),\n  uint128('swapCoinOutAmount'),\n  nu64('swapPc2CoinFee'),\n\n  publicKey('poolCoinTokenAccount'),\n  publicKey('poolPcTokenAccount'),\n  publicKey('coinMintAddress'),\n  publicKey('pcMintAddress'),\n  publicKey('lpMintAddress'),\n  publicKey('ammOpenOrders'),\n  publicKey('serumMarket'),\n  publicKey('serumProgramId'),\n  publicKey('ammTargetOrders'),\n  publicKey('poolWithdrawQueue'),\n  publicKey('poolTempLpTokenAccount'),\n  publicKey('ammOwner'),\n  publicKey('pnlOwner'),\n]);\n","// https://github.com/raydium-io/raydium-ui/blob/4048286f79fc4b71c3ffbfd9095470ab0c7d3862/src/utils/liquidity.ts#L30-L82\n\nimport { Fraction, TokenSwapConstantProduct, ZERO_FRACTION } from '@jup-ag/math';\nimport { createProgramAddressSync } from '@project-serum/anchor/dist/cjs/utils/pubkey';\nimport { Market, OpenOrders } from '@project-serum/serum';\nimport { u64 } from '@solana/spl-token';\nimport { AccountInfo, PublicKey } from '@solana/web3.js';\nimport Decimal from 'decimal.js';\nimport JSBI from 'jsbi';\nimport { AccountInfoMap, Amm, mapAddressToAccountInfos, Quote, QuoteParams, SwapParams } from '../amm';\nimport { createRaydiumSwapInstruction } from '../jupiterInstruction';\nimport { AMM_INFO_LAYOUT_V4 } from './pools';\n\n// Explained here\n// https://discordapp.com/channels/813741812598439958/813750197423308820/900288485028683776\n// total_pc = amminfo.pc_vault.balance + amminfo.openorder.total_quote - amminfo.need_taken_pnl_pc\n// total_coin = amminfo.coin_vault.balance + amminfo.openorder.total_base - amminfo.need_taken_pnl_coin\n\ntype SerumMarketKeys = {\n  serumBids: PublicKey;\n  serumAsks: PublicKey;\n  serumEventQueue: PublicKey;\n  serumCoinVaultAccount: PublicKey;\n  serumPcVaultAccount: PublicKey;\n  serumVaultSigner: PublicKey;\n};\n\ntype SerumMarketKeysString = Record<keyof SerumMarketKeys, string>;\nexport class RaydiumAmm implements Amm {\n  id: string;\n  label = 'Raydium' as const;\n  shouldPrefetch = false;\n  exactOutputSupported = false;\n\n  coinMint: PublicKey;\n  pcMint: PublicKey;\n\n  status: number;\n  serumProgramId: PublicKey;\n  serumMarket: PublicKey;\n  ammOpenOrders: PublicKey;\n  ammTargetOrders: PublicKey;\n  poolCoinTokenAccount: PublicKey;\n  poolPcTokenAccount: PublicKey;\n\n  serumMarketKeys: SerumMarketKeys;\n\n  coinReserve: u64 | undefined;\n  pcReserve: u64 | undefined;\n\n  private feePct: Decimal;\n  private calculator: TokenSwapConstantProduct;\n\n  constructor(public ammId: PublicKey, ammAccountInfo: AccountInfo<Buffer>, params: SerumMarketKeysString) {\n    this.id = ammId.toBase58();\n    const decoded = AMM_INFO_LAYOUT_V4.decode(ammAccountInfo.data);\n\n    this.status = decoded.status;\n    this.coinMint = new PublicKey(decoded.coinMintAddress);\n    this.pcMint = new PublicKey(decoded.pcMintAddress);\n\n    this.poolCoinTokenAccount = new PublicKey(decoded.poolCoinTokenAccount);\n    this.poolPcTokenAccount = new PublicKey(decoded.poolPcTokenAccount);\n\n    this.serumProgramId = new PublicKey(decoded.serumProgramId);\n    this.serumMarket = new PublicKey(decoded.serumMarket);\n    this.ammOpenOrders = new PublicKey(decoded.ammOpenOrders);\n    this.ammTargetOrders = new PublicKey(decoded.ammTargetOrders);\n\n    this.serumMarketKeys = (Object.keys(params) as Array<keyof SerumMarketKeysString>).reduce((acc, item) => {\n      const pk = params[item];\n      if (!pk) throw new Error(`Could not find ${item} in params`);\n      acc[item] = new PublicKey(params[item]);\n      return acc;\n    }, {} as SerumMarketKeys);\n\n    const swapFeeNumerator = decoded.swapFeeNumerator;\n    const swapFeeDenominator = decoded.swapFeeDenominator;\n\n    this.feePct = new Decimal(swapFeeNumerator.toString()).div(swapFeeDenominator.toString());\n\n    this.calculator = new TokenSwapConstantProduct(\n      new Fraction(JSBI.BigInt(swapFeeNumerator), JSBI.BigInt(swapFeeDenominator)),\n      ZERO_FRACTION,\n    );\n  }\n\n  static decodeSerumMarketKeysString(\n    serumProgramId: PublicKey,\n    serumMarket: PublicKey,\n    serumMarketInfo: AccountInfo<Buffer>,\n  ): SerumMarketKeysString {\n    const decodedMarket = Market.getLayout(serumProgramId).decode(serumMarketInfo.data);\n    const serumVaultSigner = createProgramAddressSync(\n      [serumMarket.toBuffer(), decodedMarket.vaultSignerNonce.toArrayLike(Buffer, 'le', 8)],\n      serumProgramId,\n    );\n\n    return {\n      serumBids: decodedMarket.bids.toBase58(),\n      serumAsks: decodedMarket.asks.toBase58(),\n      serumEventQueue: decodedMarket.eventQueue.toBase58(),\n      serumCoinVaultAccount: decodedMarket.baseVault.toBase58(),\n      serumPcVaultAccount: decodedMarket.quoteVault.toBase58(),\n      serumVaultSigner: serumVaultSigner.toBase58(),\n    };\n  }\n\n  getAccountsForUpdate(): PublicKey[] {\n    return [this.ammId, this.poolCoinTokenAccount, this.poolPcTokenAccount, this.ammOpenOrders];\n  }\n\n  update(accountInfoMap: AccountInfoMap) {\n    const [ammAccountInfo, poolCoinTokenAccountInfo, poolPcTokenAccountInfo, ammOpenOrdersAccountInfo] =\n      mapAddressToAccountInfos(accountInfoMap, this.getAccountsForUpdate());\n\n    const [coinAmount, pcAmount] = [\n      RaydiumAmm.tokenAmountAccessor(poolCoinTokenAccountInfo),\n      RaydiumAmm.tokenAmountAccessor(poolPcTokenAccountInfo),\n    ];\n\n    const openOrders = OpenOrders.fromAccountInfo(\n      this.ammOpenOrders,\n      ammOpenOrdersAccountInfo,\n      ammOpenOrdersAccountInfo.owner,\n    );\n\n    const decoded = AMM_INFO_LAYOUT_V4.decode(ammAccountInfo.data);\n\n    this.coinReserve = coinAmount.add(openOrders.baseTokenTotal).sub(new u64(String(decoded.needTakePnlCoin)));\n\n    this.pcReserve = pcAmount.add(openOrders.quoteTokenTotal).sub(new u64(String(decoded.needTakePnlPc)));\n  }\n\n  private static tokenAmountAccessor(tokenAccountInfo: AccountInfo<Buffer>): u64 {\n    return u64.fromBuffer(tokenAccountInfo.data.slice(64, 64 + 8));\n  }\n\n  getQuote({ sourceMint, amount }: QuoteParams): Quote {\n    const { coinReserve, pcReserve } = this;\n    if (!coinReserve || !pcReserve) {\n      throw new Error('Pool token accounts balances not refreshed or empty');\n    }\n\n    const outputIndex = this.coinMint.equals(sourceMint) ? 1 : 0;\n    const result = this.calculator.exchange([JSBI.BigInt(coinReserve), JSBI.BigInt(pcReserve)], amount, outputIndex);\n\n    return {\n      notEnoughLiquidity: false,\n      inAmount: amount,\n      outAmount: result.expectedOutputAmount,\n      feeAmount: result.fees,\n      feeMint: sourceMint.toBase58(),\n      feePct: this.feePct.toNumber(),\n      priceImpactPct: result.priceImpact.toNumber(),\n    };\n  }\n\n  createSwapInstructions(swapParams: SwapParams) {\n    return [\n      createRaydiumSwapInstruction({\n        raydiumAmm: this,\n        ...swapParams,\n        inAmount: swapParams.amount,\n        minimumOutAmount: swapParams.otherAmountThreshold,\n      }),\n    ];\n  }\n\n  get reserveTokenMints() {\n    return [this.coinMint, this.pcMint];\n  }\n}\n","import { ZERO } from '@jup-ag/math';\nimport { Market, Orderbook } from '@project-serum/serum';\nimport { PublicKey } from '@solana/web3.js';\nimport BN from 'bn.js';\nimport Decimal from 'decimal.js';\nimport JSBI from 'jsbi';\n\nconst TAKER_FEE_PCT = 0.0004;\nconst STABLE_TAKER_FEE_PCT = 0.0001;\n\n// Stable markets are hardcoded in the program\nconst STABLE_MARKET_ADDRESSES = [\n  '77quYg4MGneUdjgXCunt9GgM1usmrxKY31twEy3WHwcS', // USDT/USDC\n  '5cLrMai1DsLRYc1Nio9qMTicsWtvzjzZfJPXyAoF4t1Z', // mSOL/SOL\n  'EERNEEnBqdGzBS8dd46wwNY5F2kwnaCQ3vsq2fNKGogZ', // UST/USDC\n  '8sFf9TW3KzxLiBXcDcjAxqabEsRroo4EiRr3UG1xbJ9m', // UST/USDT\n  '2iDSTGhjJEiRxNaLF27CY6daMYPs5hgYrP2REHd5YD62', // stSOL/SOL\n];\n\ninterface IMarketMeta {\n  /** buy or sell side */\n  side: 'buy' | 'sell';\n  /** indicate that your order is too huge for the market */\n  notEnoughLiquidity: boolean;\n  /** minimum in amount and the corresponding out amount */\n  minimum: {\n    in: JSBI;\n    out: JSBI;\n  };\n  /** amount in taken for the trade */\n  inAmount: JSBI;\n  /** the amount out for the trade */\n  outAmount: JSBI;\n  /** the total fee amount */\n  feeAmount: JSBI;\n  /** price impact percentage */\n  priceImpactPct: number;\n  /** fee percentage */\n  feePct: number;\n}\n\n// Provides swap like out amount, with slippage and corresponding minimum amount out\nexport function getOutAmountMeta({\n  market,\n  asks,\n  bids,\n  fromAmount,\n  fromMint,\n  toMint,\n}: {\n  market: Market;\n  asks: Orderbook;\n  bids: Orderbook;\n  fromMint: PublicKey;\n  toMint: PublicKey;\n  fromAmount: JSBI;\n}) {\n  const takerFeePct = STABLE_MARKET_ADDRESSES.includes(market.address.toBase58())\n    ? STABLE_TAKER_FEE_PCT\n    : TAKER_FEE_PCT;\n\n  if (fromMint.equals(market.quoteMintAddress) && toMint.equals(market.baseMintAddress)) {\n    // buy\n    return forecastBuy(market, asks, fromAmount, takerFeePct);\n  } else {\n    return forecastSell(market, bids, fromAmount, takerFeePct);\n  }\n}\n\nexport function forecastBuy(market: Market, orderbook: Orderbook, pcIn: JSBI, takerFeePct: number): IMarketMeta {\n  let coinOut = ZERO;\n  let bestPrice: JSBI = ZERO;\n  let worstPrice: JSBI = ZERO;\n  // total base price\n  let totalCost = ZERO;\n  let totalCoins = ZERO;\n\n  // might be decimal, e.g: 0.001\n  const quoteSizeLots = market.quoteSizeLotsToNumber(new BN(1));\n\n  // Serum buy order take fee in quote tokens\n  let availablePc = quoteSizeLots\n    ? JSBI.BigInt(\n        new Decimal(pcIn.toString())\n          .div(1 + takerFeePct)\n          .div(quoteSizeLots)\n          .floor(),\n      )\n    : ZERO;\n  const baseSizeLots = JSBI.BigInt(market.baseSizeLotsToNumber(new BN(1)).toString());\n\n  for (let [lotPrice, lotQuantity] of getL2(orderbook)) {\n    if (JSBI.equal(bestPrice, ZERO)) {\n      bestPrice = lotPrice;\n    }\n\n    worstPrice = lotPrice;\n\n    const orderCoinAmount = JSBI.multiply(lotQuantity, baseSizeLots);\n    const orderPcAmount = JSBI.multiply(lotQuantity, lotPrice);\n\n    totalCoins = JSBI.add(totalCoins, orderCoinAmount);\n\n    if (JSBI.greaterThanOrEqual(orderPcAmount, availablePc)) {\n      const numberLotsPurchasable = JSBI.divide(availablePc, lotPrice);\n\n      totalCost = JSBI.add(totalCost, JSBI.multiply(lotPrice, numberLotsPurchasable));\n      coinOut = JSBI.add(coinOut, JSBI.multiply(baseSizeLots, numberLotsPurchasable));\n      availablePc = ZERO;\n      break;\n    } else {\n      totalCost = JSBI.add(totalCost, JSBI.multiply(lotPrice, lotQuantity));\n      coinOut = JSBI.add(coinOut, orderCoinAmount);\n      availablePc = JSBI.subtract(availablePc, orderPcAmount);\n    }\n  }\n\n  const bestPriceDecimal = new Decimal(bestPrice.toString());\n  const worstPriceDecimal = new Decimal(worstPrice.toString());\n\n  const priceImpactPct = worstPriceDecimal.sub(bestPriceDecimal).div(bestPriceDecimal).toNumber();\n\n  const bestPriceSizeLots = priceLotsToDecimal(market, new BN(bestPrice.toString()));\n  const totalCostSizeLots = priceLotsToDecimal(market, new BN(totalCost.toString()));\n  const inAmountWithoutFee = totalCostSizeLots.mul(baseSizeLots.toString()).ceil();\n  const fee = totalCostSizeLots.mul(baseSizeLots.toString()).mul(takerFeePct).ceil();\n\n  return {\n    side: 'buy',\n    notEnoughLiquidity: JSBI.lessThanOrEqual(totalCoins, coinOut),\n    minimum: {\n      in: JSBI.BigInt(\n        bestPriceSizeLots\n          .mul(baseSizeLots.toString())\n          .mul(1 + takerFeePct)\n          .ceil(),\n      ),\n      out: baseSizeLots,\n    },\n    inAmount: JSBI.BigInt(inAmountWithoutFee.add(fee)),\n    outAmount: coinOut,\n    feeAmount: JSBI.BigInt(fee),\n    priceImpactPct,\n    feePct: takerFeePct,\n  };\n}\n\nexport function forecastSell(market: Market, orderbook: Orderbook, coinIn: JSBI, takerFeePct: number): IMarketMeta {\n  let pcOut = JSBI.BigInt(0);\n  let bestPrice = JSBI.BigInt(0);\n  let worstPrice = JSBI.BigInt(0);\n  let totalCoin = JSBI.BigInt(0);\n  let availableCoin = coinIn;\n  let inAmount = JSBI.BigInt(0);\n\n  const baseSizeLots = JSBI.BigInt(market.baseSizeLotsToNumber(new BN(1)));\n  const quoteSizeLots = JSBI.BigInt(market.quoteSizeLotsToNumber(new BN(1)));\n\n  for (const [lotPrice, lotQuantity] of getL2(orderbook)) {\n    if (JSBI.equal(bestPrice, ZERO)) {\n      bestPrice = lotPrice;\n    }\n\n    worstPrice = lotPrice;\n\n    const orderCoinAmount = JSBI.multiply(baseSizeLots, lotQuantity);\n    const orderPcAmount = JSBI.multiply(lotQuantity, JSBI.multiply(lotPrice, quoteSizeLots));\n    totalCoin = JSBI.add(totalCoin, orderCoinAmount);\n\n    if (JSBI.greaterThanOrEqual(orderCoinAmount, availableCoin)) {\n      const numberLotsCanSell = JSBI.divide(availableCoin, baseSizeLots);\n      const totalCoinAmountToSell = JSBI.multiply(numberLotsCanSell, lotPrice);\n      pcOut = JSBI.add(pcOut, JSBI.multiply(totalCoinAmountToSell, quoteSizeLots));\n      availableCoin = JSBI.subtract(availableCoin, totalCoinAmountToSell);\n      inAmount = JSBI.add(inAmount, JSBI.multiply(numberLotsCanSell, baseSizeLots));\n      break;\n    } else {\n      pcOut = JSBI.add(pcOut, orderPcAmount);\n      availableCoin = JSBI.subtract(availableCoin, orderCoinAmount);\n      inAmount = JSBI.add(inAmount, orderCoinAmount);\n    }\n  }\n\n  let pcOutAfterFee = new Decimal(pcOut.toString()).mul(1 - takerFeePct).floor();\n\n  const bestPriceDecimal = priceLotsToDecimal(market, new BN(bestPrice.toString()));\n  const worstPriceDecimal = priceLotsToDecimal(market, new BN(worstPrice.toString()));\n\n  const priceImpactPct = bestPriceDecimal.minus(worstPriceDecimal).div(bestPriceDecimal).toNumber();\n\n  return {\n    side: 'sell',\n    notEnoughLiquidity: JSBI.greaterThan(JSBI.BigInt(coinIn), totalCoin),\n    minimum: {\n      in: baseSizeLots,\n      out: JSBI.BigInt(\n        bestPriceDecimal\n          .mul(JSBI.toNumber(baseSizeLots))\n          .mul(1 - takerFeePct)\n          .floor()\n          .toString(),\n      ),\n    },\n    inAmount: inAmount,\n    outAmount: JSBI.BigInt(pcOutAfterFee),\n    feeAmount: JSBI.BigInt(new Decimal(pcOut.toString()).mul(takerFeePct).round()),\n    priceImpactPct,\n    feePct: takerFeePct,\n  };\n}\n\nexport function* getL2(orderbook: Orderbook): Generator<[JSBI, JSBI]> {\n  const descending = orderbook.isBids;\n  for (const { key, quantity } of orderbook.slab.items(descending)) {\n    const price = JSBI.BigInt(key.ushrn(64).toString());\n    yield [price, JSBI.BigInt(quantity.toString())];\n  }\n}\n\nfunction divideBnToDecimal(numerator: BN, denominator: BN): Decimal {\n  const quotient = new Decimal(numerator.div(denominator).toString());\n  const rem = numerator.umod(denominator);\n  const gcd = rem.gcd(denominator);\n  return quotient.add(new Decimal(rem.div(gcd).toString()).div(new Decimal(denominator.div(gcd).toString())));\n}\n\nfunction priceLotsToDecimal(market: Market, price: BN) {\n  // @ts-expect-error _decoded\n  const baseLotSize = market._decoded.baseLotSize;\n  if (baseLotSize.isZero()) return new Decimal(0);\n\n  return divideBnToDecimal(\n    // @ts-expect-error _decoded _baseSplTokenMultiplier is private\n    price.mul(market._decoded.quoteLotSize).mul(market._baseSplTokenMultiplier),\n    // @ts-expect-error _quoteSplTokenMultiplier is private\n    baseLotSize.mul(market._quoteSplTokenMultiplier),\n  );\n}\n","import { Orderbook } from '@project-serum/serum';\nimport { PublicKey } from '@solana/web3.js';\nimport { AccountInfoMap, Amm, mapAddressToAccountInfos, Quote, QuoteParams, SwapParams } from '../amm';\nimport { createSerumSwapInstruction } from '../jupiterInstruction';\nimport { SerumMarket } from '../market';\nimport { getL2, getOutAmountMeta } from './market';\n\nexport class SerumAmm implements Amm {\n  id: string;\n  label = 'Serum' as const;\n  shouldPrefetch = false;\n  exactOutputSupported = false;\n\n  private _orderbooks: { asks: Orderbook; bids: Orderbook } | undefined;\n\n  constructor(public market: SerumMarket) {\n    this.id = market.address.toBase58();\n  }\n\n  get orderbooks() {\n    return this._orderbooks;\n  }\n\n  static getL2 = getL2;\n\n  getAccountsForUpdate(): PublicKey[] {\n    return [this.market.asksAddress, this.market.bidsAddress];\n  }\n\n  update(accountInfoMap: AccountInfoMap): void {\n    const [asksAccountInfo, bidsAccountInfo] = mapAddressToAccountInfos(accountInfoMap, this.getAccountsForUpdate());\n\n    const asks = Orderbook.decode(this.market, asksAccountInfo.data);\n    const bids = Orderbook.decode(this.market, bidsAccountInfo.data);\n\n    this._orderbooks = {\n      asks,\n      bids,\n    };\n  }\n\n  getQuote({ sourceMint, destinationMint, amount }: QuoteParams): Quote {\n    if (!this.orderbooks) {\n      throw new Error('Failed to find orderbooks');\n    }\n\n    const outAmountMeta = getOutAmountMeta({\n      market: this.market,\n      asks: this.orderbooks.asks,\n      bids: this.orderbooks.bids,\n      fromMint: sourceMint,\n      toMint: destinationMint,\n      fromAmount: amount,\n    });\n\n    return {\n      notEnoughLiquidity: outAmountMeta.notEnoughLiquidity,\n      minInAmount: outAmountMeta.minimum.in,\n      minOutAmount: outAmountMeta.minimum.out,\n      inAmount: outAmountMeta.inAmount,\n      outAmount: outAmountMeta.outAmount,\n      feeAmount: outAmountMeta.feeAmount,\n      feeMint: this.market.quoteMintAddress.toBase58(),\n      feePct: outAmountMeta.feePct,\n      priceImpactPct: outAmountMeta.priceImpactPct,\n    };\n  }\n\n  createSwapInstructions(swapParams: SwapParams) {\n    if (!swapParams.openOrdersAddress) {\n      throw new Error('Missing open orders');\n    }\n\n    return [\n      createSerumSwapInstruction({\n        market: this.market,\n        openOrdersAddress: swapParams.openOrdersAddress,\n        referrer: swapParams?.quoteMintToReferrer?.get(this.market.quoteMintAddress.toBase58()),\n        ...swapParams,\n        inAmount: swapParams.amount,\n        minimumOutAmount: swapParams.otherAmountThreshold,\n      }),\n    ];\n  }\n\n  get reserveTokenMints() {\n    return [this.market.baseMintAddress, this.market.quoteMintAddress];\n  }\n}\n","import { PublicKey } from '@solana/web3.js';\nimport { getTwoPermutations } from '../../utils/getTwoPermutations';\nimport { AccountInfoMap, Amm, Quote, QuoteParams, SwapParams } from '../amm';\nimport { RaydiumAmm } from '../raydium/raydiumAmm';\nimport { createRiskCheckAndFeeInstruction } from '../jupiterInstruction';\nimport { SerumAmm } from '../serum/serumAmm';\nimport { SerumMarket } from '../market';\nimport JSBI from 'jsbi';\nimport { ZERO } from '@jup-ag/math';\nimport { BN } from 'bn.js';\n\ninterface SplitSolution {\n  outAmount: JSBI;\n  portion: number;\n  firstQuote: Quote | undefined;\n  secondQuote: Quote | undefined;\n}\n\nfunction isSplitSupported(firstAmm: Amm, secondAmm: Amm) {\n  if (\n    (firstAmm instanceof SerumAmm && secondAmm instanceof RaydiumAmm) ||\n    (firstAmm instanceof RaydiumAmm && secondAmm instanceof SerumAmm) ||\n    (firstAmm instanceof SerumAmm && secondAmm instanceof SerumAmm)\n  ) {\n    return false;\n  }\n  return true;\n}\n\nconst HUNDRED = JSBI.BigInt(100);\n\n// Create an iteration to quote with a stepped split\nexport class SplitTradeAmm implements Amm {\n  market: SerumMarket | null;\n  shouldPrefetch = false;\n  exactOutputSupported = false;\n  private portion1: number = 0;\n  private portion2: number = 0;\n\n  constructor(public firstAmm: Amm, public secondAmm: Amm, public reserveTokenMints: PublicKey[]) {\n    this.market =\n      firstAmm instanceof SerumAmm ? firstAmm.market : secondAmm instanceof SerumAmm ? secondAmm.market : null;\n  }\n\n  static getAmmIdsFromSplitTradeAmmId(id: string): string[] {\n    const ammIds = id.split('-');\n\n    return ammIds.length > 1 ? ammIds : [];\n  }\n\n  static create(firstAmm: Amm, secondAmm: Amm) {\n    if (!isSplitSupported(firstAmm, secondAmm)) return;\n\n    const firstAmmTwoPermutations = getTwoPermutations(firstAmm.reserveTokenMints);\n    const secondAmmTwoPermutations = getTwoPermutations(secondAmm.reserveTokenMints);\n\n    for (const firstAmmTwoPermutation of firstAmmTwoPermutations) {\n      for (const secondAmmTwoPermutation of secondAmmTwoPermutations) {\n        if (firstAmmTwoPermutation.every((value, index) => value.equals(secondAmmTwoPermutation[index]))) {\n          return new SplitTradeAmm(firstAmm, secondAmm, firstAmmTwoPermutation);\n        }\n      }\n    }\n  }\n\n  setPortions(portion1: number, portion2: number) {\n    if (portion1 + portion2 !== 100) {\n      throw new Error('Split trade portions must sum to 100');\n    }\n\n    this.portion1 = portion1;\n    this.portion2 = portion2;\n  }\n\n  get id() {\n    return `${this.firstAmm.id}-${this.secondAmm.id}`;\n  }\n\n  get label() {\n    const labelWithPortions = [\n      { label: this.firstAmm.label, portion: this.portion1 },\n      { label: this.secondAmm.label, portion: this.portion2 },\n    ].sort((a, b) => b.portion - a.portion);\n\n    return labelWithPortions.map(({ label, portion }) => `${label} (${portion}%)`).join(' + ');\n  }\n\n  getAccountsForUpdate() {\n    return [];\n  }\n\n  update(_accountInfoMap: AccountInfoMap) {\n    // Underlying amms are updated\n  }\n\n  getQuote(quoteParams: QuoteParams): Quote {\n    const sourceMintString = quoteParams.sourceMint.toBase58();\n    const amount = quoteParams.amount;\n    // Portion in % directly to please the UI\n    let bestSolution: SplitSolution = {\n      outAmount: ZERO,\n      portion: 0,\n      firstQuote: undefined,\n      secondQuote: undefined,\n    };\n\n    // Increase portion until 100\n    for (let p = 100; (p -= 5); p > 0) {\n      const firstAmount = JSBI.divide(JSBI.multiply(amount, JSBI.BigInt(p)), HUNDRED);\n      const secondAmount = JSBI.subtract(amount, firstAmount);\n\n      const firstQuote = this.firstAmm.getQuote({\n        ...quoteParams,\n        amount: firstAmount,\n      });\n      const secondQuote = this.secondAmm.getQuote({\n        ...quoteParams,\n        amount: secondAmount,\n      });\n      const outAmount = JSBI.add(firstQuote.outAmount, secondQuote.outAmount);\n\n      if (JSBI.lessThan(outAmount, bestSolution.outAmount)) {\n        break;\n      }\n\n      bestSolution = {\n        outAmount,\n        portion: p,\n        firstQuote,\n        secondQuote,\n      };\n    }\n\n    if (!bestSolution.firstQuote || !bestSolution.secondQuote) {\n      throw new Error('Unreachable: There was no better solution than getting 0 outAmount');\n    }\n\n    const { outAmount, portion, firstQuote, secondQuote } = bestSolution;\n    const portion1 = portion;\n    const portion2 = 100 - portion1;\n\n    // For UI display\n    this.portion1 = portion1;\n    this.portion2 = portion2;\n\n    let firstAmmFee = {\n      amount: firstQuote.feeAmount,\n      mint: firstQuote.feeMint,\n    };\n    let secondAmmFee = {\n      amount: secondQuote.feeAmount,\n      mint: secondQuote.feeMint,\n    };\n\n    if (firstAmmFee.mint !== secondAmmFee.mint) {\n      // Then we convert destinationMint fee into a sourceMint, to please the current data structure\n      // This will lead to inexact fees but this doesn't affect the user minimum out amount\n      if (firstAmmFee.mint !== sourceMintString) {\n        firstAmmFee = {\n          amount: JSBI.divide(\n            JSBI.divide(JSBI.multiply(firstAmmFee.amount, JSBI.multiply(amount, JSBI.BigInt(portion1))), HUNDRED),\n            bestSolution.outAmount,\n          ),\n          mint: sourceMintString,\n        };\n      }\n      if (secondAmmFee.mint !== sourceMintString) {\n        secondAmmFee = {\n          amount: JSBI.divide(\n            JSBI.divide(JSBI.multiply(JSBI.multiply(secondAmmFee.amount, amount), JSBI.BigInt(portion2)), HUNDRED),\n            bestSolution.outAmount,\n          ),\n          mint: sourceMintString,\n        };\n      }\n    }\n\n    const feePct = (portion1 * firstQuote.feePct + portion2 * secondQuote.feePct) / 100;\n    const priceImpactPct = (portion1 * firstQuote.priceImpactPct + portion2 * secondQuote.priceImpactPct) / 100;\n\n    return {\n      notEnoughLiquidity: false,\n      inAmount: quoteParams.amount,\n      outAmount: outAmount,\n      feeAmount: JSBI.add(firstAmmFee.amount, secondAmmFee.amount),\n      feeMint: firstAmmFee.mint, // Guaranteed identical mint at this point\n      feePct,\n      priceImpactPct,\n    };\n  }\n\n  createSwapInstructions(swapParams: SwapParams) {\n    const inAmount = swapParams.amount;\n    if (inAmount === null) {\n      throw new Error('Split trade cannot be used with a null inAmount');\n    }\n\n    // We rely on the fact that this.portion1 is set, what if it isn't?\n    const firstAmount = inAmount.mul(new BN(this.portion1)).div(new BN(HUNDRED.toString()));\n    const secondAmount = inAmount.sub(firstAmount);\n\n    return [\n      ...this.firstAmm.createSwapInstructions({\n        ...swapParams,\n        amount: firstAmount,\n        otherAmountThreshold: new BN(0),\n        platformFee: undefined,\n      }),\n      ...this.secondAmm.createSwapInstructions({\n        ...swapParams,\n        amount: secondAmount,\n        otherAmountThreshold: new BN(0),\n        platformFee: undefined,\n      }),\n      createRiskCheckAndFeeInstruction(\n        swapParams.userDestinationTokenAccount,\n        swapParams.userTransferAuthority,\n        new BN(swapParams.otherAmountThreshold.toString()),\n        swapParams.tokenLedger,\n        swapParams.platformFee,\n      ),\n    ];\n  }\n}\n","import { Market as SerumMarket } from '@project-serum/serum';\nimport { PublicKey } from '@solana/web3.js';\nimport { StableSwap } from '@saberhq/stableswap-sdk';\nimport { SaberAddDecimalsAmm } from './saber/saberAddDecimalsAmm';\nimport { SplitTradeAmm } from './split-trade/splitTradeAmm';\nimport { RaydiumAmm } from './raydium/raydiumAmm';\nimport { SerumAmm } from './serum/serumAmm';\nimport { Amm } from './amm';\nimport JSBI from 'jsbi';\n\nexport interface Fee {\n  amount: JSBI;\n  mint: string;\n  pct: number;\n}\n\nexport { SerumMarket, StableSwap };\n\nexport interface MarketInfo {\n  amm: Amm; //name: string, // pair for serum, pool name for mer pool\n  inputMint: PublicKey;\n  outputMint: PublicKey;\n  minInAmount?: JSBI;\n  minOutAmount?: JSBI;\n  inAmount: JSBI;\n  outAmount: JSBI;\n  notEnoughLiquidity: boolean;\n  priceImpactPct: number;\n  lpFee: Fee;\n  platformFee: Fee;\n}\n\n// This is to check if the two markets are supported by the aggregator\nexport const isValidRoute = (ammA: Amm, ammB: Amm) => {\n  // dont match the same amm together\n  if (ammA.id === ammB.id) {\n    return false;\n  }\n  // don't show decimal as input or output\n  else if (ammA instanceof SaberAddDecimalsAmm && ammB instanceof SaberAddDecimalsAmm) {\n    return false;\n  } else if (ammA instanceof SplitTradeAmm || ammB instanceof SplitTradeAmm) {\n    return false;\n  }\n\n  return true;\n};\n\nexport function isSerumAndRaydium(marketInfos: MarketInfo[]) {\n  if (marketInfos.length < 2) return false;\n\n  const [firstAmm, secondAmm] = marketInfos.map((mi) => mi.amm);\n\n  return (\n    (firstAmm instanceof RaydiumAmm && secondAmm instanceof SerumAmm) ||\n    (firstAmm instanceof SerumAmm && secondAmm instanceof RaydiumAmm)\n  );\n}\n","import { calculateAmpFactor, StableSwap } from '@saberhq/stableswap-sdk';\nimport { PublicKey } from '@solana/web3.js';\nimport { Fraction, ONE, Stable, TWO } from '@jup-ag/math';\nimport JSBI from 'jsbi';\nimport Decimal from 'decimal.js';\nimport {\n  AccountInfoMap,\n  Amm,\n  mapAddressToAccountInfos,\n  Quote,\n  QuoteParams,\n  tokenAccountsToJSBIs,\n  SwapParams,\n} from '../amm';\nimport { createSaberSwapInstruction } from '../jupiterInstruction';\nimport { deserializeAccount } from '@mercurial-finance/optimist';\nimport { AccountInfo } from '@solana/spl-token';\n\nexport class SaberAmm implements Amm {\n  id: string;\n  label = 'Saber' as const;\n  shouldPrefetch = false;\n  exactOutputSupported = false;\n\n  private tokenAccounts: AccountInfo[] = [];\n  private calculator: Stable;\n\n  constructor(private stableSwap: StableSwap) {\n    this.id = stableSwap.config.swapAccount.toBase58();\n\n    this.calculator = new Stable(\n      TWO,\n      calculateAmpFactor(this.stableSwap.state),\n      [ONE, ONE],\n      new Fraction(this.stableSwap.state.fees.trade.numerator, this.stableSwap.state.fees.trade.denominator),\n    );\n  }\n\n  getAccountsForUpdate(): PublicKey[] {\n    return [this.stableSwap.state.tokenA.reserve, this.stableSwap.state.tokenB.reserve];\n  }\n\n  update(accountInfoMap: AccountInfoMap) {\n    let tokenAccountInfos = mapAddressToAccountInfos(accountInfoMap, this.getAccountsForUpdate());\n\n    this.tokenAccounts = tokenAccountInfos.map((info) => {\n      const tokenAccount = deserializeAccount(info.data);\n      if (!tokenAccount) {\n        throw new Error('Invalid token account data');\n      }\n      return tokenAccount;\n    });\n  }\n\n  getQuote({ sourceMint, destinationMint, amount }: QuoteParams): Quote {\n    if (this.tokenAccounts.length === 0) {\n      throw new Error('Unable to fetch accounts for specified tokens.');\n    }\n\n    const feePct = new Decimal(this.stableSwap.state.fees.trade.asFraction.toFixed(4));\n\n    const [inputIndex, outputIndex] = this.tokenAccounts[0].mint.equals(sourceMint) ? [0, 1] : [1, 0];\n\n    this.calculator.setAmp(calculateAmpFactor(this.stableSwap.state));\n    const result = this.calculator.exchange(tokenAccountsToJSBIs(this.tokenAccounts), amount, inputIndex, outputIndex);\n\n    return {\n      notEnoughLiquidity: false,\n      inAmount: amount,\n      outAmount: result.expectedOutputAmount,\n      feeAmount: result.fees,\n      feeMint: destinationMint.toBase58(),\n      feePct: feePct.toNumber(),\n      priceImpactPct: result.priceImpact.toNumber(),\n    };\n  }\n\n  createSwapInstructions(swapParams: SwapParams) {\n    return [\n      createSaberSwapInstruction({\n        stableSwap: this.stableSwap,\n        ...swapParams,\n        inAmount: swapParams.amount,\n        minimumOutAmount: swapParams.otherAmountThreshold,\n      }),\n    ];\n  }\n\n  get reserveTokenMints() {\n    return [this.stableSwap.state.tokenA.mint, this.stableSwap.state.tokenB.mint];\n  }\n}\n","import { u64 } from '@solana/spl-token';\nimport Decimal from 'decimal.js';\n\nconst ZERO = new u64(0);\n\nexport class Percentage {\n  readonly numerator: u64;\n  readonly denominator: u64;\n\n  constructor(numerator: u64, denominator: u64) {\n    this.numerator = numerator;\n    this.denominator = denominator;\n  }\n\n  public static fromDecimal(number: Decimal): Percentage {\n    return Percentage.fromFraction(number.toDecimalPlaces(1).mul(10).toNumber(), 1000);\n  }\n\n  public static fromFraction(numerator: u64 | number, denominator: u64 | number): Percentage {\n    const num = typeof numerator === 'number' ? new u64(numerator.toString()) : numerator;\n    const denom = typeof denominator === 'number' ? new u64(denominator.toString()) : denominator;\n    return new Percentage(num, denom);\n  }\n\n  public toString = (): string => {\n    return `${this.numerator.toString()}/${this.denominator.toString()}`;\n  };\n\n  public toDecimal() {\n    if (this.denominator.eq(ZERO)) {\n      return new Decimal(0);\n    }\n    return new Decimal(this.numerator.toString()).div(new Decimal(this.denominator.toString()));\n  }\n\n  public add(p2: Percentage): Percentage {\n    const denomGcd = this.denominator.gcd(p2.denominator);\n    const denomLcm = this.denominator.div(denomGcd).mul(p2.denominator);\n\n    const p1DenomAdjustment = denomLcm.div(this.denominator);\n    const p2DenomAdjustment = denomLcm.div(p2.denominator);\n\n    const p1NumeratorAdjusted = this.numerator.mul(p1DenomAdjustment);\n    const p2NumeratorAdjusted = p2.numerator.mul(p2DenomAdjustment);\n\n    const newNumerator = p1NumeratorAdjusted.add(p2NumeratorAdjusted);\n\n    return new Percentage(new u64(newNumerator.toString()), new u64(denomLcm.toString()));\n  }\n}\n","import { struct, blob, u8, Structure } from '@solana/buffer-layout';\nimport { u64 } from '@solana/spl-token';\nimport { AccountInfo, PublicKey } from '@solana/web3.js';\nimport { ALDRIN_SWAP_V2_PROGRAM_ID } from '../../constants';\nimport { publicKey, rustEnum, uint64 } from '../../utils/layout';\nimport { Percentage } from './percentage';\n\ntype FeeStructure = {\n  traderFee: Percentage;\n  ownerFee: Percentage;\n};\n\ninterface FeeLayout {\n  tradeFeeNumerator: u64;\n  tradeFeeDenominator: u64;\n  ownerTradeFeeNumerator: u64;\n  ownerTradeFeeDenominator: u64;\n  ownerWithdrawFeeNumerator: u64;\n  ownerWithdrawFeeDenominator: u64;\n}\n\n// https://github.com/aldrin-exchange/aldrin-sdk/blob/78527e3adfc02e186956f420b5083fa0950e7263/src/pools/layout.ts\nconst FEES_LAYOUT = struct<FeeLayout>(\n  [\n    uint64('tradeFeeNumerator'),\n    uint64('tradeFeeDenominator'),\n    uint64('ownerTradeFeeNumerator'),\n    uint64('ownerTradeFeeDenominator'),\n    uint64('ownerWithdrawFeeNumerator'),\n    uint64('ownerWithdrawFeeDenominator'),\n  ],\n  'fees',\n);\n\nconst POOL_FIELDS_COMMON = [\n  blob(8, 'padding'),\n  publicKey('lpTokenFreezeVault'),\n  publicKey('poolMint'),\n  publicKey('baseTokenVault'),\n  publicKey('baseTokenMint'),\n  publicKey('quoteTokenVault'),\n  publicKey('quoteTokenMint'),\n  publicKey('poolSigner'),\n  u8('poolSignerNonce'),\n  publicKey('authority'),\n  publicKey('initializerAccount'),\n  publicKey('feeBaseAccount'),\n  publicKey('feeQuoteAccount'),\n  publicKey('feePoolTokenAccount'),\n  FEES_LAYOUT,\n];\n\ninterface PoolLayout {\n  padding: any;\n  lpTokenFreezeVault: PublicKey;\n  poolMint: PublicKey;\n  baseTokenVault: PublicKey;\n  baseTokenMint: PublicKey;\n  quoteTokenVault: PublicKey;\n  quoteTokenMint: PublicKey;\n  poolSigner: PublicKey;\n  poolSignerNonce: number;\n  authority: PublicKey;\n  initializerAccount: PublicKey;\n  feeBaseAccount: PublicKey;\n  feeQuoteAccount: PublicKey;\n  feePoolTokenAccount: PublicKey;\n  fees: FeeLayout;\n}\n\nexport const POOL_LAYOUT = struct<PoolLayout>(POOL_FIELDS_COMMON);\n\ninterface PoolV2Layout extends PoolLayout {\n  curveType: number;\n  curve: PublicKey;\n}\n\nexport const POOL_V2_LAYOUT = struct<PoolV2Layout>([...POOL_FIELDS_COMMON, u8('curveType'), publicKey('curve')]);\n\ninterface StableCurveLayout {\n  padding: any;\n  amp: u64;\n}\n\nexport const STABLE_CURVE_LAYOUT = struct<StableCurveLayout>([blob(8, 'padding'), uint64('amp')]);\n\ninterface SwapInstructionLayout {\n  instruction: any;\n  tokens: u64;\n  minTokens: u64;\n  side: 'bid' | 'ask';\n}\n\nexport const SWAP_INSTRUCTION_LAYOUT = struct<SwapInstructionLayout>([\n  blob(8, 'instruction'),\n  uint64('tokens'),\n  uint64('minTokens'),\n  rustEnum([new Structure([], 'bid'), new Structure([], 'ask')], 'side'),\n]);\n\nexport function accountInfoToAldrinPoolState(address: PublicKey, accountInfo: AccountInfo<Buffer>): AldrinPoolState {\n  const isV2 = accountInfo.owner.equals(ALDRIN_SWAP_V2_PROGRAM_ID) ? true : false;\n\n  const decoded: PoolV2Layout | PoolLayout = (isV2 ? POOL_V2_LAYOUT : POOL_LAYOUT).decode(accountInfo.data) as\n    | PoolV2Layout\n    | PoolLayout;\n\n  const curveObject = 'curveType' in decoded ? { curveType: decoded.curveType, curve: decoded.curve } : {};\n\n  return {\n    isV2,\n    address,\n    poolMint: decoded.poolMint,\n    baseTokenVault: decoded.baseTokenVault,\n    baseTokenMint: decoded.baseTokenMint,\n    quoteTokenVault: decoded.quoteTokenVault,\n    quoteTokenMint: decoded.quoteTokenMint,\n    poolSigner: decoded.poolSigner,\n    feeBaseAccount: decoded.feeBaseAccount,\n    feeQuoteAccount: decoded.feeQuoteAccount,\n    feePoolTokenAccount: decoded.feePoolTokenAccount,\n    fees: {\n      traderFee: Percentage.fromFraction(decoded.fees.tradeFeeNumerator, decoded.fees.tradeFeeDenominator),\n      ownerFee: Percentage.fromFraction(decoded.fees.ownerTradeFeeNumerator, decoded.fees.ownerTradeFeeDenominator),\n    },\n    ...curveObject,\n  };\n}\n\nexport interface AldrinPoolState {\n  isV2: Boolean;\n  address: PublicKey;\n  poolMint: PublicKey;\n  baseTokenVault: PublicKey;\n  baseTokenMint: PublicKey;\n  quoteTokenVault: PublicKey;\n  quoteTokenMint: PublicKey;\n  poolSigner: PublicKey;\n  feeBaseAccount: PublicKey;\n  feeQuoteAccount: PublicKey;\n  feePoolTokenAccount: PublicKey;\n  fees: FeeStructure;\n  curveType?: number;\n  curve?: PublicKey;\n}\n","import { Fraction, TokenSwapConstantProduct, TokenSwapStable } from '@jup-ag/math';\nimport { AccountInfo, PublicKey, TransactionInstruction } from '@solana/web3.js';\nimport JSBI from 'jsbi';\nimport { deserializeAccount } from '@mercurial-finance/optimist';\nimport {\n  AccountInfoMap,\n  Amm,\n  mapAddressToAccountInfos,\n  Quote,\n  QuoteParams,\n  tokenAccountsToJSBIs,\n  SwapParams,\n} from '../amm';\nimport { createAldrinSwapInstruction, createAldrinV2SwapInstruction } from '../jupiterInstruction';\nimport { accountInfoToAldrinPoolState, AldrinPoolState, STABLE_CURVE_LAYOUT } from './poolState';\nimport { AccountInfo as TokenAccountInfo } from '@solana/spl-token';\nimport Decimal from 'decimal.js';\n\ninterface AldrinParams {\n  amp?: number;\n}\n\nexport class AldrinAmm implements Amm {\n  id: string;\n  label = 'Aldrin' as const;\n  shouldPrefetch = false;\n  exactOutputSupported = false;\n\n  poolState: AldrinPoolState;\n  private tokenAccounts: TokenAccountInfo[] = [];\n  calculator: TokenSwapConstantProduct | TokenSwapStable;\n\n  constructor(address: PublicKey, accountInfo: AccountInfo<Buffer>, private params: AldrinParams) {\n    this.poolState = accountInfoToAldrinPoolState(address, accountInfo);\n    this.id = address.toBase58();\n\n    if (this.poolState.curveType === 1) {\n      const { amp } = this.params;\n      if (!amp) {\n        throw new Error('Amp is required for a stable curve');\n      }\n\n      this.calculator = new TokenSwapStable(\n        JSBI.BigInt(amp),\n        new Fraction(\n          JSBI.BigInt(this.poolState.fees.traderFee.numerator.toString()),\n          JSBI.BigInt(this.poolState.fees.traderFee.denominator.toString()),\n        ),\n        new Fraction(\n          JSBI.BigInt(this.poolState.fees.ownerFee.numerator.toString()),\n          JSBI.BigInt(this.poolState.fees.ownerFee.denominator.toString()),\n        ),\n      );\n    } else {\n      this.calculator = new TokenSwapConstantProduct(\n        new Fraction(\n          JSBI.BigInt(this.poolState.fees.traderFee.numerator.toString()),\n          JSBI.BigInt(this.poolState.fees.traderFee.denominator.toString()),\n        ),\n        new Fraction(\n          JSBI.BigInt(this.poolState.fees.ownerFee.numerator.toString()),\n          JSBI.BigInt(this.poolState.fees.ownerFee.denominator.toString()),\n        ),\n      );\n    }\n  }\n\n  static accountInfoToAldrinPoolState = accountInfoToAldrinPoolState;\n\n  static decodeStableCurveAmp(accountInfo: AccountInfo<Buffer>) {\n    const { amp } = STABLE_CURVE_LAYOUT.decode(accountInfo.data);\n\n    return amp.toNumber() * 2; // times two for their AMP, dont ask me why, it is what it is\n  }\n\n  getAccountsForUpdate(): PublicKey[] {\n    return [this.poolState.quoteTokenVault, this.poolState.baseTokenVault];\n  }\n\n  update(accountInfoMap: AccountInfoMap): void {\n    const tokenAccountInfos = mapAddressToAccountInfos(accountInfoMap, this.getAccountsForUpdate());\n\n    this.tokenAccounts = tokenAccountInfos.map((info) => {\n      const tokenAccount = deserializeAccount(info.data);\n      if (!tokenAccount) throw new Error('Invalid token account');\n      return tokenAccount;\n    });\n  }\n\n  getQuote({ sourceMint, amount }: QuoteParams): Quote {\n    if (this.tokenAccounts.length === 0) {\n      throw new Error('Unable to fetch accounts for specified tokens.');\n    }\n\n    let feePct = new Decimal(this.poolState.fees.traderFee.numerator.toString())\n      .div(this.poolState.fees.traderFee.denominator.toString())\n      .add(\n        new Decimal(this.poolState.fees.ownerFee.numerator.toString()).div(\n          this.poolState.fees.ownerFee.denominator.toString(),\n        ),\n      );\n\n    const outputIndex = this.tokenAccounts[0].mint.equals(sourceMint) ? 1 : 0;\n    let result = this.calculator.exchange(tokenAccountsToJSBIs(this.tokenAccounts), amount, outputIndex);\n\n    return {\n      notEnoughLiquidity: false,\n      inAmount: amount,\n      outAmount: result.expectedOutputAmount,\n      feeAmount: result.fees,\n      feeMint: sourceMint.toBase58(),\n      feePct: feePct.toNumber(),\n      priceImpactPct: result.priceImpact.toNumber(),\n    };\n  }\n\n  createSwapInstructions(swapParams: SwapParams): TransactionInstruction[] {\n    if (this.poolState.isV2) {\n      if (!this.poolState.curve) {\n        throw new Error('Unable to fetch curve account.');\n      }\n\n      const curve = this.poolState.curve;\n      return [\n        createAldrinV2SwapInstruction({\n          poolState: this.poolState,\n          curve,\n          ...swapParams,\n          inAmount: swapParams.amount,\n          minimumOutAmount: swapParams.otherAmountThreshold,\n        }),\n      ];\n    }\n\n    return [\n      createAldrinSwapInstruction({\n        poolState: this.poolState,\n        ...swapParams,\n        inAmount: swapParams.amount,\n        minimumOutAmount: swapParams.otherAmountThreshold,\n      }),\n    ];\n  }\n\n  get reserveTokenMints() {\n    return [this.poolState.baseTokenMint, this.poolState.quoteTokenMint];\n  }\n}\n","import { PublicKey } from '@solana/web3.js';\n\nexport const STEP_TOKEN_SWAP_PROGRAM_ID = new PublicKey('SSwpMgqNDsyV7mAgN9ady4bDVu5ySjmmXejXvy2vLt1');\n\nexport const PROGRAM_ID_TO_LABEL = new Map<string, string>([\n  ['9W959DqEETiGZocYWCQPaJ6sBmUzgfxXfqGeTEdp3aQP', 'Orca'],\n  [STEP_TOKEN_SWAP_PROGRAM_ID.toBase58(), 'Step'],\n  ['PSwapMdSai8tjrEXcxFeQth87xC4rRsa4VA5mhGhXkP', 'Penguin'],\n  ['SSwapUtytfBdBn1b9NUGG6foMVPtcWgpRU32HToDUZr', 'Saros'],\n  ['Dooar9JkhdZ7J3LHN3A7YCuoGRUggXhQaG4kijfLGU2j', 'Stepn'],\n]);\n","import { findProgramAddressSync } from '@project-serum/anchor/dist/cjs/utils/pubkey';\nimport { struct, u8, blob } from '@solana/buffer-layout';\nimport { u64 } from '@solana/spl-token';\nimport { AccountInfo, PublicKey } from '@solana/web3.js';\nimport { publicKey, uint64 } from '../../utils/layout';\nimport { STEP_TOKEN_SWAP_PROGRAM_ID } from './splTokenSwapPools';\n\ninterface TokenSwapLayout {\n  version: number;\n  isInitialized: number;\n  bumpSeed: number;\n  tokenProgramId: PublicKey;\n  tokenAccountA: PublicKey;\n  tokenAccountB: PublicKey;\n  tokenPool: PublicKey;\n  mintA: PublicKey;\n  mintB: PublicKey;\n  feeAccount: PublicKey;\n  tradeFeeNumerator: u64;\n  tradeFeeDenominator: u64;\n  ownerTradeFeeNumerator: u64;\n  ownerTradeFeeDenominator: u64;\n  ownerWithdrawFeeNumerator: u64;\n  ownerWithdrawFeeDenominator: u64;\n  hostFeeNumerator: u64;\n  hostFeeDenominator: u64;\n  curveType: number;\n  curveParameters: Uint8Array;\n}\n\nconst TokenSwapLayout = struct<TokenSwapLayout>([\n  u8('version'),\n  u8('isInitialized'),\n  u8('bumpSeed'),\n  publicKey('tokenProgramId'),\n  publicKey('tokenAccountA'),\n  publicKey('tokenAccountB'),\n  publicKey('tokenPool'),\n  publicKey('mintA'),\n  publicKey('mintB'),\n  publicKey('feeAccount'),\n  uint64('tradeFeeNumerator'),\n  uint64('tradeFeeDenominator'),\n  uint64('ownerTradeFeeNumerator'),\n  uint64('ownerTradeFeeDenominator'),\n  uint64('ownerWithdrawFeeNumerator'),\n  uint64('ownerWithdrawFeeDenominator'),\n  uint64('hostFeeNumerator'),\n  uint64('hostFeeDenominator'),\n  u8('curveType'),\n  blob(32, 'curveParameters'),\n]);\n\ninterface StepTokenSwapLayout extends TokenSwapLayout {\n  poolNonce: u64;\n}\n\nconst StepTokenSwapLayout = struct<StepTokenSwapLayout>([\n  u8('version'),\n  u8('isInitialized'),\n  u8('bumpSeed'),\n  publicKey('tokenProgramId'),\n  publicKey('tokenAccountA'),\n  publicKey('tokenAccountB'),\n  publicKey('tokenPool'),\n  publicKey('mintA'),\n  publicKey('mintB'),\n  publicKey('feeAccount'),\n  uint64('tradeFeeNumerator'),\n  uint64('tradeFeeDenominator'),\n  uint64('ownerTradeFeeNumerator'),\n  uint64('ownerTradeFeeDenominator'),\n  uint64('ownerWithdrawFeeNumerator'),\n  uint64('ownerWithdrawFeeDenominator'),\n  u8('curveType'),\n  blob(32, 'curveParameters'),\n  u8('poolNonce'),\n]);\n\nexport interface TokenSwapState {\n  address: PublicKey;\n  programId: PublicKey;\n  tokenProgramId: PublicKey;\n  poolToken: PublicKey;\n  feeAccount: PublicKey;\n  authority: PublicKey;\n  tokenAccountA: PublicKey;\n  tokenAccountB: PublicKey;\n  mintA: PublicKey;\n  mintB: PublicKey;\n  tradeFeeNumerator: u64;\n  tradeFeeDenominator: u64;\n  ownerTradeFeeNumerator: u64;\n  ownerTradeFeeDenominator: u64;\n  ownerWithdrawFeeNumerator: u64;\n  ownerWithdrawFeeDenominator: u64;\n  curveType: number;\n  curveParameters: Uint8Array;\n  poolNonce?: u64;\n}\n\nexport function accountInfoToTokenSwapState(\n  address: PublicKey,\n  tokenSwapAccountInfo: AccountInfo<Buffer>,\n): TokenSwapState {\n  const programId = tokenSwapAccountInfo.owner;\n\n  // The layout difference only affects fields we do not actively use\n  const tokenSwapData = (\n    programId.equals(STEP_TOKEN_SWAP_PROGRAM_ID)\n      ? StepTokenSwapLayout.decode(tokenSwapAccountInfo.data)\n      : TokenSwapLayout.decode(tokenSwapAccountInfo.data)\n  ) as TokenSwapLayout | StepTokenSwapLayout;\n\n  if (!tokenSwapData.isInitialized) {\n    throw new Error(`Invalid token swap state`);\n  }\n\n  const [authority] = findProgramAddressSync([address.toBuffer()], programId);\n\n  const poolToken = new PublicKey(tokenSwapData.tokenPool);\n  const feeAccount = new PublicKey(tokenSwapData.feeAccount);\n  const tokenAccountA = new PublicKey(tokenSwapData.tokenAccountA);\n  const tokenAccountB = new PublicKey(tokenSwapData.tokenAccountB);\n  const mintA = new PublicKey(tokenSwapData.mintA);\n  const mintB = new PublicKey(tokenSwapData.mintB);\n  const tokenProgramId = new PublicKey(tokenSwapData.tokenProgramId);\n\n  const tradeFeeNumerator = tokenSwapData.tradeFeeNumerator;\n  const tradeFeeDenominator = tokenSwapData.tradeFeeDenominator;\n  const ownerTradeFeeNumerator = tokenSwapData.ownerTradeFeeNumerator;\n  const ownerTradeFeeDenominator = tokenSwapData.ownerTradeFeeDenominator;\n  const ownerWithdrawFeeNumerator = tokenSwapData.ownerWithdrawFeeNumerator;\n  const ownerWithdrawFeeDenominator = tokenSwapData.ownerWithdrawFeeDenominator;\n\n  const curveType = tokenSwapData.curveType;\n  const curveParameters = tokenSwapData.curveParameters;\n\n  const poolNonce = 'poolNonce' in tokenSwapData ? tokenSwapData.poolNonce : undefined;\n\n  return {\n    address,\n    programId,\n    tokenProgramId,\n    poolToken,\n    feeAccount,\n    authority,\n    tokenAccountA,\n    tokenAccountB,\n    mintA,\n    mintB,\n    tradeFeeNumerator,\n    tradeFeeDenominator,\n    ownerTradeFeeNumerator,\n    ownerTradeFeeDenominator,\n    ownerWithdrawFeeNumerator,\n    ownerWithdrawFeeDenominator,\n    curveType,\n    curveParameters,\n    poolNonce,\n  };\n}\n","import { AccountInfo, PublicKey } from '@solana/web3.js';\nimport Decimal from 'decimal.js';\nimport {\n  AccountInfoMap,\n  Amm,\n  mapAddressToAccountInfos,\n  Quote,\n  QuoteParams,\n  SwapParams,\n  tokenAccountsToJSBIs,\n} from '../amm';\nimport { createTokenSwapInstruction } from '../jupiterInstruction';\nimport { accountInfoToTokenSwapState, TokenSwapState } from './tokenSwapLayout';\nimport { deserializeAccount } from '@mercurial-finance/optimist';\nimport { Fraction, TokenSwapConstantProduct, TokenSwapStable } from '@jup-ag/math';\nimport JSBI from 'jsbi';\nimport { AccountInfo as TokenAccountInfo } from '@solana/spl-token';\nimport { STEP_TOKEN_SWAP_PROGRAM_ID } from './splTokenSwapPools';\n\nenum CurveType {\n  ConstantProduct = 0,\n  Stable = 2,\n}\n\n// Abstract any SPL token swap based AMM\nexport class SplTokenSwapAmm implements Amm {\n  id: string;\n  shouldPrefetch = false;\n  exactOutputSupported = false;\n\n  private tokenSwapState: TokenSwapState;\n  private curveType: CurveType;\n\n  private tokenAccounts: TokenAccountInfo[] = [];\n  calculator: TokenSwapConstantProduct | TokenSwapStable;\n\n  constructor(address: PublicKey, swapStateAccountInfo: AccountInfo<Buffer>, public label: string) {\n    this.id = address.toBase58();\n    this.tokenSwapState = accountInfoToTokenSwapState(address, swapStateAccountInfo);\n\n    this.curveType = this.tokenSwapState.curveType;\n\n    if (!(this.curveType in CurveType)) {\n      throw new Error(`curveType ${this.tokenSwapState.curveType} is not supported`);\n    }\n\n    if (this.tokenSwapState.curveType === CurveType.ConstantProduct) {\n      this.calculator = new TokenSwapConstantProduct(\n        new Fraction(\n          JSBI.BigInt(this.tokenSwapState.tradeFeeNumerator.toString()),\n          JSBI.BigInt(this.tokenSwapState.tradeFeeDenominator.toString()),\n        ),\n        new Fraction(\n          JSBI.BigInt(this.tokenSwapState.ownerTradeFeeNumerator.toString()),\n          JSBI.BigInt(this.tokenSwapState.ownerTradeFeeDenominator.toString()),\n        ),\n      );\n    } else {\n      this.calculator = new TokenSwapStable(\n        JSBI.BigInt(this.tokenSwapState.curveParameters[0]),\n        new Fraction(\n          JSBI.BigInt(this.tokenSwapState.tradeFeeNumerator.toString()),\n          JSBI.BigInt(this.tokenSwapState.tradeFeeDenominator.toString()),\n        ),\n        new Fraction(\n          JSBI.BigInt(this.tokenSwapState.ownerTradeFeeNumerator.toString()),\n          JSBI.BigInt(this.tokenSwapState.ownerTradeFeeDenominator.toString()),\n        ),\n      );\n    }\n  }\n\n  getAccountsForUpdate(): PublicKey[] {\n    return [this.tokenSwapState.tokenAccountA, this.tokenSwapState.tokenAccountB];\n  }\n\n  update(accountInfoMap: AccountInfoMap): void {\n    const tokenAccountInfos = mapAddressToAccountInfos(accountInfoMap, this.getAccountsForUpdate());\n\n    this.tokenAccounts = tokenAccountInfos.map((info) => {\n      const tokenAccount = deserializeAccount(info.data);\n      if (!tokenAccount) {\n        throw new Error('Invalid token account');\n      }\n      return tokenAccount;\n    });\n  }\n\n  getQuote({ sourceMint, amount }: QuoteParams): Quote {\n    if (this.tokenAccounts.length === 0) {\n      throw new Error('Unable to fetch accounts for specified tokens.');\n    }\n\n    let feePct = new Decimal(this.tokenSwapState.tradeFeeNumerator.toString())\n      .div(this.tokenSwapState.tradeFeeDenominator.toString())\n      .add(\n        new Decimal(this.tokenSwapState.ownerTradeFeeNumerator.toString()).div(\n          this.tokenSwapState.ownerTradeFeeDenominator.toString(),\n        ),\n      );\n\n    const outputIndex = this.tokenAccounts[0].mint.equals(sourceMint) ? 1 : 0;\n    let result = this.calculator.exchange(tokenAccountsToJSBIs(this.tokenAccounts), amount, outputIndex);\n\n    return {\n      notEnoughLiquidity: false,\n      inAmount: amount,\n      outAmount: result.expectedOutputAmount,\n      feeAmount: result.fees,\n      feeMint: sourceMint.toBase58(),\n      feePct: feePct.toNumber(),\n      priceImpactPct: result.priceImpact.toNumber(),\n    };\n  }\n\n  createSwapInstructions(swapParams: SwapParams) {\n    return [\n      createTokenSwapInstruction({\n        tokenSwapState: this.tokenSwapState,\n        ...swapParams,\n        inAmount: swapParams.amount,\n        minimumOutAmount: swapParams.otherAmountThreshold,\n        isStep: this.tokenSwapState.programId.equals(STEP_TOKEN_SWAP_PROGRAM_ID),\n      }),\n    ];\n  }\n\n  get reserveTokenMints() {\n    return [this.tokenSwapState.mintA, this.tokenSwapState.mintB];\n  }\n}\n","import { findProgramAddressSync } from '@project-serum/anchor/dist/cjs/utils/pubkey';\nimport { struct, u8, u32 } from '@solana/buffer-layout';\nimport { u64 } from '@solana/spl-token';\nimport { AccountInfo, PublicKey } from '@solana/web3.js';\nimport { uint64, publicKey } from '../../utils/layout';\n\nexport const FEE_DENOMINATOR = Math.pow(10, 10);\n\ninterface MercurialSwapLayout {\n  version: number;\n  isInitialized: number;\n  nonce: number;\n  amplificationCoefficient: u64;\n  feeNumerator: u64;\n  adminFeeNumerator: u64;\n  tokenAccountsLength: number;\n  precisionFactor: u64;\n  precisionMultiplierA: u64;\n  precisionMultiplierB: u64;\n  precisionMultiplierC: u64;\n  precisionMultiplierD: u64;\n  tokenAccountA: PublicKey;\n  tokenAccountB: PublicKey;\n  tokenAccountC: PublicKey;\n  tokenAccountD: PublicKey;\n}\n\nexport const MercurialSwapLayout = struct<MercurialSwapLayout>([\n  u8('version'),\n  u8('isInitialized'),\n  u8('nonce'),\n  uint64('amplificationCoefficient'),\n  uint64('feeNumerator'),\n  uint64('adminFeeNumerator'),\n  u32('tokenAccountsLength'),\n  uint64('precisionFactor'),\n  uint64('precisionMultiplierA'),\n  uint64('precisionMultiplierB'),\n  uint64('precisionMultiplierC'),\n  uint64('precisionMultiplierD'),\n  publicKey('tokenAccountA'),\n  publicKey('tokenAccountB'),\n  publicKey('tokenAccountC'),\n  publicKey('tokenAccountD'),\n]);\n\nexport interface MercurialSwapLayoutState {\n  programId: PublicKey;\n  authority: PublicKey;\n  isInitialized: boolean;\n  nonce: number;\n  ammId: PublicKey;\n  amplificationCoefficient: number;\n  feeNumerator: number;\n  tokenAccountsLength: number;\n  precisionFactor: number;\n  precisionMultipliers: number[];\n  tokenAccounts: PublicKey[];\n}\n\nexport const accountInfoToMercurialSwapLayout = (\n  address: PublicKey,\n  accountInfo: AccountInfo<Buffer>,\n): MercurialSwapLayoutState => {\n  const programId = accountInfo.owner;\n  const decoded = MercurialSwapLayout.decode(accountInfo.data);\n  const tokenAccountsLength = decoded.tokenAccountsLength;\n  const [authority] = findProgramAddressSync([address.toBuffer()], programId);\n\n  const precisionMultipliers = [\n    decoded.precisionMultiplierA.toNumber(),\n    decoded.precisionMultiplierB.toNumber(),\n    decoded.precisionMultiplierC.toNumber(),\n    decoded.precisionMultiplierD.toNumber(),\n  ].slice(0, tokenAccountsLength);\n\n  const tokenAccounts = [\n    decoded.tokenAccountA,\n    decoded.tokenAccountB,\n    decoded.tokenAccountC,\n    decoded.tokenAccountD,\n  ].slice(0, tokenAccountsLength);\n\n  return {\n    programId,\n    authority,\n    isInitialized: Boolean(decoded.isInitialized),\n    nonce: decoded.nonce,\n    ammId: address,\n    amplificationCoefficient: decoded.amplificationCoefficient.toNumber(),\n    feeNumerator: decoded.feeNumerator.toNumber(),\n    tokenAccountsLength,\n    precisionFactor: decoded.precisionFactor.toNumber(),\n    precisionMultipliers,\n    tokenAccounts,\n  };\n};\n","import { Fraction, Stable } from '@jup-ag/math';\nimport { AccountInfo, PublicKey, TransactionInstruction } from '@solana/web3.js';\nimport JSBI from 'jsbi';\nimport {\n  AccountInfoMap,\n  Amm,\n  mapAddressToAccountInfos,\n  Quote,\n  QuoteParams,\n  tokenAccountsToJSBIs,\n  SwapParams,\n} from '../amm';\nimport { createMercurialExchangeInstruction } from '../jupiterInstruction';\nimport { deserializeAccount } from '@mercurial-finance/optimist';\nimport { AccountInfo as TokenAccountInfo } from '@solana/spl-token';\nimport { accountInfoToMercurialSwapLayout, FEE_DENOMINATOR, MercurialSwapLayoutState } from './swapLayout';\n\ninterface MercurialParams {\n  tokenMints: string[];\n}\n\nexport class MercurialAmm implements Amm {\n  id: string;\n  label = 'Mercurial';\n  shouldPrefetch = false;\n  exactOutputSupported = false;\n\n  swapLayout: MercurialSwapLayoutState;\n  private tokenAccounts: TokenAccountInfo[] = [];\n  private calculator: Stable;\n\n  static decodeSwapLayout = accountInfoToMercurialSwapLayout;\n\n  constructor(address: PublicKey, accountInfo: AccountInfo<Buffer>, private params: MercurialParams) {\n    this.id = address.toBase58();\n    this.swapLayout = accountInfoToMercurialSwapLayout(address, accountInfo);\n    this.calculator = new Stable(\n      JSBI.BigInt(this.swapLayout.tokenAccountsLength),\n      JSBI.BigInt(this.swapLayout.amplificationCoefficient),\n      this.swapLayout.precisionMultipliers.map((precisionMultiplier) => JSBI.BigInt(precisionMultiplier)),\n      new Fraction(JSBI.BigInt(this.swapLayout.feeNumerator), JSBI.BigInt(FEE_DENOMINATOR)),\n    );\n  }\n\n  getAccountsForUpdate(): PublicKey[] {\n    return this.swapLayout.tokenAccounts;\n  }\n\n  update(accountInfoMap: AccountInfoMap) {\n    let tokenAccountInfos = mapAddressToAccountInfos(accountInfoMap, this.getAccountsForUpdate());\n\n    this.tokenAccounts = tokenAccountInfos\n      .map((info) => deserializeAccount(info.data))\n      .filter((x): x is TokenAccountInfo => x !== null);\n  }\n\n  getQuote({ sourceMint, destinationMint, amount }: QuoteParams): Quote {\n    if (this.tokenAccounts.length === 0) {\n      throw new Error('Unable to fetch accounts for specified tokens.');\n    }\n\n    const inputIndex = this.tokenAccounts.findIndex((tokenAccount) => tokenAccount.mint.equals(sourceMint));\n    const outputIndex = this.tokenAccounts.findIndex((tokenAccount) => tokenAccount.mint.equals(destinationMint));\n    const result = this.calculator.exchange(tokenAccountsToJSBIs(this.tokenAccounts), amount, inputIndex, outputIndex);\n\n    const feePct = this.swapLayout.feeNumerator / FEE_DENOMINATOR;\n\n    return {\n      notEnoughLiquidity: false,\n      inAmount: amount,\n      outAmount: result.expectedOutputAmount,\n      feeAmount: result.fees,\n      feeMint: destinationMint.toBase58(),\n      feePct: feePct,\n      priceImpactPct: result.priceImpact.toNumber(),\n    };\n  }\n\n  createSwapInstructions(swapParams: SwapParams): TransactionInstruction[] {\n    return [\n      createMercurialExchangeInstruction({\n        swapLayout: this.swapLayout,\n        ...swapParams,\n        inAmount: swapParams.amount,\n        minimumOutAmount: swapParams.otherAmountThreshold,\n      }),\n    ];\n  }\n\n  get reserveTokenMints() {\n    return this.params.tokenMints.map((tokenMint) => new PublicKey(tokenMint));\n  }\n}\n","import { Fraction, TokenSwapConstantProduct } from '@jup-ag/math';\nimport { AccountInfo, Connection, PublicKey, TransactionInstruction } from '@solana/web3.js';\nimport JSBI from 'jsbi';\nimport { deserializeAccount } from '@mercurial-finance/optimist';\nimport {\n  AccountInfoMap,\n  Amm,\n  mapAddressToAccountInfos,\n  Quote,\n  QuoteParams,\n  tokenAccountsToJSBIs,\n  SwapParams,\n} from '../amm';\nimport { createCropperSwapInstruction } from '../jupiterInstruction';\n\nimport { AccountInfo as TokenAccountInfo } from '@solana/spl-token';\nimport {\n  accountInfoToCropperPoolState,\n  CropperPoolState,\n  stateAccountInfoToCropperState,\n  CROPPER_STATE_ADDRESS,\n} from './swapLayout';\nimport Decimal from 'decimal.js';\n\ninterface CropperParams {\n  tokenAFeeAccount: PublicKey;\n  tokenBFeeAccount: PublicKey;\n  returnFeeNumerator: number;\n  fixedFeeNumerator: number;\n  feeDenominator: number;\n}\n\nexport class CropperAmm implements Amm {\n  id: string;\n  label = 'Cropper' as const;\n  shouldPrefetch = false;\n  exactOutputSupported = false;\n\n  poolState: CropperPoolState;\n  private tokenAccounts: TokenAccountInfo[] = [];\n  private calculator: TokenSwapConstantProduct;\n  private feePct: Decimal;\n\n  // Hardcoded because no where to query this\n  static async getStateFromStateAccount(connection: Connection) {\n    const accountInfo = await connection.getAccountInfo(CROPPER_STATE_ADDRESS);\n\n    if (!accountInfo) {\n      throw new Error('State account not found');\n    }\n\n    return stateAccountInfoToCropperState(accountInfo);\n  }\n\n  static decodePoolState = accountInfoToCropperPoolState;\n\n  constructor(address: PublicKey, accountInfo: AccountInfo<Buffer>, private params: CropperParams) {\n    this.id = address.toBase58();\n    this.poolState = accountInfoToCropperPoolState(address, accountInfo);\n\n    this.feePct = new Decimal(this.params.fixedFeeNumerator)\n      .div(this.params.feeDenominator)\n      .add(new Decimal(this.params.returnFeeNumerator).div(this.params.feeDenominator));\n\n    this.params.tokenAFeeAccount = new PublicKey(this.params.tokenAFeeAccount);\n    this.params.tokenBFeeAccount = new PublicKey(this.params.tokenBFeeAccount);\n\n    this.calculator = new TokenSwapConstantProduct(\n      new Fraction(JSBI.BigInt(this.params.fixedFeeNumerator), JSBI.BigInt(this.params.feeDenominator)),\n      new Fraction(JSBI.BigInt(this.params.returnFeeNumerator), JSBI.BigInt(this.params.feeDenominator)),\n    );\n  }\n\n  getAccountsForUpdate(): PublicKey[] {\n    return [this.poolState.tokenAAccount, this.poolState.tokenBAccount];\n  }\n\n  update(accountInfoMap: AccountInfoMap): void {\n    const tokenAccountInfos = mapAddressToAccountInfos(accountInfoMap, this.getAccountsForUpdate());\n\n    this.tokenAccounts = tokenAccountInfos.map((info) => {\n      const tokenAccount = deserializeAccount(info.data);\n      if (!tokenAccount) {\n        throw new Error('Invalid token account');\n      }\n      return tokenAccount;\n    });\n  }\n\n  getQuote({ sourceMint, amount }: QuoteParams): Quote {\n    if (this.tokenAccounts.length === 0) {\n      throw new Error('Unable to fetch accounts for specified tokens.');\n    }\n\n    const outputIndex = this.tokenAccounts[0].mint.equals(sourceMint) ? 1 : 0;\n    const result = this.calculator.exchange(tokenAccountsToJSBIs(this.tokenAccounts), amount, outputIndex);\n\n    return {\n      notEnoughLiquidity: false,\n      inAmount: amount,\n      outAmount: result.expectedOutputAmount,\n      feeAmount: result.fees,\n      feeMint: sourceMint.toBase58(),\n      feePct: this.feePct.toNumber(),\n      priceImpactPct: result.priceImpact.toNumber(),\n    };\n  }\n\n  createSwapInstructions(swapParams: SwapParams): TransactionInstruction[] {\n    const feeAccount = swapParams.sourceMint.equals(this.poolState.mintA)\n      ? this.params.tokenAFeeAccount\n      : this.params.tokenBFeeAccount;\n\n    return [\n      createCropperSwapInstruction({\n        poolState: this.poolState,\n        feeAccount,\n        ...swapParams,\n        inAmount: swapParams.amount,\n        minimumOutAmount: swapParams.otherAmountThreshold,\n      }),\n    ];\n  }\n\n  get reserveTokenMints() {\n    return [this.poolState.mintA, this.poolState.mintB];\n  }\n}\n","import { TokenSwapAccountLayout } from '@jup-ag/crema-sdk';\nimport { findProgramAddressSync } from '@project-serum/anchor/dist/cjs/utils/pubkey';\nimport { AccountInfo, PublicKey } from '@solana/web3.js';\nimport Decimal from 'decimal.js';\n\nexport interface CremaPoolState {\n  programId: PublicKey;\n  authority: PublicKey;\n  version: number;\n  isInitialized: boolean;\n  nonce: number;\n  ammId: PublicKey;\n  tokenProgramId: PublicKey;\n  tokenAAccount: PublicKey;\n  tokenBAccount: PublicKey;\n  ticksKey: PublicKey;\n  mintA: PublicKey;\n  mintB: PublicKey;\n  fee: Decimal;\n  currentSqrtPrice: Decimal;\n  currentLiquity: Decimal;\n}\n\nexport const accountInfoToCremaPoolState = (address: PublicKey, accountInfo: AccountInfo<Buffer>): CremaPoolState => {\n  const programId = accountInfo.owner;\n\n  const decoded = TokenSwapAccountLayout.decode(accountInfo.data);\n  const [authority] = findProgramAddressSync([address.toBuffer()], programId);\n\n  return {\n    programId,\n    authority,\n    version: decoded.version,\n    isInitialized: Boolean(decoded.isInitialized),\n    nonce: decoded.nonce,\n    ammId: address,\n    tokenProgramId: decoded.tokenProgramId,\n    tokenAAccount: decoded.swapTokenA,\n    tokenBAccount: decoded.swapTokenB,\n    ticksKey: decoded.ticksKey,\n    mintA: decoded.tokenAMint,\n    mintB: decoded.tokenBMint,\n    fee: decoded.fee,\n    currentSqrtPrice: decoded.currentSqrtPrice,\n    currentLiquity: decoded.currentLiquity,\n  };\n};\n","import { AccountInfoMap, Amm, mapAddressToAccountInfos, Quote, QuoteParams, SwapParams } from '../amm';\nimport { AccountInfo, PublicKey, TransactionInstruction } from '@solana/web3.js';\nimport { accountInfoToCremaPoolState, CremaPoolState } from './swapLayout';\nimport { createCremaSwapInstruction } from '../jupiterInstruction';\nimport { calculateSwapA2B, calculateSwapB2A, parseTicksAccount, Tick } from '@jup-ag/crema-sdk';\nimport Decimal from 'decimal.js';\nimport { ZERO } from '@jup-ag/math';\nimport JSBI from 'jsbi';\n\nexport class CremaAmm implements Amm {\n  id: string;\n  label = 'Crema';\n  shouldPrefetch = false;\n  exactOutputSupported = false;\n\n  private ticks: Tick[] | undefined;\n  private poolState: CremaPoolState;\n\n  constructor(address: PublicKey, accountInfo: AccountInfo<Buffer>) {\n    this.poolState = accountInfoToCremaPoolState(address, accountInfo);\n    this.id = address.toBase58();\n  }\n\n  getAccountsForUpdate(): PublicKey[] {\n    return [this.poolState.ammId, this.poolState.ticksKey];\n  }\n\n  update(accountInfoMap: AccountInfoMap): void {\n    const [tokenSwapAccountInfo, ticksAccountInfo] = mapAddressToAccountInfos(\n      accountInfoMap,\n      this.getAccountsForUpdate(),\n    );\n\n    this.poolState = accountInfoToCremaPoolState(this.poolState.ammId, tokenSwapAccountInfo);\n\n    const ticksInfo = parseTicksAccount(this.poolState.ticksKey, ticksAccountInfo);\n    if (!ticksInfo) throw new Error(`Ticks account invalid: ${this.poolState.ticksKey.toBase58()}`);\n    this.ticks = ticksInfo.data.ticks;\n  }\n\n  getQuote({ sourceMint, amount }: QuoteParams): Quote {\n    if (!this.ticks) {\n      throw new Error('Unable to fetch accounts for ticks.');\n    }\n\n    // Crema SDK doesn't support 0 amount input\n    if (JSBI.equal(amount, ZERO)) {\n      return {\n        notEnoughLiquidity: false,\n        inAmount: amount,\n        outAmount: ZERO,\n        feeAmount: ZERO,\n        feeMint: sourceMint.toBase58(),\n        feePct: this.poolState.fee.toNumber(),\n        priceImpactPct: 0,\n      };\n    }\n\n    const result = this.poolState.mintA.equals(sourceMint)\n      ? this.preSwapA(new Decimal(amount.toString()))\n      : this.preSwapB(new Decimal(amount.toString()));\n\n    if (result.revert) {\n      throw new Error('Crema error: insufficient liquidity');\n    }\n\n    return {\n      notEnoughLiquidity: false,\n      inAmount: amount,\n      outAmount: JSBI.BigInt(result.amountOut.toString()),\n      feeAmount: JSBI.BigInt(result.feeUsed.toString()),\n      feeMint: sourceMint.toBase58(),\n      feePct: this.poolState.fee.toNumber(),\n      priceImpactPct: result.impact.toNumber(),\n    };\n  }\n\n  preSwapA(amountIn: Decimal): {\n    amountOut: Decimal;\n    amountUsed: Decimal;\n    feeUsed: Decimal;\n    afterPrice: Decimal;\n    afterLiquity: Decimal;\n    impact: Decimal;\n    revert: boolean;\n  } {\n    if (!this.ticks) {\n      throw new Error('Unable to fetch accounts for ticks.');\n    }\n\n    const result = calculateSwapA2B(\n      this.ticks,\n      this.poolState.currentSqrtPrice,\n      this.poolState.fee,\n      this.poolState.currentLiquity,\n      amountIn,\n    );\n\n    const currentPriceA = this.poolState.currentSqrtPrice.pow(2);\n    const transactionPriceA = result.amountOut.div(result.amountUsed);\n    const impact = transactionPriceA.sub(currentPriceA).div(currentPriceA).abs();\n    const revert = result.amountUsed.lessThan(amountIn);\n\n    return {\n      ...result,\n      impact,\n      revert,\n    };\n  }\n\n  preSwapB(amountIn: Decimal): {\n    amountOut: Decimal;\n    amountUsed: Decimal;\n    feeUsed: Decimal;\n    afterPrice: Decimal;\n    afterLiquity: Decimal;\n    impact: Decimal;\n    revert: boolean;\n  } {\n    if (!this.ticks) {\n      throw new Error('Unable to fetch accounts for ticks.');\n    }\n\n    const result = calculateSwapB2A(\n      this.ticks,\n      this.poolState.currentSqrtPrice,\n      this.poolState.fee,\n      this.poolState.currentLiquity,\n      amountIn,\n    );\n\n    const currentPriceA = this.poolState.currentSqrtPrice.pow(2);\n    const currentPriceB = new Decimal(1).div(currentPriceA);\n    const transactionPriceB = result.amountOut.div(result.amountUsed);\n    const impact = transactionPriceB.sub(currentPriceB).div(currentPriceB).abs();\n    const revert = result.amountUsed.lessThan(amountIn);\n\n    return {\n      ...result,\n      impact,\n      revert,\n    };\n  }\n\n  createSwapInstructions(swapParams: SwapParams): TransactionInstruction[] {\n    return [\n      createCremaSwapInstruction({\n        poolState: this.poolState,\n        ...swapParams,\n        inAmount: swapParams.amount,\n        minimumOutAmount: swapParams.otherAmountThreshold,\n      }),\n    ];\n  }\n\n  get reserveTokenMints() {\n    return [this.poolState.mintA, this.poolState.mintB];\n  }\n}\n","import { struct, u8, Layout, blob } from '@solana/buffer-layout';\nimport { PublicKey, AccountInfo } from '@solana/web3.js';\nimport { u64 } from '@solana/spl-token';\nimport { publicKey, uint64 } from '../../utils/layout';\n\ninterface SenchaSwapLayout {\n  discriminator: any;\n  factory: PublicKey;\n  bump: number;\n  index: u64;\n  admin: PublicKey;\n  token0Reserves: PublicKey;\n  token0Mint: PublicKey;\n  token0Fees: PublicKey;\n  token1Reserves: PublicKey;\n  token1Mint: PublicKey;\n  token1Fees: PublicKey;\n  isPaused: number;\n  poolMint: PublicKey;\n  tradeFeeKbps: u64;\n  withdrawFeeKbps: u64;\n  adminTradeFeeKbps: u64;\n  adminWithdrawFeeKbps: u64;\n}\n\nexport const SenchaSwapLayout = struct<SenchaSwapLayout>([\n  blob(8, 'discriminator'),\n  publicKey('factory'),\n  u8('bump'),\n  uint64('index'),\n  publicKey('admin'),\n  publicKey('token0Reserves'),\n  publicKey('token0Mint'),\n  publicKey('token0Fees'),\n  publicKey('token1Reserves'),\n  publicKey('token1Mint'),\n  publicKey('token1Fees'),\n  u8('isPaused'),\n  publicKey('poolMint'),\n  uint64('tradeFeeKbps'),\n  uint64('withdrawFeeKbps'),\n  uint64('adminTradeFeeKbps'),\n  uint64('adminWithdrawFeeKbps'),\n]);\n\nexport interface SenchaPoolState {\n  programId: PublicKey;\n  isPaused: boolean;\n  bump: number;\n  ammId: PublicKey;\n  token0Reserves: PublicKey;\n  token1Reserves: PublicKey;\n  token0Mint: PublicKey;\n  token1Mint: PublicKey;\n  token0Fees: PublicKey;\n  token1Fees: PublicKey;\n  poolMint: PublicKey;\n  tradeFeeKbps: number;\n}\n\nexport const accountInfoToSenchaPoolState = (address: PublicKey, accountInfo: AccountInfo<Buffer>): SenchaPoolState => {\n  const programId = accountInfo.owner;\n  const decoded = SenchaSwapLayout.decode(accountInfo.data);\n\n  return {\n    programId,\n    isPaused: Boolean(decoded.isPaused),\n    bump: decoded.bump,\n    ammId: address,\n    token0Reserves: decoded.token0Reserves,\n    token1Reserves: decoded.token1Reserves,\n    token0Mint: decoded.token0Mint,\n    token1Mint: decoded.token1Mint,\n    token0Fees: decoded.token0Fees,\n    token1Fees: decoded.token1Fees,\n    poolMint: decoded.poolMint,\n    tradeFeeKbps: decoded.tradeFeeKbps.toNumber(),\n  };\n};\n","import { AccountInfo, PublicKey, TransactionInstruction } from '@solana/web3.js';\nimport {\n  AccountInfoMap,\n  Amm,\n  mapAddressToAccountInfos,\n  Quote,\n  QuoteParams,\n  tokenAccountsToJSBIs,\n  SwapParams,\n} from '../amm';\nimport { accountInfoToSenchaPoolState, SenchaPoolState } from './swapLayout';\nimport { AccountInfo as TokenAccountInfo } from '@solana/spl-token';\nimport { deserializeAccount } from '@mercurial-finance/optimist';\nimport { createSenchaSwapInstruction } from '../jupiterInstruction';\nimport { Fraction, TokenSwapConstantProduct, ZERO } from '@jup-ag/math';\nimport JSBI from 'jsbi';\n\nexport class SenchaAmm implements Amm {\n  id: string;\n  label = 'Sencha' as const;\n  shouldPrefetch = false;\n  exactOutputSupported = false;\n\n  poolState: SenchaPoolState;\n  private calculator: TokenSwapConstantProduct;\n  private tokenAccounts: TokenAccountInfo[] = [];\n\n  constructor(address: PublicKey, accountInfo: AccountInfo<Buffer>) {\n    this.id = address.toBase58();\n    this.poolState = accountInfoToSenchaPoolState(address, accountInfo);\n    this.calculator = new TokenSwapConstantProduct(\n      new Fraction(\n        JSBI.BigInt(this.poolState.tradeFeeKbps),\n        JSBI.BigInt(10000000), // 100% = 10000000kbps\n      ),\n      new Fraction(ZERO, ZERO),\n      false,\n    );\n  }\n\n  get isPaused() {\n    return this.poolState.isPaused;\n  }\n\n  getAccountsForUpdate(): PublicKey[] {\n    return [this.poolState.token0Reserves, this.poolState.token1Reserves];\n  }\n\n  update(accountInfoMap: AccountInfoMap): void {\n    const tokenAccountInfos = mapAddressToAccountInfos(accountInfoMap, this.getAccountsForUpdate());\n\n    this.tokenAccounts = tokenAccountInfos.map((info) => {\n      const tokenAccount = deserializeAccount(info.data);\n      if (!tokenAccount) {\n        throw new Error('Invalid token account');\n      }\n      return tokenAccount;\n    });\n  }\n\n  getQuote({ sourceMint, amount }: QuoteParams): Quote {\n    if (this.tokenAccounts.length === 0) {\n      throw new Error('Unable to fetch accounts for specified tokens.');\n    }\n\n    const outputIndex = this.tokenAccounts[0].mint.equals(sourceMint) ? 1 : 0;\n    let result = this.calculator.exchange(tokenAccountsToJSBIs(this.tokenAccounts), amount, outputIndex);\n\n    let feePct = this.poolState.tradeFeeKbps / 10000000; // 100% kbps\n\n    return {\n      notEnoughLiquidity: false,\n      inAmount: amount,\n      outAmount: result.expectedOutputAmount,\n      feeAmount: result.fees,\n      feeMint: sourceMint.toBase58(),\n      feePct,\n      priceImpactPct: result.priceImpact.toNumber(),\n    };\n  }\n\n  createSwapInstructions(swapParams: SwapParams): TransactionInstruction[] {\n    return [\n      createSenchaSwapInstruction({\n        poolState: this.poolState,\n        ...swapParams,\n        inAmount: swapParams.amount,\n        minimumOutAmount: swapParams.otherAmountThreshold,\n      }),\n    ];\n  }\n\n  get reserveTokenMints() {\n    return [this.poolState.token0Mint, this.poolState.token1Mint];\n  }\n}\n","import { AccountInfo, PublicKey } from '@solana/web3.js';\nimport { findProgramAddressSync } from '@project-serum/anchor/dist/cjs/utils/pubkey';\nimport { LIFINITY_AMM_LAYOUT, IPoolInfo } from '@jup-ag/lifinity-sdk';\n\nexport interface LifinitySwapLayoutState {\n  programId: PublicKey;\n  authority: PublicKey;\n  amm: PublicKey;\n  tokenAMint: PublicKey;\n  tokenBMint: PublicKey;\n  poolMint: PublicKey;\n  feeAccount: PublicKey;\n  pythAccount: PublicKey;\n  pythPcAccount: PublicKey;\n  configAccount: PublicKey;\n  poolCoinTokenAccount: PublicKey;\n  poolCoinMint: PublicKey;\n  poolPcTokenAccount: PublicKey;\n  poolPcMint: PublicKey;\n}\n\nexport const swapStateToPoolInfo = (state: LifinitySwapLayoutState): IPoolInfo => {\n  return {\n    amm: state.amm.toBase58(),\n    configAccount: state.configAccount.toBase58(),\n    feeAccount: state.feeAccount.toBase58(),\n    pythAccount: state.pythAccount.toBase58(),\n    pythPcAccount: state.pythPcAccount.toBase58(),\n    poolCoinMint: state.poolCoinMint.toBase58(),\n    poolCoinTokenAccount: state.poolCoinTokenAccount.toBase58(),\n    poolMint: state.poolMint.toBase58(),\n    poolPcTokenAccount: state.poolPcTokenAccount.toBase58(),\n    poolPcMint: state.poolPcMint.toBase58(),\n    // We don't use decimals at the moment, so default to 0, if we need to use it later, we can add it from API\n    poolCoinDecimal: 0,\n    poolPcDecimal: 0,\n    poolMintDecimal: 0,\n    pythBaseDecimal: 0,\n  };\n};\n\nexport const accountInfoLifinitySwapLayout = (\n  address: PublicKey,\n  accountInfo: AccountInfo<Buffer>,\n): LifinitySwapLayoutState => {\n  const programId = accountInfo.owner;\n  const decoded = LIFINITY_AMM_LAYOUT.decode(accountInfo.data);\n  const [authority] = findProgramAddressSync([address.toBuffer()], programId);\n\n  return {\n    programId,\n    authority,\n    amm: address,\n    tokenAMint: decoded.tokenAMint,\n    tokenBMint: decoded.tokenBMint,\n    poolMint: decoded.poolMint,\n    feeAccount: decoded.poolFeeAccount,\n    pythAccount: decoded.pythAccount,\n    pythPcAccount: decoded.pythPcAccount,\n    configAccount: decoded.configAccount,\n    poolCoinTokenAccount: decoded.tokenAAccount,\n    poolCoinMint: decoded.tokenAMint,\n    poolPcTokenAccount: decoded.tokenBAccount,\n    poolPcMint: decoded.tokenBMint,\n  };\n};\n","import { getCurveAmount, getParsedData, IAmmData, ICurveAmount, IPoolInfo, TradeDirection } from '@jup-ag/lifinity-sdk';\nimport { AccountInfo, PublicKey, TransactionInstruction } from '@solana/web3.js';\nimport { AccountInfoMap, Amm, Quote, QuoteParams, SwapParams } from '../amm';\nimport { accountInfoLifinitySwapLayout, LifinitySwapLayoutState, swapStateToPoolInfo } from './swapLayout';\nimport { createLifinitySwapInstruction } from '../jupiterInstruction';\nimport Decimal from 'decimal.js';\nimport JSBI from 'jsbi';\n\nexport class LifinityAmm implements Amm {\n  id: string;\n  label = 'Lifinity' as const;\n  shouldPrefetch = false;\n  exactOutputSupported = false;\n\n  private swapState: LifinitySwapLayoutState;\n  private poolInfo: IPoolInfo;\n  private accountInfos: Array<{ publicKey: PublicKey; account: AccountInfo<Buffer> }> = [];\n\n  constructor(address: PublicKey, private ammAccountInfo: AccountInfo<Buffer>) {\n    this.id = address.toBase58();\n    this.swapState = accountInfoLifinitySwapLayout(address, ammAccountInfo);\n    this.poolInfo = swapStateToPoolInfo(this.swapState);\n  }\n\n  getAccountsForUpdate(): PublicKey[] {\n    return [\n      this.swapState.poolCoinTokenAccount,\n      this.swapState.poolPcTokenAccount,\n      this.swapState.configAccount,\n      this.swapState.pythAccount,\n      this.swapState.pythPcAccount,\n    ];\n  }\n\n  update(accountInfoMap: AccountInfoMap): void {\n    this.getAccountsForUpdate().forEach((publicKey, idx) => {\n      const account = accountInfoMap.get(publicKey.toBase58());\n      if (account) {\n        this.accountInfos[idx] = {\n          publicKey,\n          account,\n        };\n      }\n    });\n  }\n\n  getQuote({ sourceMint, amount }: QuoteParams): Quote {\n    if (this.accountInfos.length !== this.getAccountsForUpdate().length) {\n      throw new Error('Accounts not loaded');\n    }\n\n    const tradeDirection = this.swapState.poolCoinMint.equals(sourceMint) ? TradeDirection.AtoB : TradeDirection.BtoA;\n    const { amm, pyth, pythPc, fees, coinBalance, pcBalance, config }: IAmmData = getParsedData(\n      [{ publicKey: this.swapState.amm, account: this.ammAccountInfo }, ...this.accountInfos],\n      this.poolInfo,\n    );\n\n    if (\n      !pyth.status.equals(1) ||\n      // pythPc can be undefined from the lifinity SDK\n      (pythPc && !pythPc.status.equals(1))\n    ) {\n      throw new Error('Pyth accounts are outdated');\n    }\n\n    const amountIn = new Decimal(amount.toString());\n    const result: ICurveAmount = getCurveAmount(\n      amountIn,\n      pyth.publishSlot.toNumber(), // Use pyth publish slot to not throw error\n      amm,\n      fees,\n      coinBalance,\n      pcBalance,\n      config,\n      pyth,\n      pythPc,\n      tradeDirection,\n    );\n\n    return {\n      notEnoughLiquidity: false,\n      inAmount: amount,\n      outAmount: JSBI.BigInt(result.amountSwapped.toString()),\n      feeAmount: JSBI.BigInt(result.fee.ceil().toString()),\n      feeMint: sourceMint.toBase58(),\n      feePct: result.feePercent.toNumber(),\n      priceImpactPct: result.priceImpact.toNumber(),\n    };\n  }\n\n  createSwapInstructions(swapParams: SwapParams): TransactionInstruction[] {\n    return [\n      createLifinitySwapInstruction({\n        swapState: this.swapState,\n        ...swapParams,\n        inAmount: swapParams.amount,\n        minimumOutAmount: swapParams.otherAmountThreshold,\n      }),\n    ];\n  }\n\n  get reserveTokenMints() {\n    return [this.swapState.poolCoinMint, this.swapState.poolPcMint];\n  }\n}\n","import { AccountInfo, PublicKey } from '@solana/web3.js';\nimport Decimal from 'decimal.js';\nimport { AccountInfoMap, Amm, SwapMode, Quote, QuoteParams, SwapParams } from '../amm';\nimport { createWhirlpoolSwapInstruction, createWhirlpoolSwapExactOutputInstruction } from '../jupiterInstruction';\nimport { findProgramAddressSync } from '@project-serum/anchor/dist/cjs/utils/pubkey';\nimport { WHIRLPOOL_PROGRAM_ID } from '../../constants';\nimport {\n  parseWhirlpool,\n  parseTickArray,\n  WhirlpoolData,\n  getSwapQuote,\n  getTickArrayPks,\n  TickArrayData,\n  getTickArrayPublicKeysForSwap,\n  getDefaultSqrtPriceLimit,\n} from '@jup-ag/whirlpool-sdk';\nimport BN from 'bn.js';\nimport JSBI from 'jsbi';\n\nconst FEE_RATE_MUL_VALUE = 1_000_000;\n\nfunction fromX64(num: BN): Decimal {\n  return new Decimal(num.toString()).mul(Decimal.pow(2, -64));\n}\n\nfunction parseWhirlpoolSafe(address: PublicKey, data: Buffer) {\n  const whirlpoolData = parseWhirlpool(data);\n  if (!whirlpoolData) throw new Error(`Failed to parse whirlpool ${address.toBase58()}`);\n  return whirlpoolData;\n}\n\nexport class WhirlpoolAmm implements Amm {\n  id: string;\n  label = 'Orca (Whirlpools)';\n  shouldPrefetch = true;\n  exactOutputSupported = true;\n\n  private whirlpoolData: WhirlpoolData;\n  private tickArrays: Map<string, TickArrayData> = new Map();\n  private tickPks: PublicKey[];\n  private oracle: PublicKey;\n  private feePct: Decimal;\n\n  constructor(private address: PublicKey, whirlpoolAccountInfo: AccountInfo<Buffer>) {\n    this.id = address.toBase58();\n    this.whirlpoolData = parseWhirlpoolSafe(address, whirlpoolAccountInfo.data);\n\n    this.oracle = findProgramAddressSync([Buffer.from('oracle'), address.toBuffer()], WHIRLPOOL_PROGRAM_ID)[0];\n    this.feePct = new Decimal(this.whirlpoolData.feeRate).div(FEE_RATE_MUL_VALUE);\n    this.tickPks = getTickArrayPks(address, this.whirlpoolData);\n  }\n\n  getAccountsForUpdate(): PublicKey[] {\n    // The tickCurrentIndex is technically behind here, belonging to the last refresh\n    return [this.address, ...this.tickPks];\n  }\n\n  update(accountInfoMap: AccountInfoMap): void {\n    const whirlpoolAccountInfo = accountInfoMap.get(this.address.toBase58());\n    if (!whirlpoolAccountInfo) throw new Error(`Missing ${this.address.toBase58()}`);\n    this.whirlpoolData = parseWhirlpoolSafe(this.address, whirlpoolAccountInfo.data);\n    this.tickPks = getTickArrayPks(this.address, this.whirlpoolData);\n\n    this.tickArrays.clear();\n    for (const tickArrayPk of this.tickPks) {\n      const tickArrayAddress = tickArrayPk.toBase58();\n      const tickArrayAccountInfo = accountInfoMap.get(tickArrayAddress);\n      if (!tickArrayAccountInfo) {\n        // This can happen if we reach an uninitialized tick, and it is likely to occur right now\n        continue;\n      }\n      const tickArray = parseTickArray(tickArrayAccountInfo.data);\n      if (!tickArray) throw new Error(`Could not parse tick array ${tickArrayAddress}`);\n      this.tickArrays.set(tickArrayAddress, tickArray);\n    }\n  }\n\n  getQuote({ sourceMint, destinationMint, amount, swapMode }: QuoteParams): Quote {\n    const swapQuote = getSwapQuote({\n      poolAddress: this.address,\n      whirlpool: this.whirlpoolData,\n      tickArrays: this.tickArrays,\n      tokenMint: swapMode === SwapMode.ExactIn ? sourceMint : destinationMint,\n      tokenAmount: new BN(amount.toString()),\n      isInput: swapMode === SwapMode.ExactIn,\n    });\n\n    const inAmount = JSBI.BigInt(swapQuote.amountIn.toString());\n    const outAmount = JSBI.BigInt(swapQuote.amountOut.toString());\n    const feeAmount = JSBI.BigInt(this.feePct.mul(inAmount.toString()).floor().toString());\n    const quotePrice = swapQuote.aToB\n      ? new Decimal(swapQuote.amountOut.toString()).div(swapQuote.amountIn.toString())\n      : new Decimal(swapQuote.amountIn.toString()).div(swapQuote.amountOut.toString());\n\n    const currentPrice = fromX64(this.whirlpoolData.sqrtPrice).pow(2);\n    const priceImpactPct = currentPrice.minus(quotePrice).div(currentPrice).abs().toNumber();\n\n    return {\n      notEnoughLiquidity: false,\n      inAmount,\n      outAmount,\n      feeAmount,\n      feeMint: sourceMint.toBase58(),\n      feePct: this.feePct.toNumber(),\n      priceImpactPct: Number(priceImpactPct),\n    };\n  }\n\n  createSwapInstructions(swapParams: SwapParams) {\n    const aToB = swapParams.sourceMint.equals(this.whirlpoolData.tokenMintA);\n    const targetSqrtPrice = getDefaultSqrtPriceLimit(aToB);\n    const [tickArray0, tickArray1, tickArray2] = getTickArrayPublicKeysForSwap(\n      this.whirlpoolData.tickCurrentIndex,\n      targetSqrtPrice,\n      this.whirlpoolData.tickSpacing,\n      this.address,\n      this.tickArrays,\n      WHIRLPOOL_PROGRAM_ID,\n      aToB,\n    );\n\n    const ix =\n      swapParams.swapMode === SwapMode.ExactIn\n        ? createWhirlpoolSwapInstruction({\n            additionalArgs: {\n              aToB,\n              whirlpool: this.address,\n              tickArray0,\n              tickArray1,\n              tickArray2,\n              oracle: this.oracle,\n              ...this.whirlpoolData,\n            },\n            ...swapParams,\n            inAmount: swapParams.amount,\n            minimumOutAmount: swapParams.otherAmountThreshold,\n          })\n        : (() => {\n            if (swapParams.amount === null) throw Error('amount cannot be null with exact output');\n\n            return createWhirlpoolSwapExactOutputInstruction({\n              additionalArgs: {\n                aToB,\n                whirlpool: this.address,\n                tickArray0,\n                tickArray1,\n                tickArray2,\n                oracle: this.oracle,\n                ...this.whirlpoolData,\n              },\n              ...swapParams,\n              outAmount: swapParams.amount,\n              maximumInAmount: swapParams.otherAmountThreshold,\n            });\n          })();\n\n    return [ix];\n  }\n\n  get reserveTokenMints() {\n    return [this.whirlpoolData.tokenMintA, this.whirlpoolData.tokenMintB];\n  }\n}\n","// TODO: Move this to SDK rather than being maintained by us\nimport {\n  CyclosCore,\n  buildTick,\n  generateBitmapWord,\n  nextInitializedBit,\n  tickPosition,\n  TickDataProvider,\n  PoolVars,\n  TICK_SEED,\n  u32ToSeed,\n  BITMAP_SEED,\n  TickMath,\n  u16ToSeed,\n} from '@jup-ag/cykura-sdk';\nimport * as anchor from '@project-serum/anchor';\nimport { BN, IdlAccounts } from '@project-serum/anchor';\nimport { findProgramAddressSync } from '@project-serum/anchor/dist/cjs/utils/pubkey';\nimport { AccountInfo, PublicKey } from '@solana/web3.js';\nimport JSBI from 'jsbi';\n\nexport type TickBitmapState = IdlAccounts<CyclosCore>['tickBitmapState'];\nexport type TickState = IdlAccounts<CyclosCore>['tickState'];\n\nexport class SolanaTickDataProvider implements TickDataProvider {\n  program: anchor.Program<CyclosCore>;\n  pool: PoolVars;\n\n  bitmapCache: Map<\n    number,\n    {\n      address: PublicKey;\n      word: anchor.BN;\n    }\n  >;\n\n  tickCache: Map<\n    number,\n    {\n      address: PublicKey;\n      liquidityNet: JSBI;\n    }\n  >;\n\n  accountsToFetch: { bitmaps: PublicKey[]; ticks: PublicKey[] } = { bitmaps: [], ticks: [] };\n\n  constructor(program: anchor.Program<CyclosCore>, pool: PoolVars) {\n    this.program = program;\n    this.pool = pool;\n    this.bitmapCache = new Map();\n    this.tickCache = new Map();\n  }\n\n  /**\n   * Caches ticks and bitmap accounts near the current price\n   * @param tickCurrent The current pool tick\n   * @param tickSpacing The pool tick spacing\n   */\n  async eagerLoadCache(tickCurrent: number, tickSpacing: number) {\n    // fetch 10 bitmaps on each side in a single fetch. Find active ticks and read them together\n    const compressed = JSBI.toNumber(JSBI.divide(JSBI.BigInt(tickCurrent), JSBI.BigInt(tickSpacing)));\n    const { wordPos } = tickPosition(compressed);\n\n    try {\n      const bitmapsToFetch = [];\n      const { wordPos: WORD_POS_MIN } = tickPosition(Math.floor(TickMath.MIN_TICK / tickSpacing));\n      const { wordPos: WORD_POS_MAX } = tickPosition(Math.floor(TickMath.MAX_TICK / tickSpacing));\n      const minWord = Math.max(wordPos - 10, WORD_POS_MIN);\n      const maxWord = Math.min(wordPos + 10, WORD_POS_MAX);\n      for (let i = minWord; i < maxWord; i++) {\n        bitmapsToFetch.push(this.getBitmapAddressSync(i));\n      }\n\n      const fetchedBitmaps = (await this.program.account.tickBitmapState.fetchMultiple(\n        bitmapsToFetch,\n      )) as (TickBitmapState | null)[];\n\n      const tickAddresses = [];\n      for (let i = 0; i < maxWord - minWord; i++) {\n        const currentWordPos = i + minWord;\n        const wordArray = fetchedBitmaps[i]?.word;\n        const word = wordArray ? generateBitmapWord(wordArray) : new BN(0);\n        this.bitmapCache.set(currentWordPos, {\n          address: bitmapsToFetch[i],\n          word,\n        });\n        if (word && !word.eqn(0)) {\n          for (let j = 0; j < 256; j++) {\n            if (word.shrn(j).and(new BN(1)).eqn(1)) {\n              const tick = ((currentWordPos << 8) + j) * tickSpacing;\n              const tickAddress = this.getTickAddressSync(tick);\n              tickAddresses.push(tickAddress);\n            }\n          }\n        }\n      }\n\n      const fetchedTicks = (await this.program.account.tickState.fetchMultiple(tickAddresses)) as (TickState | null)[];\n      for (const i in tickAddresses) {\n        const fetchedTick = fetchedTicks[i];\n        if (!fetchedTick) continue;\n\n        const { tick, liquidityNet } = fetchedTick;\n        this.tickCache.set(tick, {\n          address: tickAddresses[i],\n          liquidityNet: JSBI.BigInt(liquidityNet),\n        });\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  /**\n   * Return accounts to cache and returns early if there is insufficient data\n   * @param tickCurrent The current pool tick\n   * @param tickSpacing The pool tick spacing\n   */\n  lazyLoadAccountsToCache(tickCurrent: number, tickSpacing: number): PublicKey[] {\n    // fetch 10 bitmaps on each side in a single fetch. Find active ticks and read them together\n    const compressed = JSBI.toNumber(JSBI.divide(JSBI.BigInt(tickCurrent), JSBI.BigInt(tickSpacing)));\n    const { wordPos } = tickPosition(compressed);\n\n    const bitmapsToFetch: PublicKey[] = [];\n    const bitmaps: ({ address: PublicKey; word: anchor.BN } | undefined)[] = [];\n    const { wordPos: WORD_POS_MIN } = tickPosition(Math.floor(TickMath.MIN_TICK / tickSpacing));\n    const { wordPos: WORD_POS_MAX } = tickPosition(Math.floor(TickMath.MAX_TICK / tickSpacing));\n    const minWord = Math.max(wordPos - 10, WORD_POS_MIN);\n    const maxWord = Math.min(wordPos + 10, WORD_POS_MAX);\n    for (let i = minWord; i < maxWord; i++) {\n      bitmapsToFetch.push(this.getBitmapAddressSync(i));\n      const bitmap = this.bitmapCache.get(i);\n      bitmaps.push(bitmap);\n    }\n\n    const tickAddressesToFetch = [];\n    for (let i = 0; i < maxWord - minWord; i++) {\n      const currentWordPos = i + minWord;\n      // We might not have the bitmap yet in the first iteration\n      const word = bitmaps[i]?.word ?? new BN(0);\n      this.bitmapCache.set(currentWordPos, {\n        address: bitmapsToFetch[i],\n        word,\n      });\n      if (word && !word.eqn(0)) {\n        for (let j = 0; j < 256; j++) {\n          if (word.shrn(j).and(new BN(1)).eqn(1)) {\n            const tick = ((currentWordPos << 8) + j) * tickSpacing;\n            const tickAddress = this.getTickAddressSync(tick);\n            tickAddressesToFetch.push(tickAddress);\n          }\n        }\n      }\n    }\n\n    this.accountsToFetch = { bitmaps: bitmapsToFetch, ticks: tickAddressesToFetch };\n    return [...bitmapsToFetch, ...tickAddressesToFetch];\n  }\n\n  getTick(tick: number): {\n    address: anchor.web3.PublicKey;\n    liquidityNet: JSBI;\n  } {\n    let savedTick = this.tickCache.get(tick);\n    if (!savedTick) {\n      throw new Error('Tick not cached');\n    }\n\n    return {\n      address: savedTick.address,\n      liquidityNet: savedTick.liquidityNet,\n    };\n  }\n\n  async getTickAddress(tick: number): Promise<anchor.web3.PublicKey> {\n    return this.getTickAddressSync(tick);\n  }\n\n  getTickAddressSync(tick: number): anchor.web3.PublicKey {\n    return findProgramAddressSync(\n      [TICK_SEED, this.pool.token0.toBuffer(), this.pool.token1.toBuffer(), u32ToSeed(this.pool.fee), u32ToSeed(tick)],\n      this.program.programId,\n    )[0];\n  }\n\n  async getBitmapAddress(wordPos: number): Promise<anchor.web3.PublicKey> {\n    return this.getBitmapAddressSync(wordPos);\n  }\n\n  getBitmapAddressSync(wordPos: number): anchor.web3.PublicKey {\n    return findProgramAddressSync(\n      [\n        BITMAP_SEED,\n        this.pool.token0.toBuffer(),\n        this.pool.token1.toBuffer(),\n        u32ToSeed(this.pool.fee),\n        u16ToSeed(wordPos),\n      ],\n      this.program.programId,\n    )[0];\n  }\n\n  /**\n   * Fetches the cached bitmap for the word\n   * @param wordPos\n   */\n  getBitmap(wordPos: number): {\n    address: anchor.web3.PublicKey;\n    word: anchor.BN;\n  } {\n    let savedBitmap = this.bitmapCache.get(wordPos);\n    if (!savedBitmap) {\n      throw new Error('Bitmap not cached');\n    }\n\n    return savedBitmap;\n  }\n\n  /**\n   * Finds the next initialized tick in the given word. Fetched bitmaps are saved in a\n   * cache for quicker lookups in future.\n   * @param tick The current tick\n   * @param lte Whether to look for a tick less than or equal to the current one, or a tick greater than or equal to\n   * @param tickSpacing The tick spacing for the pool\n   * @returns\n   */\n  nextInitializedTickWithinOneWord(\n    tick: number,\n    lte: boolean,\n    tickSpacing: number,\n  ): [number, boolean, number, number, PublicKey] {\n    let compressed = JSBI.toNumber(JSBI.divide(JSBI.BigInt(tick), JSBI.BigInt(tickSpacing)));\n    if (tick < 0 && tick % tickSpacing !== 0) {\n      compressed -= 1;\n    }\n    if (!lte) {\n      compressed += 1;\n    }\n\n    const { wordPos, bitPos } = tickPosition(compressed);\n    const cachedBitmap = this.getBitmap(wordPos);\n\n    const { next: nextBit, initialized } = nextInitializedBit(cachedBitmap.word, bitPos, lte);\n    const nextTick = buildTick(wordPos, nextBit, tickSpacing);\n    return [nextTick, initialized, wordPos, bitPos, cachedBitmap.address];\n  }\n\n  // Change this to be a blind decoder rather than decode what we know\n  updateCachedAccountInfos(accountInfoMap: Map<string, AccountInfo<Buffer> | null>) {\n    for (const bitmapAddress of this.accountsToFetch.bitmaps) {\n      const bitmapAccountInfo = accountInfoMap.get(bitmapAddress.toBase58());\n      if (bitmapAccountInfo) {\n        const tickBitmapState = this.program.coder.accounts.decode<TickBitmapState>(\n          'tickBitmapState',\n          bitmapAccountInfo.data,\n        );\n\n        this.bitmapCache.set(tickBitmapState.wordPos, {\n          address: bitmapAddress,\n          word: generateBitmapWord(tickBitmapState.word),\n        });\n      }\n    }\n\n    for (const tickAddress of this.accountsToFetch.ticks) {\n      const tickStateAccountInfo = accountInfoMap.get(tickAddress.toBase58());\n      if (tickStateAccountInfo) {\n        const tickState = this.program.coder.accounts.decode<TickState>('tickState', tickStateAccountInfo.data);\n        this.tickCache.set(tickState.tick, {\n          address: tickAddress,\n          liquidityNet: JSBI.BigInt(tickState.liquidityNet),\n        });\n      }\n    }\n  }\n}\n","import { AccountInfo, AccountMeta, Connection, PublicKey, TransactionInstruction } from '@solana/web3.js';\nimport JSBI from 'jsbi';\nimport * as anchor from '@project-serum/anchor';\nimport { AccountInfoMap, Amm, Quote, QuoteParams, SwapParams } from '../amm';\nimport { Pool as CykuraPool, CyclosCore, IDL, OBSERVATION_SEED, u32ToSeed, u16ToSeed } from '@jup-ag/cykura-sdk';\nimport { CurrencyAmount, Token } from '@jup-ag/cykura-sdk-core';\nimport { IdlAccounts, Wallet } from '@project-serum/anchor';\nimport { SolanaTickDataProvider } from './solanaTickDataProvider';\nimport { CYKURA_PROGRAM_ID } from '../../constants';\nimport { ASSOCIATED_TOKEN_PROGRAM_ID, TOKEN_PROGRAM_ID } from '@solana/spl-token';\nimport { findProgramAddressSync } from '@project-serum/anchor/dist/cjs/utils/pubkey';\nimport { createCykuraSwapInstruction } from '../jupiterInstruction';\nimport { toDecimal } from '@jup-ag/math';\n\nexport type PoolState = IdlAccounts<CyclosCore>['poolState'];\n\nconst FEE_DENOMINATOR = JSBI.BigInt(1_000_000);\n\nconst provider = new anchor.AnchorProvider(null as unknown as Connection, null as unknown as Wallet, {\n  skipPreflight: false,\n});\nconst CYCLOS_CORE = new anchor.Program<CyclosCore>(IDL, CYKURA_PROGRAM_ID, provider);\n\nexport class CykuraAmm implements Amm {\n  label = 'Cykura' as const;\n  id: string;\n  shouldPrefetch = true;\n  exactOutputSupported = false;\n\n  private poolState: PoolState;\n  private pool: CykuraPool;\n  private tickDataProvider: SolanaTickDataProvider;\n  private tokens: { token0: Token; token1: Token };\n  public vaults: { vault0: PublicKey; vault1: PublicKey };\n  private swapAccountMetas: AccountMeta[] = [];\n  private feePct: number;\n  private fee: JSBI;\n\n  constructor(private address: PublicKey, accountInfoOrPoolState: AccountInfo<Buffer> | PoolState) {\n    this.id = address.toBase58();\n    let poolState: PoolState;\n    if ('data' in accountInfoOrPoolState) {\n      poolState = CYCLOS_CORE.coder.accounts.decode<PoolState>('poolState', accountInfoOrPoolState.data);\n    } else {\n      poolState = accountInfoOrPoolState;\n    }\n\n    this.poolState = poolState;\n\n    const { token0, token1, fee, sqrtPriceX32, liquidity, tick } = this.poolState;\n\n    this.tickDataProvider = new SolanaTickDataProvider(CYCLOS_CORE, {\n      token0,\n      token1,\n      fee,\n    });\n\n    this.tokens = {\n      token0: new Token(101, token0, 0, '', ''),\n      token1: new Token(101, token1, 0, '', ''),\n    };\n\n    this.pool = new CykuraPool(\n      this.tokens.token0,\n      this.tokens.token1,\n      fee,\n      JSBI.BigInt(sqrtPriceX32.toString()),\n      JSBI.BigInt(liquidity.toString()),\n      tick,\n      this.tickDataProvider,\n    );\n\n    this.vaults = {\n      vault0: findProgramAddressSync(\n        [this.address.toBuffer(), TOKEN_PROGRAM_ID.toBuffer(), token0.toBuffer()],\n        ASSOCIATED_TOKEN_PROGRAM_ID,\n      )[0],\n      vault1: findProgramAddressSync(\n        [this.address.toBuffer(), TOKEN_PROGRAM_ID.toBuffer(), token1.toBuffer()],\n        ASSOCIATED_TOKEN_PROGRAM_ID,\n      )[0],\n    };\n\n    this.fee = JSBI.BigInt(this.poolState.fee);\n    this.feePct = this.poolState.fee / JSBI.toNumber(FEE_DENOMINATOR);\n  }\n\n  getAccountsForUpdate(): PublicKey[] {\n    return [\n      this.address,\n      ...this.tickDataProvider.lazyLoadAccountsToCache(this.pool.tickCurrent, this.pool.tickSpacing),\n    ];\n  }\n\n  update(accountInfoMap: AccountInfoMap) {\n    const poolAccountInfo = accountInfoMap.get(this.address.toBase58());\n    if (!poolAccountInfo) {\n      throw new Error(`Could not find poolAccountInfo ${this.address.toBase58()}`);\n    }\n    this.poolState = CYCLOS_CORE.coder.accounts.decode<PoolState>('poolState', poolAccountInfo.data);\n    const { fee, sqrtPriceX32, liquidity, tick } = this.poolState;\n    this.pool = new CykuraPool(\n      this.tokens.token0,\n      this.tokens.token1,\n      fee,\n      JSBI.BigInt(sqrtPriceX32.toString()),\n      JSBI.BigInt(liquidity.toString()),\n      tick,\n      this.tickDataProvider,\n    );\n\n    this.tickDataProvider.updateCachedAccountInfos(accountInfoMap);\n  }\n\n  getQuote({ sourceMint, amount }: QuoteParams): Quote {\n    const inputToken = sourceMint.equals(this.poolState.token0) ? this.tokens.token0 : this.tokens.token1;\n    const [currentOutAmount, newPool, swapAccountMetas] = this.pool.getOutputAmount(\n      CurrencyAmount.fromRawAmount(inputToken, amount),\n    );\n    this.swapAccountMetas = swapAccountMetas;\n\n    const priceImpactDecimal = toDecimal(JSBI.subtract(this.pool.sqrtRatioX32, newPool.sqrtRatioX32)).div(\n      this.pool.sqrtRatioX32.toString(),\n    );\n\n    return {\n      notEnoughLiquidity: false,\n      inAmount: amount,\n      outAmount: currentOutAmount.quotient,\n      // Might not be spot on but avoids many conversions\n      feeAmount: JSBI.divide(JSBI.multiply(amount, this.fee), FEE_DENOMINATOR),\n      feeMint: sourceMint.toBase58(),\n      feePct: this.feePct,\n      priceImpactPct: priceImpactDecimal.toNumber(),\n    };\n  }\n\n  createSwapInstructions(swapParams: SwapParams): TransactionInstruction[] {\n    const [inputVault, outputVault] = swapParams.sourceMint.equals(this.poolState.token0)\n      ? [this.vaults.vault0, this.vaults.vault1]\n      : [this.vaults.vault1, this.vaults.vault0];\n\n    const lastObservationState = findProgramAddressSync(\n      [\n        OBSERVATION_SEED,\n        this.poolState.token0.toBuffer(),\n        this.poolState.token1.toBuffer(),\n        u32ToSeed(this.poolState.fee),\n        u16ToSeed(this.poolState.observationIndex),\n      ],\n      CYKURA_PROGRAM_ID,\n    )[0];\n\n    const nextObservationState = findProgramAddressSync(\n      [\n        OBSERVATION_SEED,\n        this.poolState.token0.toBuffer(),\n        this.poolState.token1.toBuffer(),\n        u32ToSeed(this.poolState.fee),\n        u16ToSeed((this.poolState.observationIndex + 1) % this.poolState.observationCardinalityNext),\n      ],\n      CYKURA_PROGRAM_ID,\n    )[0];\n\n    const additionalArgs = {\n      poolAddress: this.address,\n      inputVault,\n      outputVault,\n      nextObservationState,\n      lastObservationState,\n      swapAccountMetas: this.swapAccountMetas,\n    };\n    return [\n      createCykuraSwapInstruction({\n        ...swapParams,\n        inAmount: swapParams.amount,\n        minimumOutAmount: swapParams.otherAmountThreshold,\n        additionalArgs,\n      }),\n    ];\n  }\n\n  get reserveTokenMints() {\n    return [this.poolState.token0, this.poolState.token1];\n  }\n}\n","import BN from 'bn.js';\n\n/**\n * Compute a linear fee base on liquidity amount.\n * fee(0) = max fee -> fee(x >= target) = min fee\n *\n * @param {number} lpMinFeeBasisPoints\n * @param {number} lpMaxFeeBasisPoints\n * @param {BN} lpLiquidityTarget\n * @param {BN} lamportsAvailable\n * @param {BN} lamportsToObtain\n */\nexport function unstakeNowFeeBp(\n  lpMinFeeBasisPoints: number,\n  lpMaxFeeBasisPoints: number,\n  lpLiquidityTarget: BN,\n  lamportsAvailable: BN,\n  lamportsToObtain: BN,\n): number {\n  // if trying to get more than existing\n  if (lamportsToObtain.gte(lamportsAvailable)) {\n    return lpMaxFeeBasisPoints;\n  }\n  // result after operation\n  const lamportsAfter = lamportsAvailable.sub(lamportsToObtain);\n  // if GTE target => min fee\n  if (lamportsAfter.gte(lpLiquidityTarget)) {\n    return lpMinFeeBasisPoints;\n  } else {\n    const delta = lpMaxFeeBasisPoints - lpMinFeeBasisPoints;\n    return lpMaxFeeBasisPoints - proportionalBN(new BN(delta), lamportsAfter, lpLiquidityTarget).toNumber();\n  }\n}\n\n/**\n * Returns `amount` * `numerator` / `denominator`.\n * BN library we use does not handle fractions, so the value is `floored`\n *\n * @param {BN} amount\n * @param {BN} numerator\n * @param {BN} denominator\n */\nexport function proportionalBN(amount: BN, numerator: BN, denominator: BN): BN {\n  if (denominator.isZero()) {\n    return amount;\n  }\n  return amount.mul(numerator).div(denominator);\n}\n","import { AccountInfo, PublicKey, TransactionInstruction } from '@solana/web3.js';\nimport { AccountInfoMap, Amm, mapAddressToAccountInfos, Quote, QuoteParams, SwapParams } from '../amm';\nimport {\n  createMarinadeFinanceDepositInstruction,\n  createMarinadeFinanceLiquidUnstakeInstruction,\n} from '../jupiterInstruction';\nimport { deserializeAccount } from '@mercurial-finance/optimist';\nimport { NATIVE_MINT } from '@solana/spl-token';\nimport BN from 'bn.js';\nimport { Idl, Program } from '@project-serum/anchor';\nimport * as marinadeFinanceIdlSchema from './idl/marinade-finance-idl.json';\nimport { MarinadeStateResponse, ProgramDerivedAddressSeed } from './marinade-state.types';\nimport { findProgramAddressSync } from '@project-serum/anchor/dist/cjs/utils/pubkey';\nimport { proportionalBN, unstakeNowFeeBp } from './helpers';\nimport { MARINADE_PROGRAM_ID } from '../../constants';\nimport JSBI from 'jsbi';\n\nexport class MarinadeAmm implements Amm {\n  address: PublicKey;\n  id: string;\n  label = 'Marinade';\n  shouldPrefetch = true; // Pricing is very state dependent and using stale data will lead to a stale quote\n  exactOutputSupported = false;\n\n  marinadeFinanceProgram: Program;\n  marinadeStateResponse: MarinadeStateResponse;\n  liqPoolSolLegPdaAddress: PublicKey;\n  marinadeState: MarinadeState | undefined;\n\n  constructor(address: PublicKey, accountInfo: AccountInfo<Buffer>) {\n    this.id = address.toBase58();\n    this.marinadeFinanceProgram = new Program(marinadeFinanceIdlSchema as Idl, MARINADE_PROGRAM_ID, {} as any);\n    this.marinadeStateResponse = this.marinadeFinanceProgram.coder.accounts.decode('State', accountInfo.data);\n    this.address = address;\n\n    this.liqPoolSolLegPdaAddress = this.findProgramDerivedAddress(ProgramDerivedAddressSeed.LIQ_POOL_SOL_ACCOUNT);\n  }\n\n  getAccountsForUpdate(): PublicKey[] {\n    return [this.address, this.liqPoolSolLegPdaAddress, this.marinadeStateResponse.liqPool.msolLeg];\n  }\n\n  update(accountInfoMap: AccountInfoMap) {\n    const [stateAccountInfo, liqPoolSolLegPda, liqPoolMSOLLegAccountInfo] = mapAddressToAccountInfos(\n      accountInfoMap,\n      this.getAccountsForUpdate(),\n    );\n\n    this.marinadeStateResponse = this.marinadeFinanceProgram.coder.accounts.decode('State', stateAccountInfo.data);\n    const liqPoolMSOLLeg = deserializeAccount(liqPoolMSOLLegAccountInfo.data);\n    if (!liqPoolMSOLLeg)\n      throw new Error(\n        `liqPoolMSOLLeg token account cannot be deserialized ${this.marinadeStateResponse.liqPool.msolLeg.toBase58()}`,\n      );\n\n    this.marinadeState = new MarinadeState(\n      this.marinadeStateResponse,\n      new BN(liqPoolSolLegPda.lamports),\n      liqPoolMSOLLeg.amount,\n    );\n  }\n\n  getQuote({ sourceMint, amount }: QuoteParams): Quote {\n    if (!this.marinadeState) throw new Error('Update was not run to create a complete marinadeState');\n\n    const amountBN = new BN(amount.toString());\n    const result = sourceMint.equals(NATIVE_MINT)\n      ? this.marinadeState.depositQuote(amountBN)\n      : this.marinadeState.liquidUnstakeQuote(amountBN);\n\n    return {\n      notEnoughLiquidity: false,\n      inAmount: amount,\n      outAmount: JSBI.BigInt(result.outAmount.toString()),\n      feeAmount: JSBI.BigInt(result.feeAmount.toString()),\n      feeMint: this.marinadeStateResponse.msolMint.toBase58(),\n      feePct: result.feePct,\n      priceImpactPct: 0,\n    };\n  }\n\n  createSwapInstructions(swapParams: SwapParams): TransactionInstruction[] {\n    return [\n      swapParams.sourceMint.equals(NATIVE_MINT)\n        ? createMarinadeFinanceDepositInstruction({\n            additionalArgs: {\n              address: this.address,\n              marinadeStateResponse: this.marinadeStateResponse,\n              liqPoolSolLegPda: this.liqPoolSolLegPdaAddress,\n              liqPoolMsolLegAuthority: this.findProgramDerivedAddress(\n                ProgramDerivedAddressSeed.LIQ_POOL_MSOL_AUTHORITY,\n              ),\n              reservePda: this.findProgramDerivedAddress(ProgramDerivedAddressSeed.RESERVE_ACCOUNT),\n              msolMintAuthority: this.findProgramDerivedAddress(ProgramDerivedAddressSeed.LIQ_POOL_MSOL_MINT_AUTHORITY),\n            },\n            inAmount: swapParams.amount,\n            minimumOutAmount: swapParams.otherAmountThreshold,\n            ...swapParams,\n          })\n        : createMarinadeFinanceLiquidUnstakeInstruction({\n            additionalArgs: {\n              address: this.address,\n              marinadeStateResponse: this.marinadeStateResponse,\n              liqPoolSolLegPda: this.liqPoolSolLegPdaAddress,\n            },\n            inAmount: swapParams.amount,\n            minimumOutAmount: swapParams.otherAmountThreshold,\n            ...swapParams,\n          }),\n    ];\n  }\n\n  get reserveTokenMints() {\n    return [NATIVE_MINT, this.marinadeStateResponse.msolMint];\n  }\n\n  private findProgramDerivedAddress(seed: ProgramDerivedAddressSeed, extraSeeds: Buffer[] = []): PublicKey {\n    const seeds = [this.address.toBuffer(), Buffer.from(seed), ...extraSeeds];\n    const [result] = findProgramAddressSync(seeds, this.marinadeFinanceProgram.programId);\n    return result;\n  }\n}\n\nclass MarinadeState {\n  constructor(\n    private state: MarinadeStateResponse,\n    private liqPoolSolLegPdaLamports: BN,\n    private liqPoolMSOLLegAmount: BN,\n  ) {}\n\n  // https://github.com/marinade-finance/liquid-staking-program/blob/main/programs/marinade-finance/src/state/deposit.rs#L61-L170\n  depositQuote(lamports: BN) {\n    let userLamports = lamports;\n    const userMSOLBuyOrder = this.calcMSOLFromLamports(userLamports);\n    const swapMSOLMax = BN.min(userMSOLBuyOrder, this.liqPoolMSOLLegAmount);\n\n    let outAmountBN = new BN(0);\n\n    // if we can sell from the LiqPool\n    userLamports = (() => {\n      if (swapMSOLMax.gt(new BN(0))) {\n        const lamportsForTheLiqPool = userMSOLBuyOrder.eq(swapMSOLMax)\n          ? userLamports\n          : this.calcLamportsFromMSOLAmount(swapMSOLMax);\n\n        // transfered mSOL to the user\n        outAmountBN = outAmountBN.add(swapMSOLMax);\n\n        return saturatingSub(userLamports, lamportsForTheLiqPool);\n      } else {\n        return userLamports;\n      }\n    })();\n\n    // check if we have more lamports from the user\n    if (userLamports.gt(new BN(0))) {\n      this.checkStakingCap(userLamports);\n      const MSOLToMint = this.calcMSOLFromLamports(userLamports);\n      outAmountBN = outAmountBN.add(MSOLToMint);\n    }\n\n    return {\n      outAmount: outAmountBN,\n      feeAmount: 0,\n      feePct: 0,\n      priceImpactPct: 0,\n    };\n  }\n\n  private checkStakingCap(transferingLamports: BN) {\n    const resultAmount = this.totalLamportsUnderControl().add(transferingLamports);\n\n    if (resultAmount.gt(this.state.stakingSolCap)) throw new Error('Staking cap reached');\n  }\n\n  private calcMSOLFromLamports(stakeLamports: BN) {\n    return sharesFromValue(stakeLamports, this.totalVirtualStakedLamports(), this.state.msolSupply);\n  }\n\n  private calcLamportsFromMSOLAmount(msolAmount: BN) {\n    return valueFromShares(msolAmount, this.totalVirtualStakedLamports(), this.state.msolSupply);\n  }\n\n  private totalVirtualStakedLamports() {\n    return saturatingSub(this.totalLamportsUnderControl(), this.state.circulatingTicketBalance);\n  }\n\n  private totalLamportsUnderControl() {\n    return this.state.validatorSystem.totalActiveBalance\n      .add(this.totalCoolingDown())\n      .add(this.state.availableReserveBalance);\n  }\n\n  private totalCoolingDown() {\n    return this.state.stakeSystem.delayedUnstakeCoolingDown.add(this.state.emergencyCoolingDown);\n  }\n\n  // https://github.com/marinade-finance/liquid-staking-program/blob/main/programs/marinade-finance/src/state/liquid_unstake.rs#L68-L171\n  liquidUnstakeQuote(msolAmount: BN) {\n    const maxLamports = saturatingSub(this.liqPoolSolLegPdaLamports, this.state.rentExemptForTokenAcc);\n\n    const lamportsToObtain = this.calcLamportsFromMSOLAmount(msolAmount);\n    const liquidUnstakeFeeBp = unstakeNowFeeBp(\n      this.state.liqPool.lpMinFee.basisPoints,\n      this.state.liqPool.lpMaxFee.basisPoints,\n      this.state.liqPool.lpLiquidityTarget,\n      maxLamports,\n      lamportsToObtain,\n    );\n\n    const msolFee = msolAmount.mul(new BN(liquidUnstakeFeeBp)).div(new BN(10_000));\n    const workingLamportsValue = this.calcLamportsFromMSOLAmount(msolAmount.sub(msolFee));\n    if (workingLamportsValue.add(this.state.rentExemptForTokenAcc).gt(this.liqPoolSolLegPdaLamports))\n      throw new Error('Insufficient liquidity');\n\n    return {\n      outAmount: workingLamportsValue,\n      feeAmount: msolFee,\n      feePct: liquidUnstakeFeeBp / 10_000,\n      priceImpactPct: 0,\n    };\n  }\n}\nfunction valueFromShares(shares: BN, totalValue: BN, totalShares: BN) {\n  return proportionalBN(shares, totalValue, totalShares);\n}\n\nfunction sharesFromValue(value: BN, totalValue: BN, totalShares: BN) {\n  return totalShares.eq(new BN(0)) ? value : proportionalBN(value, totalShares, totalValue);\n}\n\nfunction saturatingSub(left: BN, right: BN): BN {\n  return left.gt(right) ? left.sub(right) : new BN(0);\n}\n","import { AccountInfo, PublicKey } from '@solana/web3.js';\nimport {\n  ALDRIN_SWAP_V2_PROGRAM_ID,\n  ALDRIN_SWAP_PROGRAM_ID,\n  DEVNET_SERUM_DEX_PROGRAM,\n  MAINNET_SERUM_DEX_PROGRAM,\n  RAYDIUM_AMM_V4_PROGRAM_ID,\n  CROPPER_PROGRAM_ID,\n  CREMA_PROGRAM_ID,\n  SENCHA_PROGRAM_ID,\n  MERCURIAL_SWAP_PROGRAM_ID,\n  LIFINITY_PROGRAM_ID,\n  WHIRLPOOL_PROGRAM_ID,\n  CYKURA_PROGRAM_ID,\n  MARINADE_PROGRAM_ID,\n} from '../constants';\nimport { Amm } from './amm';\nimport { SerumMarket, StableSwap } from './market';\nimport { SWAP_PROGRAM_ID as SABER_SWAP_PROGRAM_ID } from '@saberhq/stableswap-sdk';\nimport { SaberAmm } from './saber/saberAmm';\nimport { SerumAmm } from './serum/serumAmm';\nimport { findProgramAddressSync } from '@project-serum/anchor/dist/cjs/utils/pubkey';\nimport { AldrinAmm } from './aldrin/aldrinAmm';\nimport { PROGRAM_ID_TO_LABEL } from './spl-token-swap/splTokenSwapPools';\nimport { SplTokenSwapAmm } from './spl-token-swap/splTokenSwapAmm';\nimport { MercurialAmm } from './mercurial/mercurialAmm';\nimport { RaydiumAmm } from './raydium/raydiumAmm';\nimport { CropperAmm } from './cropper/cropperAmm';\nimport { CremaAmm } from './crema/cremaAmm';\nimport { SenchaAmm } from './sencha/senchaAmm';\nimport { LifinityAmm } from './lifinity/lifinityAmm';\nimport { WhirlpoolAmm } from './whirlpool/whirlpoolAmm';\nimport { CykuraAmm } from './cykura/cykuraAmm';\nimport { MarinadeAmm } from './marinade/marinadeAmm';\n\nexport function ammFactory(address: PublicKey, accountInfo: AccountInfo<Buffer>, params?: any): Amm | undefined {\n  const programId = new PublicKey(accountInfo.owner);\n\n  if (programId.equals(MAINNET_SERUM_DEX_PROGRAM) || programId.equals(DEVNET_SERUM_DEX_PROGRAM)) {\n    const decoded = SerumMarket.getLayout(programId).decode(accountInfo.data);\n    if (!decoded.accountFlags.initialized || !decoded.accountFlags.market) {\n      throw new Error('Invalid market');\n    }\n    const serumMarket = new SerumMarket(decoded, 0, 0, {}, programId);\n    return new SerumAmm(serumMarket);\n  } else if (programId.equals(RAYDIUM_AMM_V4_PROGRAM_ID)) {\n    const raydiumAmm = new RaydiumAmm(address, accountInfo, params);\n    if (raydiumAmm.status === 1) {\n      return raydiumAmm;\n    }\n  } else if (programId.equals(MERCURIAL_SWAP_PROGRAM_ID)) {\n    return new MercurialAmm(address, accountInfo, params);\n  } else if (programId.equals(SABER_SWAP_PROGRAM_ID)) {\n    const stableSwap = StableSwap.loadWithData(\n      address,\n      accountInfo.data,\n      findProgramAddressSync([address.toBuffer()], SABER_SWAP_PROGRAM_ID)[0],\n    );\n\n    if (stableSwap.state.isPaused || !stableSwap.state.isInitialized) return;\n\n    return new SaberAmm(stableSwap);\n  } else if (programId.equals(CREMA_PROGRAM_ID)) {\n    return new CremaAmm(address, accountInfo);\n  } else if (programId.equals(ALDRIN_SWAP_PROGRAM_ID) || programId.equals(ALDRIN_SWAP_V2_PROGRAM_ID)) {\n    return new AldrinAmm(address, accountInfo, params);\n  } else if ([...PROGRAM_ID_TO_LABEL.keys()].includes(programId.toBase58())) {\n    const label = PROGRAM_ID_TO_LABEL.get(accountInfo.owner.toBase58()) ?? 'Unknown';\n    return new SplTokenSwapAmm(address, accountInfo, label);\n  } else if (programId.equals(CROPPER_PROGRAM_ID)) {\n    return new CropperAmm(address, accountInfo, params);\n  } else if (programId.equals(SENCHA_PROGRAM_ID)) {\n    const senchaAmm = new SenchaAmm(address, accountInfo);\n    if (senchaAmm.isPaused) return;\n    return senchaAmm;\n  } else if (programId.equals(LIFINITY_PROGRAM_ID)) {\n    return new LifinityAmm(address, accountInfo);\n  } else if (programId.equals(WHIRLPOOL_PROGRAM_ID)) {\n    return new WhirlpoolAmm(address, accountInfo);\n  } else if (programId.equals(CYKURA_PROGRAM_ID)) {\n    return new CykuraAmm(address, accountInfo);\n  } else if (programId.equals(MARINADE_PROGRAM_ID)) {\n    return new MarinadeAmm(address, accountInfo);\n  }\n  // Not supported by frontend\n  return;\n}\n","import { AccountInfo, Connection, PublicKey } from '@solana/web3.js';\nimport { isValidRoute, MarketInfo } from './market';\nimport { MIN_SEGMENT_SIZE_FOR_INTERMEDIATE_MINTS } from '../constants';\nimport { RaydiumAmm } from './raydium/raydiumAmm';\nimport fetch from 'cross-fetch';\nimport { TokenRouteSegments } from './types';\nimport { Amm, prefetchAmms, SwapMode } from './amm';\nimport { SerumAmm } from './serum/serumAmm';\nimport { ammFactory } from './ammFactory';\nimport { getSaberWrappedDecimalsAmms } from './saber/saberAddDecimalsAmm';\nimport { SplitTradeAmm } from './split-trade/splitTradeAmm';\nimport { getTwoPermutations } from '../utils/getTwoPermutations';\nimport { chunkedGetMultipleAccountInfos } from '../utils/chunkedGetMultipleAccountInfos';\nimport { WhirlpoolAmm } from './jupiter';\nimport JSBI from 'jsbi';\n\nexport interface TransactionFeeInfo {\n  signatureFee: number;\n  openOrdersDeposits: number[];\n  ataDeposits: number[];\n  /* Overall amount that will be deducted from user wallet after the swap */\n  totalFeeAndDeposits: number;\n  /* Amount for fee, deposits and temporary token accounts */\n  minimumSOLForTransaction: number;\n}\n\nexport interface RouteInfo {\n  marketInfos: MarketInfo[];\n  inAmount: JSBI;\n  outAmount: JSBI;\n  amount: JSBI; // The target amount, expect input or expect output\n  otherAmountThreshold: JSBI;\n  swapMode: SwapMode;\n  priceImpactPct: number;\n  getDepositAndFee: () => Promise<TransactionFeeInfo | undefined>;\n}\n\ntype MarketsCache = Array<\n  Omit<AccountInfo<Buffer>, 'data' | 'owner'> & {\n    data: [string, 'base64'];\n    owner: string;\n    pubkey: string;\n  }\n>;\n\ntype KeyedAccountInfo = AccountInfo<Buffer> & {\n  pubkey: PublicKey;\n  // api can pass some extra params\n  params?: any;\n};\n\nexport const fetchMarketCache = async (url: string) => {\n  const marketsCache = (await (await fetch(url)).json()) as MarketsCache;\n  return marketsCache;\n};\n\n/** For testing purposes when api does not have the new pools */\nexport async function fetchExtraKeyedAccountInfos(connection: Connection, pks: PublicKey[]) {\n  const extraKeyedAccountInfos = (\n    await chunkedGetMultipleAccountInfos(\n      connection,\n      pks.map((item) => item.toBase58()),\n    )\n  ).map((item, index) => {\n    const pubkey = pks[index];\n    if (!item) throw new Error(`Failed to fetch pool ${pubkey.toBase58()}`);\n    return { pubkey, ...item };\n  });\n  return extraKeyedAccountInfos;\n}\n\nexport async function getAllAmms(connection: Connection, marketsCache: MarketsCache): Promise<Amm[]> {\n  const marketCacheToAccountInfo = (marketsCache: MarketsCache): Array<KeyedAccountInfo> => {\n    return marketsCache.map((market) => {\n      const {\n        data: [accountInfo, format],\n        pubkey,\n        ...rest\n      } = market;\n      return {\n        ...rest,\n        pubkey: new PublicKey(pubkey),\n        data: Buffer.from(accountInfo, format),\n        owner: new PublicKey(rest.owner),\n      };\n    });\n  };\n\n  const marketKeyedAccountInfos = marketCacheToAccountInfo(marketsCache);\n\n  // this is used for development\n  const extraKeys: Array<PublicKey> = [];\n\n  if (extraKeys.length) {\n    const extraKeyedAccountInfos = await fetchExtraKeyedAccountInfos(connection, extraKeys);\n    marketKeyedAccountInfos.push(...extraKeyedAccountInfos);\n  }\n\n  const amms = marketKeyedAccountInfos.reduce((acc, keyedAccountInfo) => {\n    const amm = ammFactory(keyedAccountInfo.pubkey, keyedAccountInfo, keyedAccountInfo.params);\n    // Amm might not be recognized by the current version of the frontend\n    // or be in a state we don't want\n    if (amm) {\n      acc.push(amm);\n    }\n    return acc;\n  }, new Array<Amm>());\n\n  await prefetchAmms(\n    amms.filter((amm) => amm.shouldPrefetch),\n    connection,\n  );\n\n  amms.push(...getSaberWrappedDecimalsAmms());\n\n  return amms;\n}\n\nexport function ammCrossProtocolPairs(arr: Amm[], callback: (a: Amm, b: Amm) => void) {\n  for (let i = 0; i < arr.length; i++) {\n    for (let j = i + 1; j < arr.length; j++) {\n      // Don't pair amm with same label\n      if (arr[i].label !== arr[j].label) {\n        callback(arr[i], arr[j]);\n      }\n    }\n  }\n}\n\nexport function getTokenRouteSegments(amms: Amm[]): TokenRouteSegments {\n  const tokenRouteSegments = new Map<string, Map<string, Amm[]>>();\n\n  amms.forEach((amm) => {\n    const reserveTokenMintPermutations = getTwoPermutations(amm.reserveTokenMints);\n    reserveTokenMintPermutations.forEach(([firstReserveMint, secondReserveMint]) => {\n      addSegment(firstReserveMint.toBase58(), secondReserveMint.toBase58(), amm, tokenRouteSegments);\n    });\n  });\n\n  return tokenRouteSegments;\n}\n\nfunction addSegment(inMint: string, outMint: string, amm: Amm, tokenRouteSegments: TokenRouteSegments) {\n  let segments = tokenRouteSegments.get(inMint);\n\n  if (!segments) {\n    segments = new Map<string, Amm[]>([[outMint, []]]);\n    tokenRouteSegments.set(inMint, segments);\n  }\n\n  let amms = segments.get(outMint);\n  if (!amms) {\n    amms = [];\n    segments.set(outMint, amms);\n  }\n\n  amms.push(amm);\n}\n\nexport type Route = {\n  amms: Amm[];\n  mints: PublicKey[];\n};\n\n/*\n * Construct TokenRouteSegment that is only used for the selected inputMint and outputMint\n * Example:\n *   SOL => USDC, the map would consist of\n *     - SOL => USDC => Amm[]\n *     - SOL => USDT => Amm[]\n *     - USDT => SOL => Amm[]\n */\nexport function computeInputRouteSegments({\n  inputMint,\n  outputMint,\n  tokenRouteSegments,\n  intermediateTokens,\n  swapMode,\n  onlyDirectRoutes,\n}: {\n  inputMint: string;\n  outputMint: string;\n  tokenRouteSegments: TokenRouteSegments;\n  intermediateTokens?: string[];\n  swapMode: SwapMode;\n  onlyDirectRoutes?: boolean;\n}): TokenRouteSegments {\n  const inputRouteSegments: TokenRouteSegments = new Map();\n\n  const inputSegment = tokenRouteSegments.get(inputMint);\n  const outputSegment = tokenRouteSegments.get(outputMint);\n\n  if (inputSegment && outputSegment) {\n    const minSegmentSize = Math.min(inputSegment.size, outputSegment.size);\n    // this is used to minimize the looping part\n    // if SOL => MER, SOL has 100 keys but MER has 6 keys so only the first 6 loops are required always\n    const shouldStartWithInputSegment = inputSegment.size < outputSegment.size;\n\n    const inputInnerMap = new Map<string, Amm[]>();\n    const outputInnerMap = new Map<string, Amm[]>();\n    let [startSegment, endSegment, startMint, endMint] = shouldStartWithInputSegment\n      ? [inputSegment, outputSegment, inputMint, outputMint]\n      : [outputSegment, inputSegment, outputMint, inputMint];\n\n    for (let [mint, amms] of startSegment.entries()) {\n      let filteredAmms = swapMode === SwapMode.ExactIn ? amms : amms.filter((amm) => amm.exactOutputSupported);\n\n      if (mint === endMint) {\n        inputInnerMap.set(mint, filteredAmms);\n        outputInnerMap.set(startMint, filteredAmms);\n        continue;\n      }\n\n      if (\n        onlyDirectRoutes ||\n        swapMode === SwapMode.ExactOut ||\n        shouldSkipOutputMint(intermediateTokens, minSegmentSize, mint)\n      ) {\n        continue;\n      }\n\n      const intersectionAmms = endSegment.get(mint);\n      if (intersectionAmms) {\n        let filteredIntersectionAmms =\n          swapMode === SwapMode.ExactIn ? intersectionAmms : intersectionAmms.filter((amm) => amm.exactOutputSupported);\n\n        inputRouteSegments.set(\n          mint,\n          new Map([\n            [startMint, filteredAmms],\n            [endMint, filteredIntersectionAmms],\n          ]),\n        );\n        inputInnerMap.set(mint, filteredAmms);\n        outputInnerMap.set(mint, filteredIntersectionAmms);\n      }\n    }\n    inputRouteSegments.set(startMint, inputInnerMap);\n    inputRouteSegments.set(endMint, outputInnerMap);\n  }\n\n  return inputRouteSegments;\n}\n\nexport function computeRouteMap(\n  tokenRouteSegments: TokenRouteSegments,\n  intermediateTokens?: string[],\n  onlyDirectRoutes?: boolean,\n): Map<string, string[]> {\n  const routeMap = new Map<string, string[]>();\n\n  for (const [tokenMint, firstLevelOutputs] of tokenRouteSegments) {\n    const validOutputMints = new Set<string>();\n\n    for (const [firstLevelOutputMint, firstLevelAmms] of firstLevelOutputs) {\n      validOutputMints.add(firstLevelOutputMint);\n\n      if (onlyDirectRoutes) {\n        continue;\n      }\n      // add the single level output as possible valid mints as well\n      const secondLevelOutputs = tokenRouteSegments.get(firstLevelOutputMint) ?? new Map<string, Amm[]>();\n\n      for (const [secondLevelOutputMint, secondLevelAmms] of secondLevelOutputs) {\n        // Prevent output mint == input mint when routing\n        if (secondLevelOutputMint === tokenMint) {\n          continue;\n        }\n\n        const outputMintSize = tokenRouteSegments.get(secondLevelOutputMint)?.size ?? 0;\n        const minSegmentSize = Math.min(firstLevelOutputs.size, outputMintSize);\n\n        // if intermediateTokens is specified and it doesnt include in the intermediateTokens, skip it\n        if (shouldSkipOutputMint(intermediateTokens, minSegmentSize, firstLevelOutputMint)) {\n          continue;\n        }\n\n        for (const firstLevelAmm of firstLevelAmms) {\n          for (const secondLevelAmm of secondLevelAmms) {\n            if (isValidRoute(firstLevelAmm, secondLevelAmm)) {\n              validOutputMints.add(secondLevelOutputMint);\n              break;\n            }\n          }\n        }\n      }\n    }\n    routeMap.set(tokenMint, Array.from(validOutputMints));\n  }\n\n  return routeMap;\n}\n\ninterface SplitTradeRequiredParams {\n  hasSerumOpenOrderInstruction: boolean;\n}\n\nfunction shouldSkipOutputMint(\n  intermediateTokens: string[] | undefined,\n  minSegmentSize: number,\n  outputMint: string,\n): boolean {\n  return Boolean(\n    intermediateTokens &&\n      minSegmentSize > MIN_SEGMENT_SIZE_FOR_INTERMEDIATE_MINTS &&\n      !intermediateTokens.includes(outputMint),\n  );\n}\n\nexport function isSplitSetupRequired(\n  marketInfos: MarketInfo[],\n  { hasSerumOpenOrderInstruction }: SplitTradeRequiredParams,\n): { needSetup: boolean; needCleanup: boolean } {\n  let firstAmm: Amm;\n  let secondAmm: Amm;\n\n  if (marketInfos.length === 1) {\n    const amm = marketInfos[0].amm;\n    if (amm instanceof SplitTradeAmm) {\n      firstAmm = amm.firstAmm;\n      secondAmm = amm.secondAmm;\n    } else {\n      return { needSetup: false, needCleanup: false };\n    }\n  } else {\n    [firstAmm, secondAmm] = marketInfos.map((marketInfo) => marketInfo.amm);\n  }\n\n  if (firstAmm instanceof RaydiumAmm || secondAmm instanceof RaydiumAmm) {\n    return { needSetup: true, needCleanup: true };\n  } else if (firstAmm instanceof SerumAmm && secondAmm instanceof SerumAmm) {\n    return { needSetup: true, needCleanup: true };\n  } else if (hasSerumOpenOrderInstruction) {\n    return { needSetup: true, needCleanup: false };\n  }\n\n  return { needSetup: false, needCleanup: false };\n}\n\n// We cannot add platform fee to all possible routing due to transaction size limit\nexport function isPlatformFeeSupported(swapMode: SwapMode, amms: Amm[]): boolean {\n  if (swapMode === SwapMode.ExactOut) return false;\n\n  if (amms.length > 1) {\n    const [firstMarket, secondMarket] = amms;\n\n    if (firstMarket instanceof RaydiumAmm && secondMarket instanceof RaydiumAmm) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function getRouteInfoUniqueId(routeInfo: RouteInfo) {\n  return routeInfo.marketInfos.map((marketInfo) => `${marketInfo.amm.id}-${marketInfo.inputMint}`).join('-');\n}\n","import { Signer, Transaction, TransactionInstruction, TransactionSignature } from '@solana/web3.js';\n\nexport const getEmptyInstruction: () => Instruction = () => ({\n  instructions: [],\n  cleanupInstructions: [],\n  signers: [],\n});\n\nexport type Instruction = {\n  instructions: TransactionInstruction[];\n  cleanupInstructions: TransactionInstruction[];\n  signers: Signer[];\n};\n\nexport type TransactionPayload = {\n  transaction: Transaction;\n  signers: Signer[];\n  execute: () => Promise<TransactionSignature>;\n};\n","import { deserializeAccount } from '@mercurial-finance/optimist';\nimport { ASSOCIATED_TOKEN_PROGRAM_ID, Token, TOKEN_PROGRAM_ID } from '@solana/spl-token';\nimport { Connection, PublicKey, SystemProgram, TransactionInstruction } from '@solana/web3.js';\nimport JSBI from 'jsbi';\nimport { WRAPPED_SOL_MINT } from '../constants';\nimport { getEmptyInstruction, Instruction } from './instruction';\nimport { Owner } from './Owner';\n\n// Leverage the existing ATA when present\nexport async function createAndCloseWSOLAccount({\n  connection,\n  amount,\n  owner: { publicKey },\n}: {\n  connection: Connection;\n  owner: Owner;\n  amount: JSBI;\n}): Promise<Instruction & { address: PublicKey }> {\n  const result = getEmptyInstruction();\n  result.instructions = [];\n\n  const toAccount = await Token.getAssociatedTokenAddress(\n    ASSOCIATED_TOKEN_PROGRAM_ID,\n    TOKEN_PROGRAM_ID,\n    WRAPPED_SOL_MINT,\n    publicKey,\n    true,\n  );\n\n  const info = await connection.getAccountInfo(toAccount);\n\n  if (info === null) {\n    result.instructions.push(\n      createAssociatedTokenAccountInstruction(publicKey, toAccount, publicKey, WRAPPED_SOL_MINT),\n    );\n  }\n\n  // Fund account and sync\n  result.instructions.push(\n    SystemProgram.transfer({\n      fromPubkey: publicKey,\n      toPubkey: toAccount,\n      lamports: JSBI.toNumber(amount),\n    }),\n  );\n  result.instructions.push(\n    // This is not exposed by the types, but indeed it exists\n    (Token as any).createSyncNativeInstruction(TOKEN_PROGRAM_ID, toAccount),\n  );\n\n  result.cleanupInstructions = [\n    Token.createCloseAccountInstruction(TOKEN_PROGRAM_ID, toAccount, publicKey, publicKey, []),\n  ];\n\n  return {\n    address: toAccount,\n    ...result,\n  };\n}\n\nexport async function findOrCreateAssociatedAccountByMint({\n  connection,\n  payer,\n  owner: { publicKey },\n  mintAddress,\n  unwrapSOL,\n}: {\n  connection: Connection;\n  payer: PublicKey;\n  owner: Owner;\n  mintAddress: PublicKey | string;\n  unwrapSOL: boolean;\n}): Promise<Instruction & { address: PublicKey }> {\n  const mint = typeof mintAddress === 'string' ? new PublicKey(mintAddress) : mintAddress;\n  const toAccount = await Token.getAssociatedTokenAddress(\n    ASSOCIATED_TOKEN_PROGRAM_ID,\n    TOKEN_PROGRAM_ID,\n    mint,\n    publicKey,\n    true,\n  );\n  const cleanupInstructions: TransactionInstruction[] = [];\n  const instructions: TransactionInstruction[] = [];\n\n  const info = await connection.getAccountInfo(toAccount);\n\n  if (info === null) {\n    instructions.push(createAssociatedTokenAccountInstruction(payer, toAccount, publicKey, mint));\n  } else {\n    const tokenAccountInfo = deserializeAccount(info.data);\n\n    if (tokenAccountInfo && !tokenAccountInfo.owner.equals(publicKey)) {\n      // What to do at the top level in UIs and SDK?\n      throw new Error(`/!\\ ATA ${toAccount.toBase58()} is not owned by ${publicKey.toBase58()}`);\n    }\n  }\n\n  // We close it when wrapped SOL\n  if (mint.equals(WRAPPED_SOL_MINT) && unwrapSOL) {\n    cleanupInstructions.push(\n      Token.createCloseAccountInstruction(TOKEN_PROGRAM_ID, toAccount, publicKey, publicKey, []),\n    );\n  }\n\n  return {\n    address: toAccount,\n    instructions: instructions,\n    cleanupInstructions,\n    signers: [],\n  };\n}\n\n// 0.1.x @solana/spl-token does not have the version without the rent sysvar\n// Source: https://github.com/solana-labs/solana-program-library/blob/dc5684445f0b42ba36a0157f06c561d967a7cb34/associated-token-account/program/src/instruction.rs#L16-L25\nexport function createAssociatedTokenAccountInstruction(\n  payer: PublicKey,\n  associatedToken: PublicKey,\n  owner: PublicKey,\n  mint: PublicKey,\n  programId = TOKEN_PROGRAM_ID,\n  associatedTokenProgramId = ASSOCIATED_TOKEN_PROGRAM_ID,\n): TransactionInstruction {\n  const keys = [\n    { pubkey: payer, isSigner: true, isWritable: true },\n    { pubkey: associatedToken, isSigner: false, isWritable: true },\n    { pubkey: owner, isSigner: false, isWritable: false },\n    { pubkey: mint, isSigner: false, isWritable: false },\n    { pubkey: SystemProgram.programId, isSigner: false, isWritable: false },\n    { pubkey: programId, isSigner: false, isWritable: false },\n  ];\n\n  return new TransactionInstruction({\n    keys,\n    programId: associatedTokenProgramId,\n    data: Buffer.alloc(0),\n  });\n}\n","import { Connection, PublicKey, TransactionInstruction } from '@solana/web3.js';\nimport { isPlatformFeeSupported, RouteInfo } from './routes';\nimport { getEmptyInstruction, Instruction } from '../utils/instruction';\nimport { findOrCreateAssociatedAccountByMint } from '../utils/token';\nimport { createSetTokenLedgerInstruction } from './jupiterInstruction';\nimport { Owner } from '../utils/Owner';\nimport { PlatformFee } from './types';\nimport { QuoteMintToReferrer } from '..';\nimport { isSerumAndRaydium } from './market';\nimport { ZERO } from '@jup-ag/math';\nimport { BN } from 'bn.js';\n\ntype RouteToInstructionsParams = {\n  user: Owner;\n  tokenLedger: PublicKey;\n  openOrdersAddresses: (PublicKey | undefined)[];\n  userSourceTokenAccountAddress: PublicKey;\n  userIntermediaryTokenAccountAddress: PublicKey | undefined;\n  userDestinationTokenAccountAddress: PublicKey;\n  routeInfo: RouteInfo;\n  platformFee: PlatformFee | undefined;\n  quoteMintToReferrer: QuoteMintToReferrer;\n};\n\nasync function routeToInstructions({\n  user,\n  tokenLedger,\n  openOrdersAddresses,\n  userSourceTokenAccountAddress,\n  userIntermediaryTokenAccountAddress,\n  userDestinationTokenAccountAddress,\n  routeInfo,\n  platformFee,\n  quoteMintToReferrer,\n}: RouteToInstructionsParams): Promise<Instruction> {\n  const otherAmountThreshold = routeInfo.otherAmountThreshold;\n  const amount = routeInfo.amount;\n\n  const legs = routeInfo.marketInfos.length;\n  if (legs === 2 && !userIntermediaryTokenAccountAddress) {\n    throw new Error('Missing intermediary token account');\n  }\n\n  // Drop referrer if space is scarce\n  const effectiveQuoteMintToReferrer =\n    platformFee && isSerumAndRaydium(routeInfo.marketInfos) ? undefined : quoteMintToReferrer;\n\n  const userIntermediateTokenAccountAddresses = userIntermediaryTokenAccountAddress\n    ? [userIntermediaryTokenAccountAddress]\n    : [];\n  const userTokenAccountAddresses = [\n    userSourceTokenAccountAddress,\n    ...userIntermediateTokenAccountAddresses,\n    userDestinationTokenAccountAddress,\n  ];\n\n  const platformFeeSupported = isPlatformFeeSupported(\n    routeInfo.swapMode,\n    routeInfo.marketInfos.map((mi) => mi.amm),\n  );\n\n  const instructions: TransactionInstruction[] = [\n    createSetTokenLedgerInstruction(tokenLedger, userTokenAccountAddresses[1]),\n  ];\n\n  for (const [index, marketInfo] of routeInfo.marketInfos.entries()) {\n    const amm = marketInfo.amm;\n    const legAmount = index === 0 ? new BN(amount.toString()) : null;\n    const isLastLeg = index === legs - 1;\n    const legOtherAmountThreshold = new BN((isLastLeg ? otherAmountThreshold : ZERO).toString());\n    const legPlatformFee = isLastLeg && platformFeeSupported ? platformFee : undefined;\n\n    const [userSourceTokenAccount, userDestinationTokenAccount] = userTokenAccountAddresses.slice(index);\n\n    instructions.push(\n      ...amm.createSwapInstructions({\n        sourceMint: marketInfo.inputMint,\n        destinationMint: marketInfo.outputMint,\n        userSourceTokenAccount,\n        userDestinationTokenAccount,\n        userTransferAuthority: user.publicKey,\n        amount: legAmount,\n        otherAmountThreshold: legOtherAmountThreshold,\n        swapMode: routeInfo.swapMode,\n        tokenLedger,\n        openOrdersAddress: openOrdersAddresses[index],\n        platformFee: legPlatformFee,\n        quoteMintToReferrer: effectiveQuoteMintToReferrer,\n      }),\n    );\n  }\n\n  const { signers, cleanupInstructions } = getEmptyInstruction();\n\n  if (user.isKeyPair && user.signer) {\n    signers.push(user.signer);\n  }\n  return {\n    signers,\n    cleanupInstructions,\n    instructions,\n  };\n}\n\nexport const routeAtaInstructions = async ({\n  connection,\n  marketInfos,\n  owner,\n  unwrapSOL,\n}: {\n  connection: Connection;\n  marketInfos: RouteInfo['marketInfos'];\n  owner: Owner;\n  unwrapSOL: boolean;\n}) => {\n  const getUserIntermediateTokenAccountAddress = async () => {\n    const userIntermediateTokenAccountAddress =\n      marketInfos.length === 2\n        ? await findOrCreateAssociatedAccountByMint({\n            connection,\n            owner: owner,\n            payer: owner.publicKey,\n            mintAddress: marketInfos[0].outputMint,\n            unwrapSOL,\n          })\n        : undefined;\n    return userIntermediateTokenAccountAddress;\n  };\n\n  const getUserDestinationTokenAccountAddress = () => {\n    return findOrCreateAssociatedAccountByMint({\n      connection,\n      owner: owner,\n      payer: owner.publicKey,\n      mintAddress: marketInfos.length === 2 ? marketInfos[1].outputMint : marketInfos[0].outputMint,\n      unwrapSOL,\n    });\n  };\n\n  const [userIntermediaryTokenAccountResult, userDestinationTokenAccountResult] = await Promise.all([\n    getUserIntermediateTokenAccountAddress(),\n    getUserDestinationTokenAccountAddress(),\n  ]);\n\n  return {\n    userIntermediaryTokenAccountResult,\n    userDestinationTokenAccountResult,\n  };\n};\n\nexport default routeToInstructions;\n","import { Connection, PublicKey } from '@solana/web3.js';\nimport { SerumMarket } from '../market';\nimport { getEmptyInstruction, Instruction } from '../../utils/instruction';\nimport { wait } from '../../utils/wait';\nimport { createOpenOrdersInstruction } from '../jupiterInstruction';\n\nexport type MarketToOpenOrdersAddress = Map<string, PublicKey>;\n\nexport async function getOrCreateOpenOrdersAddress(\n  connection: Connection,\n  user: PublicKey,\n  serumMarket: SerumMarket,\n  marketToOpenOrdersAddress?: MarketToOpenOrdersAddress,\n): Promise<(Instruction & { address: PublicKey }) | undefined> {\n  const result = getEmptyInstruction();\n\n  const marketAddress = serumMarket.address.toString();\n\n  if (marketToOpenOrdersAddress) {\n    // check existing map\n    let openOrdersAddress = marketToOpenOrdersAddress.get(marketAddress);\n\n    if (openOrdersAddress) {\n      let openOrdersAccountInfo = null;\n\n      // We verify if it indeed exists, with low commitment to pick it up, to address the unsafe behaviour below\n      openOrdersAccountInfo = await connection.getAccountInfo(openOrdersAddress, 'confirmed');\n\n      if (openOrdersAccountInfo) {\n        return {\n          ...result,\n          address: openOrdersAddress,\n        };\n      }\n    }\n  }\n\n  const [newOpenOrdersAddress, ix] = createOpenOrdersInstruction(serumMarket, user);\n\n  const newOpenOrdersAddressInfo = await connection.getAccountInfo(newOpenOrdersAddress);\n\n  if (!newOpenOrdersAddressInfo) {\n    result.instructions = [ix];\n  }\n\n  // This is unsafe, since we don't know yet if it has succeeded\n  marketToOpenOrdersAddress?.set(serumMarket.address.toString(), newOpenOrdersAddress);\n\n  return {\n    ...result,\n    address: newOpenOrdersAddress,\n  };\n}\n","import { TOKEN_PROGRAM_ID } from '@solana/spl-token';\nimport { Connection, FeeCalculator, PublicKey } from '@solana/web3.js';\nimport type { SerumOpenOrdersMap } from '..';\nimport { WRAPPED_SOL_MINT } from '../constants';\nimport { deserializeAccount } from '@mercurial-finance/optimist';\nimport { RouteInfo, TransactionFeeInfo } from './routes';\nimport { routeAtaInstructions } from './routeToInstructions';\nimport { getOrCreateOpenOrdersAddress } from './serum/openOrders';\nimport { SerumAmm } from './serum/serumAmm';\nimport { SplitTradeAmm } from './split-trade/splitTradeAmm';\nimport { PlatformFeeAndAccounts, SetupInstructions } from './types';\nimport { Owner } from '../utils/Owner';\n\nconst SERUM_OPEN_ACCOUNT_LAMPORTS = 23_352_760;\nconst OPEN_TOKEN_ACCOUNT_LAMPORTS = 2_039_280;\n\nfunction sum(values: number[]) {\n  return values.reduce((value, acc) => {\n    acc += value;\n    return acc;\n  }, 0);\n}\n\nconst calculateTransactionDepositAndFee = ({\n  intermediate,\n  destination,\n  openOrders,\n  hasWrapUnwrapSOL,\n  feeCalculator,\n}: SetupInstructions & {\n  hasWrapUnwrapSOL: boolean;\n  feeCalculator: FeeCalculator;\n}): TransactionFeeInfo => {\n  const openOrdersDeposits = openOrders\n    .filter((ooi) => ooi && ooi.instructions.length > 0)\n    .map(() => SERUM_OPEN_ACCOUNT_LAMPORTS);\n  const ataDeposits = [intermediate, destination]\n    .filter((item) => item?.instructions.length && item.cleanupInstructions.length === 0)\n    .map(() => OPEN_TOKEN_ACCOUNT_LAMPORTS);\n\n  const signatureFee =\n    ([...openOrders?.map((oo) => oo?.signers), intermediate?.signers, destination.signers].filter(Boolean).flat()\n      .length +\n      1) *\n    feeCalculator.lamportsPerSignature;\n\n  const totalFeeAndDeposits = sum([signatureFee, ...openOrdersDeposits, ...ataDeposits]);\n\n  // We need to account for temporary wrapped SOL token accounts as intermediary or output\n  const minimumSOLForTransaction = sum([\n    signatureFee,\n    ...openOrdersDeposits,\n    ...[intermediate, destination]\n      .filter((item) => (item?.instructions.length ?? 0) > 0)\n      .map(() => OPEN_TOKEN_ACCOUNT_LAMPORTS),\n    hasWrapUnwrapSOL ? OPEN_TOKEN_ACCOUNT_LAMPORTS : 0,\n  ]);\n\n  return {\n    signatureFee,\n    openOrdersDeposits,\n    ataDeposits,\n    totalFeeAndDeposits,\n    minimumSOLForTransaction,\n  };\n};\n\nexport const getDepositAndFeeFromInstructions = async ({\n  connection,\n  owner,\n  inputMint,\n  marketInfos,\n  feeCalculator,\n  serumOpenOrdersPromise,\n  wrapUnwrapSOL: unwrapSOL,\n}: {\n  connection: Connection;\n  owner: Owner;\n  inputMint: PublicKey;\n  marketInfos: RouteInfo['marketInfos'];\n  feeCalculator: FeeCalculator;\n  /* promise because we can choose not to await it when we dont need it */\n  serumOpenOrdersPromise: Promise<SerumOpenOrdersMap>;\n  wrapUnwrapSOL: boolean;\n}) => {\n  const hasWrapUnwrapSOL = inputMint.equals(WRAPPED_SOL_MINT) && unwrapSOL;\n\n  const openOrdersInstructionsPromise = Promise.all(\n    marketInfos.map(async (marketInfo) => {\n      const amm = marketInfo.amm;\n      if (amm instanceof SerumAmm || amm instanceof SplitTradeAmm) {\n        if (!amm.market) return;\n        return await getOrCreateOpenOrdersAddress(\n          connection,\n          owner.publicKey,\n          amm.market,\n          await serumOpenOrdersPromise,\n        );\n      }\n      return;\n    }),\n  );\n\n  const promise = routeAtaInstructions({ connection, marketInfos, owner, unwrapSOL }).then(\n    ({ userIntermediaryTokenAccountResult, userDestinationTokenAccountResult }) => {\n      return openOrdersInstructionsPromise.then((openOrdersInstructions) => ({\n        intermediate: userIntermediaryTokenAccountResult,\n        destination: userDestinationTokenAccountResult,\n        openOrders: openOrdersInstructions,\n      }));\n    },\n  );\n\n  const instructionResult = await promise;\n\n  return calculateTransactionDepositAndFee({\n    ...instructionResult,\n    hasWrapUnwrapSOL,\n    feeCalculator,\n  });\n};\n\nexport const NO_PLATFORM_FEE: PlatformFeeAndAccounts = {\n  feeBps: 0,\n  feeAccounts: new Map<string, PublicKey>(),\n};\n\nexport async function getPlatformFeeAccounts(\n  connection: Connection,\n  feeAccountOwner: PublicKey,\n): Promise<Map<string, PublicKey>> {\n  const tokenAccounts = (\n    await connection.getTokenAccountsByOwner(feeAccountOwner, {\n      programId: TOKEN_PROGRAM_ID,\n    })\n  ).value;\n\n  const feeAccounts = tokenAccounts.reduce((acc, tokenAccount) => {\n    const deserializedtokenAccount = deserializeAccount(tokenAccount.account.data);\n    if (deserializedtokenAccount) {\n      acc.set(deserializedtokenAccount.mint.toBase58(), tokenAccount.pubkey);\n    }\n    return acc;\n  }, new Map<string, PublicKey>());\n\n  return feeAccounts;\n}\n","import {\n  Connection,\n  PublicKey,\n  Transaction,\n  TransactionCtorFields_DEPRECATED,\n  Signer,\n  TransactionInstruction,\n} from '@solana/web3.js';\nimport { Instruction, TransactionPayload } from './instruction';\nimport { Owner } from './Owner';\n\nexport class TransactionBuilder {\n  private connection: Connection;\n  private feePayer: PublicKey;\n  private instructions: Instruction[];\n  private owner: Owner;\n\n  constructor(connection: Connection, feePayer: PublicKey, owner: Owner) {\n    this.connection = connection;\n    this.feePayer = feePayer;\n    this.instructions = [];\n    this.owner = owner;\n  }\n\n  addInstruction(instruction: Instruction): TransactionBuilder {\n    this.instructions.push(instruction);\n    return this;\n  }\n\n  async build(recentBlockHash?: string): Promise<TransactionPayload> {\n    if (!recentBlockHash) {\n      recentBlockHash = (await this.connection.getLatestBlockhash('confirmed')).blockhash;\n    }\n\n    const txFields: TransactionCtorFields_DEPRECATED = {\n      recentBlockhash: recentBlockHash,\n      feePayer: this.feePayer,\n    };\n\n    let instructions: TransactionInstruction[] = [];\n    let cleanupInstructions: TransactionInstruction[] = [];\n    let signers: Signer[] = [];\n    this.instructions.forEach((curr) => {\n      instructions = instructions.concat(curr.instructions);\n      cleanupInstructions = cleanupInstructions.concat(curr.cleanupInstructions);\n      signers = signers.concat(curr.signers);\n    });\n\n    const transaction = new Transaction(txFields);\n    instructions.concat(cleanupInstructions).forEach((ix) => transaction.add(ix));\n    transaction.feePayer = this.feePayer;\n\n    return {\n      transaction: transaction,\n      signers: signers,\n      execute: this.owner.isKeyPair\n        ? () => {\n            return this.connection.sendTransaction(transaction, signers);\n          }\n        : async () => {\n            throw new Error('Please use a Keypair for the owner parameter to enable the execute function');\n          },\n    };\n  }\n}\n","import { Keypair, PublicKey, Signer } from '@solana/web3.js';\n\ntype _Owner = Keypair | PublicKey;\n\nexport class Owner {\n  private readonly _owner: _Owner;\n\n  constructor(owner: _Owner) {\n    this._owner = owner;\n  }\n\n  get publicKey(): PublicKey {\n    if (Owner.isKeyPair(this._owner)) {\n      return this._owner.publicKey;\n    }\n\n    return this._owner;\n  }\n\n  get signer(): Signer | undefined {\n    return Owner.isKeyPair(this._owner) ? this._owner : undefined;\n  }\n\n  get isKeyPair(): boolean {\n    return Owner.isKeyPair(this._owner);\n  }\n\n  get isPublicKey(): boolean {\n    return Owner.isPublicKey(this._owner);\n  }\n\n  static isKeyPair(owner: _Owner): owner is Keypair {\n    return (owner as Keypair).secretKey !== undefined;\n  }\n\n  static isPublicKey(owner: _Owner): owner is PublicKey {\n    return !Owner.isKeyPair(owner);\n  }\n}\n","export const wait = (time: number) => new Promise<void>((resolve) => setTimeout(resolve, time));\n","import { TransactionError } from '@mercurial-finance/optimist';\nimport { bs58 } from '@project-serum/anchor/dist/cjs/utils/bytes';\nimport {\n  ConfirmedTransactionMeta,\n  Connection,\n  PublicKey,\n  SendOptions,\n  Transaction,\n  TransactionResponse,\n  TransactionSignature,\n} from '@solana/web3.js';\nimport Decimal from 'decimal.js';\nimport promiseRetry from 'promise-retry';\nimport { WRAPPED_SOL_MINT, JUPITER_ERRORS } from '../constants';\nimport { wait } from './wait';\n\ntype ResponseMeta = NonNullable<TransactionResponse['meta']>;\ntype ReponseTransaction = TransactionResponse['transaction'];\n\nfunction diffTokenBalance(accountKeyIndex: number, meta: ConfirmedTransactionMeta): number | undefined {\n  const postBalance = meta.postTokenBalances?.find(\n    (postTokenBalance) => postTokenBalance.accountIndex === accountKeyIndex,\n  )?.uiTokenAmount.amount;\n  const preBalance = meta.preTokenBalances?.find((preTokenBalance) => preTokenBalance.accountIndex === accountKeyIndex)\n    ?.uiTokenAmount.amount;\n\n  // When token account is created it isn't present in preBalance\n  if (!postBalance) return;\n  return Math.abs(parseInt(postBalance) - (preBalance !== undefined ? parseInt(preBalance) : 0));\n}\n\nexport function extractTokenBalanceChangeFromTransaction(\n  meta: ResponseMeta,\n  transaction: ReponseTransaction,\n  tokenAccountAddress: PublicKey,\n): number | undefined {\n  const message = transaction.message;\n\n  if (!meta) {\n    return;\n  }\n  const index = message.accountKeys.findIndex((p) => p.equals(tokenAccountAddress));\n\n  return diffTokenBalance(index, meta);\n}\n\nexport function extractSOLChangeFromTransaction(\n  meta: ResponseMeta,\n  transaction: ReponseTransaction,\n  user: PublicKey,\n): number {\n  let accountKeyIndex = transaction.message.accountKeys.findIndex((p) => p.equals(user));\n\n  if (accountKeyIndex !== -1) {\n    return Math.abs(meta.postBalances[accountKeyIndex] - meta.preBalances[accountKeyIndex]);\n  }\n\n  // if 0 is returned it will throw error in the caller function\n  return 0;\n}\n\nexport function getWritableKeys(transaction: Transaction) {\n  return [\n    ...new Set(\n      transaction.instructions\n        .map((inst) => inst.keys.filter((key) => key.isWritable).map((k) => k.pubkey))\n        .reduce((acc, el) => acc.concat(el)),\n    ).values(),\n  ];\n}\n\nexport function getTokenBalanceChangesFromTransactionResponse({\n  txid,\n  inputMint,\n  outputMint,\n  user,\n  sourceAddress,\n  destinationAddress,\n  transactionResponse,\n  hasWrappedSOL,\n}: {\n  txid: TransactionSignature;\n  inputMint: PublicKey;\n  outputMint: PublicKey;\n  user: PublicKey;\n  sourceAddress: PublicKey;\n  destinationAddress: PublicKey;\n  transactionResponse: TransactionResponse | null;\n  hasWrappedSOL: boolean;\n}) {\n  let sourceTokenBalanceChange: number | undefined;\n  let destinationTokenBalanceChange: number | undefined;\n\n  if (transactionResponse) {\n    let { meta, transaction } = transactionResponse;\n    if (meta) {\n      sourceTokenBalanceChange =\n        inputMint.equals(WRAPPED_SOL_MINT) && !hasWrappedSOL\n          ? extractSOLChangeFromTransaction(meta, transaction, user)\n          : extractTokenBalanceChangeFromTransaction(meta, transaction, sourceAddress);\n      destinationTokenBalanceChange =\n        outputMint.equals(WRAPPED_SOL_MINT) && !hasWrappedSOL\n          ? extractSOLChangeFromTransaction(meta, transaction, user)\n          : extractTokenBalanceChangeFromTransaction(meta, transaction, destinationAddress);\n    }\n  }\n\n  if (!(sourceTokenBalanceChange && destinationTokenBalanceChange)) {\n    throw new TransactionError(\n      'Cannot find source or destination token account balance change',\n      txid,\n      JUPITER_ERRORS['BalancesNotExtractedProperly'].code,\n    );\n  }\n\n  return [sourceTokenBalanceChange, destinationTokenBalanceChange];\n}\n\nexport async function pollForConfirmedTransaction(\n  connection: Connection,\n  txid: TransactionSignature,\n): Promise<TransactionResponse | null> {\n  return promiseRetry(\n    async (retry) => {\n      const response = await connection.getTransaction(txid, {\n        commitment: 'confirmed',\n      });\n      if (!response) {\n        retry(\n          new TransactionError('Transaction was not confirmed', txid, JUPITER_ERRORS['TransactionNotConfirmed'].code),\n        );\n      }\n      return response;\n    },\n    {\n      retries: 30,\n      minTimeout: 500,\n    },\n  ).catch(() => null);\n}\n\nexport function getUnixTs() {\n  return new Date().getTime();\n}\n\nconst SEND_OPTIONS: SendOptions = { skipPreflight: true, maxRetries: 2 };\n\n/**\n * awaits confirmation while resending the transaction periodically\n *\n * Our RPC node settings\n * solana_send_leader_count: 8\n * solana_send_retry_ms: 15000\n **/\nexport async function transactionSenderAndConfirmationWaiter(\n  connection: Connection,\n  signedTransaction: Transaction,\n  timeout = 120_000, // 2 minutes, (sendInterval * sendRetries) = 80_000 + extra wait 40_000\n  pollInterval = 500,\n  sendInterval = 2_000,\n  sendRetries = 40,\n): Promise<{ txid: TransactionSignature; transactionResponse: TransactionResponse | null }> {\n  const rawTransaction = signedTransaction.serialize();\n  const txid = await connection.sendRawTransaction(rawTransaction, SEND_OPTIONS);\n\n  const start = getUnixTs();\n  let lastSendTimestamp = getUnixTs();\n  let retries = 0;\n\n  while (getUnixTs() - start < timeout) {\n    const timestamp = getUnixTs();\n    if (retries < sendRetries && timestamp - lastSendTimestamp > sendInterval) {\n      lastSendTimestamp = timestamp;\n      retries += 1;\n      await connection.sendRawTransaction(rawTransaction, SEND_OPTIONS);\n    }\n    const response = await Promise.any([\n      connection.getTransaction(txid, {\n        commitment: 'confirmed',\n      }),\n      wait(5000),\n    ]);\n    if (response) return { txid, transactionResponse: response };\n    await wait(pollInterval);\n  }\n  return { txid, transactionResponse: null };\n}\n\nexport function getSignature(transaction: Transaction) {\n  const signature = transaction.signature;\n  if (!signature) {\n    throw new Error('Transaction has no signature');\n  }\n  return bs58.encode(signature);\n}\n","// The package is missing cjs. Apache License 2.0\n// https://github.com/ehmicky/fast-cartesian/blob/619a497dffd978fb4a09a83f2ca047915579774f/src/main.js\n\n// Validate 'array()' input\nconst validateInput = function <T>(arrays: T[][]) {\n  if (!Array.isArray(arrays)) {\n    throw new TypeError('Argument must be an array of arrays');\n  }\n\n  arrays.forEach(validateArray);\n  validateDimensions(arrays);\n  validateCombinations(arrays);\n};\n\nconst validateArray = function <T>(array: T[]) {\n  if (!Array.isArray(array)) {\n    throw new TypeError(`Argument must be an array: ${array}`);\n  }\n};\n\n// Maximum number of nested `for` loops. In my machine, it's 604 but it is\n// engine-specific so we use a safe number. Above the limit, a max call stack\n// error is thrown by the engine.\nconst validateDimensions = function <T>({ length }: T[]) {\n  if (length >= MAX_DIMENSIONS) {\n    throw new TypeError(\n      `Too many arrays (${length}): please use the 'big-cartesian' library instead of 'fast-cartesian'`,\n    );\n  }\n};\n\nconst MAX_DIMENSIONS = 1e2;\n\n// Max array size in JavaScript. This is the limit of the final return value.\nconst validateCombinations = function <T>(arrays: T[][]) {\n  const size = arrays.reduce(multiplySize, 1);\n\n  if (size >= MAX_SIZE) {\n    const sizeStr = Number.isFinite(size) ? ` (${size.toExponential(0)})` : '';\n    throw new TypeError(\n      `Too many combinations${sizeStr}: please use the 'big-cartesian' library instead of 'fast-cartesian'`,\n    );\n  }\n};\n\nconst multiplySize = function <T>(size: number, array: T[]) {\n  return size * array.length;\n};\n\nconst MAX_SIZE = 4294967296; // 2 ** 32 = 4,294,967,296\n\n// Does a cartesian product on several arrays.\n// Returns an array with the results.\n// Optimized to be the fastest implementation in JavaScript.\nexport default function fastCartesian<T>(arrays: T[][]): T[][] {\n  validateInput(arrays);\n\n  if (arrays.length === 0) {\n    return [];\n  }\n\n  const loopFunc = getLoopFunc(arrays.length);\n  const result: T[][] = [];\n  loopFunc(arrays, result);\n  return result;\n}\n\nconst getLoopFunc = function (length: number) {\n  const cachedLoopFunc = cache[length];\n\n  if (cachedLoopFunc !== undefined) {\n    return cachedLoopFunc;\n  }\n\n  const loopFunc = mGetLoopFunc(length);\n  // eslint-disable-next-line fp/no-mutation\n  cache[length] = loopFunc;\n  return loopFunc;\n};\n\nconst cache: Record<number, any> = {};\n\n// Create a function with `new Function()` that does:\n//   function(arrays, results) {\n//     for (const value0 of arrays[0]) {\n//       for (const value1 of arrays[1]) {\n//         // and so on\n//         results.push([value0, value1])\n//       }\n//     }\n//   }\nconst mGetLoopFunc = function (length: number) {\n  const indexes = Array.from({ length }, getIndex);\n  const start = indexes.map((index) => `for (const value${index} of arrays[${index}]) {`).join('\\n');\n  const middle = indexes.map((index) => `value${index}`).join(', ');\n  const end = '}\\n'.repeat(length);\n\n  // eslint-disable-next-line no-new-func\n  return new Function('arrays', 'result', `${start}\\nresult.push([${middle}])\\n${end}`);\n};\n\nconst getIndex = function (value: any, index: number) {\n  return String(index);\n};\n","import { Connection, PublicKey } from '@solana/web3.js';\nimport { chunkedGetMultipleAccountInfos } from '../utils/chunkedGetMultipleAccountInfos';\nimport { Amm, SwapMode, Quote } from './amm';\nimport { SplitTradeAmm } from './split-trade/splitTradeAmm';\nimport { isValidRoute, MarketInfo } from './market';\nimport { ammCrossProtocolPairs, isPlatformFeeSupported, Route, RouteInfo, TransactionFeeInfo } from './routes';\nimport { TokenRouteSegments } from './types';\nimport { IS_DEV } from '../constants';\nimport fastCartesian from '../utils/cartesian';\nimport JSBI from 'jsbi';\nimport { ZERO } from '@jup-ag/math';\nimport Decimal from 'decimal.js';\n\nconst PLATFORM_FEE_DENOMINATOR = JSBI.BigInt(10000);\n\nexport async function fetchAccountInfos(connection: Connection, routes: TokenRouteSegments): Promise<void> {\n  const accountInfosMap = new Map();\n\n  const accountsToFetchSet = new Set<string>();\n  const ammMap = new Map<string, Amm>();\n  routes.forEach((innerMap) => {\n    innerMap.forEach((amms) => {\n      amms.forEach((amm) => {\n        ammMap.set(amm.id, amm);\n        amm.getAccountsForUpdate().forEach((account) => {\n          // Only add accountInfos that is not in the Map\n          accountsToFetchSet.add(account.toBase58());\n        });\n      });\n    });\n  });\n\n  const accountsToFetch = Array.from(accountsToFetchSet);\n\n  if (accountsToFetch.length > 0) {\n    const accountInfos = await chunkedGetMultipleAccountInfos(connection, accountsToFetch);\n\n    accountInfos.forEach((item, index) => {\n      const publicKey = accountsToFetch[index];\n      if (item) {\n        accountInfosMap.set(publicKey, item);\n      }\n    });\n\n    ammMap.forEach((amm) => {\n      amm.update(accountInfosMap);\n    });\n  }\n}\n\ninterface GetQuotesParams {\n  inputRouteSegment: TokenRouteSegments;\n  amount: JSBI;\n  inputMint: PublicKey;\n  outputMint: PublicKey;\n  platformFeeBps: number;\n  slippage: number;\n  filterTopNResult?: number;\n  onlyDirectRoutes?: boolean;\n  swapMode: SwapMode;\n  getDepositAndFeeForRoute: (params: {\n    marketInfos: RouteInfo['marketInfos'];\n  }) => Promise<TransactionFeeInfo | undefined>;\n}\n\nfunction getInputOutputId({ inputMint, outputMint }: { inputMint: string; outputMint: string }) {\n  return `${inputMint}-${outputMint}`;\n}\n\nfunction getQuoteId({ ammId, amount }: { ammId: string; amount: JSBI }) {\n  return `${ammId}-${amount.toString()}`;\n}\n\ntype QuoteMap = Map<string, Quote>;\n\nfunction getQuoteAndSortBasedOnOutAmount({\n  amms,\n  inputMint,\n  outputMint,\n  amount,\n  swapMode,\n}: {\n  amms: Amm[];\n  inputMint: string;\n  outputMint: string;\n  amount: JSBI;\n  swapMode: SwapMode;\n}): Array<{ amm: Amm; quote: Quote }> {\n  const quotes = amms\n    .map((amm) => {\n      try {\n        const quote = amm.getQuote({\n          amount,\n          sourceMint: new PublicKey(inputMint),\n          destinationMint: new PublicKey(outputMint),\n          swapMode,\n        });\n        return { quote, amm: amm };\n      } catch (e) {\n        if (IS_DEV) {\n          console.error(e);\n        }\n        return undefined;\n      }\n    })\n    .filter(Boolean)\n    .sort((a, b) =>\n      JSBI.greaterThanOrEqual(b?.quote.outAmount || ZERO, a?.quote.outAmount || ZERO) ? 1 : -1,\n    ) as Array<{\n    amm: Amm;\n    quote: Quote;\n  }>;\n\n  return quotes;\n}\n\n// Change this to support N-1 level of hops\nconst MAX_LEVEL = 2;\n\nexport function processInputRouteSegmentToRoutesInfos({\n  inputRouteSegment,\n  inputMint,\n  outputMint,\n  amount,\n  getDepositAndFeeForRoute,\n  platformFeeBps,\n  slippage,\n  filterTopNResult = 3,\n  onlyDirectRoutes,\n  swapMode,\n}: GetQuotesParams) {\n  const inputMintString = inputMint.toBase58();\n  const outputMintString = outputMint.toBase58();\n  // (InputMint-OutputMint) map to (AmmId-InputAmount) map to Quote from the amm with the inputAmount\n  // this is used to prevent calculation being repeated later on.\n  const tradeIdQuoteMap = new Map<string, Map<string, Quote>>();\n  const inputMintInnerMap = inputRouteSegment.get(inputMintString);\n\n  const routes: Route[] = [];\n\n  if (!inputMintInnerMap) {\n    throw new Error('No routes found for the input and output mints');\n  }\n\n  const maxLevel = onlyDirectRoutes ? 0 : MAX_LEVEL;\n  /*\n   * It get the rate of all single pair that is linked to the inputMint\n   * Example: SOL => USDC, will have direct pair, while\n   *          SOL => USDT, USDT => SOL will have a hop\n   *\n   * So we go through each of the hop and get the top 3 rate and drop others\n   * This will eventually reduce the needs to compute bad rate for the same pair\n   *\n   * The loop below is doing for the inputMint, while the one after is doing for the outputMint.\n   */\n  const walkTheTree = ({\n    inputMint,\n    level = 0,\n    walked = [inputMint],\n  }: {\n    inputMint: string;\n    amount: JSBI;\n    level?: number;\n    walked?: string[];\n  }) => {\n    const inputMintInnerMap = inputRouteSegment.get(inputMint);\n\n    if (inputMintInnerMap) {\n      inputMintInnerMap.forEach((amms, outMint) => {\n        const tradeId = getInputOutputId({\n          inputMint,\n          outputMint: outMint,\n        });\n\n        const sortedQuotesWithAmms = getQuoteAndSortBasedOnOutAmount({\n          amms,\n          inputMint,\n          outputMint: outMint,\n          amount,\n          swapMode,\n        });\n\n        const { filteredAmms, quoteMap } = sortedQuotesWithAmms.reduce(\n          (result, item, idx) => {\n            if (idx < filterTopNResult) {\n              result.filteredAmms.push(item.amm);\n            }\n            result.quoteMap.set(getQuoteId({ ammId: item.amm.id, amount }), item.quote);\n            return result;\n          },\n          { filteredAmms: [] as Amm[], quoteMap: new Map() as QuoteMap },\n        );\n\n        const splitTradeAmms: SplitTradeAmm[] = [];\n        // add split trade in when outputMint match and it's not direct only routes\n        if (outMint === outputMintString && !onlyDirectRoutes) {\n          ammCrossProtocolPairs(filteredAmms.slice(), (firstAmm, secondAmm) => {\n            const splitTradeAmm = SplitTradeAmm.create(firstAmm, secondAmm);\n            if (splitTradeAmm) {\n              splitTradeAmms.push(splitTradeAmm);\n            }\n          });\n        }\n\n        inputMintInnerMap.set(outMint, filteredAmms.concat(splitTradeAmms));\n\n        tradeIdQuoteMap.set(tradeId, quoteMap);\n\n        // keep looping if not walked and not reached max level\n        if (outMint !== outputMintString && quoteMap.size && !walked.includes(outMint) && level < maxLevel - 1) {\n          walkTheTree({\n            inputMint: outMint,\n            amount: quoteMap.values().next().value.outAmount,\n            level: level + 1,\n            walked: walked.concat(outMint),\n          });\n        } else if (outMint === outputMintString) {\n          if (level === 0) {\n            // we need to add the direct routes as it is computed instead of using filteredAmms\n            inputMintInnerMap.set(outMint, sortedQuotesWithAmms.map((item) => item.amm).concat(splitTradeAmms));\n          }\n\n          // if output reached, we add the route\n          const mints = walked.concat(outMint);\n          const _mints = mints.map((i) => new PublicKey(i));\n          const ammsArr = mints.reduce((amms, _, index) => {\n            if (index < mints.length - 1) {\n              amms.push(inputRouteSegment.get(mints[index])?.get(mints[index + 1])!);\n            }\n            return amms;\n          }, [] as Amm[][]);\n\n          const permutations: Amm[][] = fastCartesian(ammsArr);\n\n          permutations.forEach((item) => {\n            if (item.length === 1 || isValidRoute(item[0], item[1])) {\n              routes.push({\n                amms: item,\n                mints: _mints,\n              });\n            }\n          });\n        }\n      });\n    }\n  };\n\n  walkTheTree({\n    inputMint: inputMintString,\n    amount,\n  });\n\n  const routesInfo: RouteInfo[] = routes\n    .map((route) => {\n      const { amms, mints } = route;\n\n      // Chain all amms\n      let marketInfos: MarketInfo[] = [];\n      let intermediateAmount = amount;\n      let otherAmountThreshold = ZERO;\n      const platformFeeSupported = isPlatformFeeSupported(swapMode, amms);\n      const tokenMints: PublicKey[] = mints;\n\n      const legs = amms.length;\n      for (const [i, amm] of amms.entries()) {\n        try {\n          const sourceMint = tokenMints[i];\n          const destinationMint = tokenMints[i + 1];\n\n          const tradeId = getInputOutputId({\n            inputMint: sourceMint.toBase58(),\n            outputMint: destinationMint.toBase58(),\n          });\n\n          const cacheQuote = tradeIdQuoteMap\n            .get(tradeId)\n            ?.get(getQuoteId({ ammId: amm.id, amount: intermediateAmount }));\n\n          const quote =\n            cacheQuote ||\n            amm.getQuote({\n              sourceMint,\n              destinationMint,\n              amount: intermediateAmount,\n              swapMode,\n            });\n\n          // Platform fee applicable only on last leg\n          const isLastLeg = legs - 1 === i;\n          const platformFee =\n            isLastLeg && platformFeeSupported\n              ? {\n                  amount: JSBI.divide(\n                    JSBI.multiply(quote.outAmount, JSBI.BigInt(platformFeeBps)),\n                    PLATFORM_FEE_DENOMINATOR,\n                  ),\n                  mint: destinationMint.toBase58(),\n                  pct: platformFeeBps / 100,\n                }\n              : { amount: ZERO, mint: destinationMint.toBase58(), pct: 0 };\n\n          const amountForFees = swapMode === SwapMode.ExactIn ? quote.outAmount : quote.inAmount;\n          let amountAfterFees =\n            swapMode === SwapMode.ExactIn\n              ? JSBI.subtract(amountForFees, platformFee.amount)\n              : JSBI.add(amountForFees, platformFee.amount);\n\n          if (JSBI.lessThan(amountAfterFees, ZERO)) {\n            amountAfterFees = ZERO;\n          }\n\n          const legOtherAmountThreshold = JSBI.BigInt(\n            swapMode === SwapMode.ExactIn\n              ? new Decimal(amountAfterFees.toString()).mul(1 - slippage / 100).ceil()\n              : new Decimal(amountAfterFees.toString()).mul(1 + slippage / 100).floor(),\n          );\n\n          const [inAmount, outAmount] =\n            swapMode === SwapMode.ExactIn ? [quote.inAmount, amountAfterFees] : [amountAfterFees, intermediateAmount];\n\n          marketInfos.push({\n            amm,\n            inputMint: sourceMint,\n            outputMint: destinationMint,\n            notEnoughLiquidity: quote.notEnoughLiquidity,\n            minInAmount: quote.minInAmount,\n            minOutAmount: quote.minOutAmount,\n            inAmount,\n            outAmount,\n            priceImpactPct: quote.priceImpactPct,\n            lpFee: {\n              amount: quote.feeAmount,\n              mint: quote.feeMint,\n              pct: quote.feePct,\n            },\n            platformFee,\n          });\n\n          intermediateAmount = swapMode === SwapMode.ExactIn ? amountAfterFees : amount;\n          otherAmountThreshold = legOtherAmountThreshold;\n        } catch (e: any) {\n          if (IS_DEV) {\n            console.error(e);\n          }\n\n          return undefined;\n        }\n      }\n\n      return {\n        marketInfos,\n        getDepositAndFee: () => getDepositAndFeeForRoute({ marketInfos }),\n        inAmount: marketInfos[0].inAmount,\n        outAmount: intermediateAmount,\n        amount,\n        otherAmountThreshold,\n        swapMode,\n        priceImpactPct:\n          1 -\n          marketInfos.reduce((priceFactor, marketInfo) => {\n            priceFactor *= 1 - marketInfo.priceImpactPct;\n            return priceFactor;\n          }, 1),\n      };\n    })\n    .filter((item): item is RouteInfo => item !== undefined)\n    .sort((a, b) => (JSBI.greaterThanOrEqual(b.outAmount, a.outAmount) ? 1 : -1)); // sort based on which one have better output\n\n  return routesInfo;\n}\n","import { parseErrorForTransaction, TransactionError, UNKNOWN_ERROR } from '@mercurial-finance/optimist';\nimport { TransactionResponse, TransactionSignature } from '@solana/web3.js';\n\n// Throws when not found or contains error to satisfy upper control flow\nexport async function validateTransactionResponse({\n  txid,\n  transactionResponse,\n}: {\n  txid: string;\n  transactionResponse: TransactionResponse | null;\n}): Promise<{ txid: TransactionSignature; transactionResponse: TransactionResponse | null }> {\n  if (!transactionResponse) {\n    throw new TransactionError('Transaction was not confirmed', txid);\n  }\n  if (transactionResponse?.meta?.err) {\n    let { message, code } = await parseErrorForTransaction(transactionResponse);\n\n    switch (code) {\n      case 6000: {\n        message = 'Slippage error';\n      }\n\n      default: {\n        message = UNKNOWN_ERROR;\n      }\n    }\n\n    throw new TransactionError(message || '', txid, code);\n  }\n  return { txid, transactionResponse };\n}\n","import fetch from 'cross-fetch';\n\ntype Address = string;\n\nexport async function getTopTokens() {\n  const topTokens = (await (await fetch('https://cache.jup.ag/top-tokens')).json()) as Address[];\n\n  return new Set(topTokens.filter((_, idx) => idx < 60));\n}\n","import { ASSOCIATED_TOKEN_PROGRAM_ID, Token, TOKEN_PROGRAM_ID } from '@solana/spl-token';\nimport {\n  Cluster,\n  Connection,\n  FeeCalculator,\n  Keypair,\n  PublicKey,\n  Transaction,\n  TransactionSignature,\n} from '@solana/web3.js';\n\nimport { OpenOrders } from '@project-serum/serum';\nimport {\n  computeInputRouteSegments,\n  computeRouteMap,\n  fetchMarketCache,\n  getAllAmms,\n  getTokenRouteSegments,\n  isSplitSetupRequired,\n  RouteInfo,\n} from './routes';\nimport { MarketInfo } from './market';\nimport {\n  DEVNET_SERUM_DEX_PROGRAM,\n  JUPITER_WALLET,\n  MAINNET_SERUM_DEX_PROGRAM,\n  WRAPPED_SOL_MINT,\n  MARKETS_URL,\n  SWAP_PROTOCOL_TOKENS,\n} from '../constants';\nimport { getDepositAndFeeFromInstructions, NO_PLATFORM_FEE } from './fee';\nimport routeToInstructions, { routeAtaInstructions } from './routeToInstructions';\nimport { getOrCreateOpenOrdersAddress } from './serum/openOrders';\nimport { createAndCloseWSOLAccount } from '../utils/token';\nimport { getEmptyInstruction, Instruction } from '../utils/instruction';\nimport { TransactionBuilder } from '../utils/TransactionBuilder';\nimport { Owner } from '../utils/Owner';\nimport {\n  getSignature,\n  getTokenBalanceChangesFromTransactionResponse,\n  transactionSenderAndConfirmationWaiter,\n} from '../utils/transactionHelpers';\nimport { createInitializeTokenLedgerInstruction, TOKEN_LEDGER } from './jupiterInstruction';\nimport { fetchAccountInfos, processInputRouteSegmentToRoutesInfos } from './computeRouteInfos';\nimport type { SignerWalletAdapter } from '@solana/wallet-adapter-base';\nimport { TokenRouteSegments, PlatformFeeAndAccounts, QuoteMintToReferrer } from './types';\nimport { SerumAmm } from './serum/serumAmm';\nimport { SaberAmm } from './saber/saberAmm';\nimport { SplTokenSwapAmm } from './spl-token-swap/splTokenSwapAmm';\nimport { MercurialAmm } from './mercurial/mercurialAmm';\nimport { AldrinAmm } from './aldrin/aldrinAmm';\nimport { RaydiumAmm } from './raydium/raydiumAmm';\nimport { CropperAmm } from './cropper/cropperAmm';\nimport { SenchaAmm } from './sencha/senchaAmm';\nimport { SplitTradeAmm } from './split-trade/splitTradeAmm';\nimport { TokenMintAddress, SetupInstructions } from './types';\nimport { getPlatformFeeAccounts } from './fee';\nimport { Amm, SwapMode } from './amm';\nimport { validateTransactionResponse } from '../utils/tx/errors';\nimport { TransactionError } from '@mercurial-finance/optimist';\nimport { getSaberWrappedDecimalsAmms, SaberAddDecimalsAmm } from './saber/saberAddDecimalsAmm';\nimport { getTopTokens } from './getTopTokens';\nimport { WhirlpoolAmm } from './whirlpool/whirlpoolAmm';\nimport { CykuraAmm } from './cykura/cykuraAmm';\nimport JSBI from 'jsbi';\n\nexport type SerumOpenOrdersMap = Map<string, PublicKey>;\nexport { MarketInfo } from './market';\nexport { getPlatformFeeAccounts } from './fee';\nexport * from './types';\nexport { transactionSenderAndConfirmationWaiter } from '../utils/transactionHelpers';\nexport { RouteInfo, TransactionFeeInfo, getRouteInfoUniqueId } from './routes';\nexport { getSaberWrappedDecimalsAmms };\nexport {\n  Amm,\n  AldrinAmm,\n  CykuraAmm,\n  RaydiumAmm,\n  SerumAmm,\n  SaberAmm,\n  SplTokenSwapAmm,\n  MercurialAmm,\n  CropperAmm,\n  SenchaAmm,\n  SaberAddDecimalsAmm,\n  SplitTradeAmm,\n  WhirlpoolAmm,\n  SwapMode,\n};\n\nexport type SwapResult =\n  | {\n      txid: string;\n      inputAddress: PublicKey;\n      outputAddress: PublicKey;\n      inputAmount: number;\n      outputAmount: number;\n    }\n  | {\n      error?: TransactionError;\n    };\n\ntype InputMintAndOutputMint = string;\n\nexport type JupiterLoadParams = {\n  connection: Connection;\n  cluster: Cluster;\n  user?: PublicKey | Keypair;\n  platformFeeAndAccounts?: PlatformFeeAndAccounts;\n  quoteMintToReferrer?: Map<TokenMintAddress, PublicKey>;\n  /**\n   * If === -1, mean it will not fetch when shouldFetch == false\n   * If === 0, mean it will fetch everytime\n   */\n  routeCacheDuration?: number;\n  wrapUnwrapSOL?: boolean;\n  marketUrl?: string;\n  /**\n   * On multi-leg trades, the intermediate tokens is restricted to X top tokens in volume and certain utility tokens (Saber wrapped decimal tokens)\n   * This is to reduce the load by having to compute trades through routes that are not so liquid\n   */\n  restrictIntermediateTokens?: boolean;\n  /** See {@link Jupiter.tokenLedger}, default to the standard Jupiter token ledger */\n  tokenLedger?: PublicKey;\n  /** See {@link Jupiter.shouldLoadSerumOpenOrders}, default to true */\n  shouldLoadSerumOpenOrders?: boolean;\n};\n\nexport type OnTransaction = (\n  txid: TransactionSignature,\n  totalTxs: number,\n  txDescription: IConfirmationTxDescription,\n) => void;\n\nexport type IConfirmationTxDescription = 'SETUP' | 'SWAP' | 'CLEANUP';\ntype ExecuteParams = {\n  wallet?: Pick<SignerWalletAdapter, 'sendTransaction' | 'signAllTransactions' | 'signTransaction'>;\n  /**\n   * Allows to customize control of sending and awaiting confirmation in the single/multi transaction flow\n   */\n  onTransaction?: OnTransaction;\n};\n\nexport class Jupiter {\n  /* promise because we can choose not to await it when we dont need it */\n  private serumOpenOrdersPromise: Promise<SerumOpenOrdersMap> | undefined = undefined;\n  private user: Keypair | PublicKey | undefined;\n  private routeCache = new Map<InputMintAndOutputMint, { fetchTimestamp: number }>();\n\n  constructor(\n    private connection: Connection,\n    private cluster: Cluster,\n    public tokenRouteSegments: TokenRouteSegments,\n    private feeCalculator: FeeCalculator,\n    private platformFeeAndAccounts: PlatformFeeAndAccounts,\n    /** Referrer account to collect Serum referrer fees for each given quote mint, the referrer fee is 20% of the Serum protocol fee */\n    private quoteMintToReferrer: QuoteMintToReferrer,\n    /** route cache duration in ms */\n    private routeCacheDuration: number = 0,\n    /** When set to true (default) native SOL is wrapped and wSOL unwrapped in each swap, otherwise it assumes wSOL is funded when it exists */\n    private wrapUnwrapSOL: boolean = true,\n    /** A token ledger which can be used to track volume as it can be made unique per platform, also alleviates write locks on a single token ledger account */\n    private tokenLedger: PublicKey,\n    private intermediateTokens: TokenMintAddress[] | undefined,\n    /** Perform a getProgramAccounts on user's serum open orders. Recomended to turn off if RPC is slow to perform a gPA */\n    private shouldLoadSerumOpenOrders: boolean,\n  ) {}\n\n  /**\n   * load performs the necessary async scaffolding of the Jupiter object\n   */\n  static async load({\n    connection,\n    cluster,\n    user,\n    platformFeeAndAccounts = NO_PLATFORM_FEE,\n    quoteMintToReferrer,\n    routeCacheDuration = 0,\n    wrapUnwrapSOL = true,\n    // @internal,\n    marketUrl,\n    restrictIntermediateTokens = false,\n    tokenLedger = TOKEN_LEDGER,\n    shouldLoadSerumOpenOrders = true,\n  }: JupiterLoadParams) {\n    const [\n      tokenRouteSegments,\n      {\n        value: { feeCalculator },\n      },\n      _quoteMintToReferrer,\n      intermediateTokens,\n    ] = await Promise.all([\n      Jupiter.fetchTokenRouteSegments(connection, cluster, marketUrl),\n      connection.getRecentBlockhashAndContext('processed'),\n      quoteMintToReferrer ?? getPlatformFeeAccounts(connection, new PublicKey(JUPITER_WALLET)),\n      restrictIntermediateTokens ? Jupiter.getIntermediateTokens() : undefined,\n    ]);\n\n    const jupiter = new Jupiter(\n      connection,\n      cluster,\n      tokenRouteSegments,\n      feeCalculator,\n      platformFeeAndAccounts,\n      _quoteMintToReferrer,\n      routeCacheDuration,\n      wrapUnwrapSOL,\n      tokenLedger,\n      intermediateTokens,\n      shouldLoadSerumOpenOrders,\n    );\n    if (user) jupiter.setUserPublicKey(user);\n    return jupiter;\n  }\n\n  getAccountToAmmMap() {\n    const accountToAmmMap = new Map<string, Amm>();\n    this.tokenRouteSegments.forEach((tokenRouteSegment) => {\n      Array.from(tokenRouteSegment.values()).forEach((marketInfos) => {\n        marketInfos.forEach((amm) => {\n          amm.getAccountsForUpdate().forEach((account) => {\n            accountToAmmMap.set(account.toBase58(), amm);\n          });\n        });\n      });\n    });\n    return accountToAmmMap;\n  }\n\n  getAmmIdToAmmMap() {\n    const ammIdToAmmMap = new Map<string, Amm>();\n\n    this.tokenRouteSegments.forEach((tokenRouteSegment) => {\n      Array.from(tokenRouteSegment.values()).forEach((marketInfos) => {\n        marketInfos.forEach((amm) => {\n          ammIdToAmmMap.set(amm.id, amm);\n        });\n      });\n    });\n\n    return ammIdToAmmMap;\n  }\n\n  public getDepositAndFees = async ({\n    marketInfos,\n    userPublicKey,\n    /**\n     * We can use Jupiter.findSerumOpenOrdersForOwner for this, if we want to reuse existing user serum open orders.\n     */\n    serumOpenOrdersPromise = Promise.resolve(new Map()),\n  }: {\n    marketInfos: MarketInfo[];\n    userPublicKey: PublicKey;\n    serumOpenOrdersPromise?: Promise<SerumOpenOrdersMap>;\n  }) => {\n    return getDepositAndFeeFromInstructions({\n      connection: this.connection,\n      feeCalculator: this.feeCalculator,\n      inputMint: marketInfos[0].inputMint,\n      marketInfos,\n      serumOpenOrdersPromise,\n      owner: new Owner(userPublicKey),\n      wrapUnwrapSOL: this.wrapUnwrapSOL,\n    });\n  };\n\n  private getDepositAndFeesForUser = ({ marketInfos }: { marketInfos: MarketInfo[] }) => {\n    if (this.user && this.serumOpenOrdersPromise) {\n      const user = new Owner(this.user);\n\n      return this.getDepositAndFees({\n        marketInfos,\n        userPublicKey: user.publicKey,\n        serumOpenOrdersPromise: this.serumOpenOrdersPromise,\n      });\n    }\n    return Promise.resolve(undefined);\n  };\n\n  async computeRoutes({\n    inputMint,\n    outputMint,\n    amount,\n    slippage,\n    feeBps = 0,\n    forceFetch,\n    onlyDirectRoutes,\n    swapMode = SwapMode.ExactIn,\n    filterTopNResult,\n  }: {\n    inputMint: PublicKey;\n    outputMint: PublicKey;\n    amount: JSBI;\n    slippage: number;\n    feeBps?: number;\n    forceFetch?: boolean;\n    onlyDirectRoutes?: boolean;\n    swapMode?: SwapMode;\n    /**\n     * filter how many top individual route to be used to compared\n     */\n    filterTopNResult?: number;\n  }) {\n    const inputMintString = inputMint.toBase58();\n    const outputMintString = outputMint.toBase58();\n\n    // Platform fee can only be applied when fee account exists\n    const platformFeeBps =\n      feeBps ||\n      (this.platformFeeAndAccounts.feeAccounts.get(outputMintString) ? this.platformFeeAndAccounts.feeBps : 0);\n\n    const now = new Date().getTime();\n\n    // do sort so that it's always the same order for the same inputMint and outputMint and vice versa\n    const inputMintAndOutputMint = [inputMintString, outputMintString].sort((a, b) => a.localeCompare(b)).join('');\n\n    const routeCache = this.routeCache.get(inputMintAndOutputMint);\n\n    const inputRouteSegment = computeInputRouteSegments({\n      inputMint: inputMintString,\n      outputMint: outputMintString,\n      tokenRouteSegments: this.tokenRouteSegments,\n      intermediateTokens: this.intermediateTokens,\n      onlyDirectRoutes,\n      swapMode,\n    });\n\n    let shouldBustCache = false;\n    // special -1 condition to not fetch\n    if (this.routeCacheDuration === -1) {\n      shouldBustCache = false;\n    } else if (this.routeCacheDuration === 0) {\n      shouldBustCache = true;\n    } else {\n      if (routeCache) {\n        const { fetchTimestamp } = routeCache;\n        if (now - fetchTimestamp > this.routeCacheDuration) {\n          shouldBustCache = true;\n        }\n      } else {\n        shouldBustCache = true;\n      }\n    }\n\n    if (forceFetch || shouldBustCache) {\n      await fetchAccountInfos(this.connection, inputRouteSegment);\n      this.routeCache.set(inputMintAndOutputMint, {\n        fetchTimestamp: new Date().getTime(),\n      });\n    }\n\n    try {\n      const routesInfos = processInputRouteSegmentToRoutesInfos({\n        inputRouteSegment,\n        inputMint,\n        outputMint,\n        amount,\n        getDepositAndFeeForRoute: this.getDepositAndFeesForUser,\n        onlyDirectRoutes,\n        slippage,\n        platformFeeBps,\n        filterTopNResult,\n        swapMode,\n      });\n\n      return {\n        routesInfos,\n        /* indicate if the result is fetched or get from cache */\n        cached: !(forceFetch || shouldBustCache),\n      };\n    } catch (e) {\n      throw e;\n    } finally {\n      // clear cache if it is expired\n      this.routeCache.forEach(({ fetchTimestamp }, key) => {\n        if (fetchTimestamp - now > this.routeCacheDuration) {\n          this.routeCache.delete(key);\n        }\n      });\n    }\n  }\n\n  setUserPublicKey(userPublicKey: Keypair | PublicKey) {\n    this.user = userPublicKey;\n    const owner = new Owner(this.user);\n    this.serumOpenOrdersPromise = this.shouldLoadSerumOpenOrders\n      ? Jupiter.findSerumOpenOrdersForOwner({\n          connection: this.connection,\n          cluster: this.cluster,\n          userPublicKey: owner.publicKey,\n        })\n      : Promise.resolve(new Map());\n  }\n\n  /**\n   * The token route segments contains all the routes and the market meta information.\n   */\n  static async fetchTokenRouteSegments(connection: Connection, cluster: Cluster, marketUrl?: string) {\n    const marketCaches = await fetchMarketCache(marketUrl || MARKETS_URL[cluster]);\n    const amms = await getAllAmms(connection, marketCaches);\n\n    const tokenRouteSegments = getTokenRouteSegments(amms);\n\n    return tokenRouteSegments;\n  }\n\n  /**\n   * This generate a routeMap which represents every possible output token mint for a given input token mint.\n   * For example, we have SOL to USDC and this pairs have many routings like\n   * SOL => USDT\n   * USDT => USDC\n   * SOL => USDC\n   *\n   * From here we know that we can have 2 different routing of SOL => USDC.\n   * We do single level routing map but for all coins which result in the route map below:\n   * SOL => USDT, USDC\n   * USDT => SOL\n   * USDC => SOL, USDT\n   *\n   * From this route map we can map out all possible route from one to another by checking the intersection.\n   */\n  getRouteMap(onlyDirectRoutes?: boolean) {\n    return computeRouteMap(this.tokenRouteSegments, this.intermediateTokens, onlyDirectRoutes);\n  }\n\n  /**\n   * Query existing open order account, this query is slow.\n   * We suggest to fetch this in the background.\n   */\n  static findSerumOpenOrdersForOwner = async ({\n    userPublicKey,\n    cluster,\n    connection,\n  }: {\n    userPublicKey: PublicKey;\n    cluster: Cluster;\n    connection: Connection;\n  }) => {\n    const newMarketToOpenOrdersAddress: SerumOpenOrdersMap = new Map();\n\n    if (userPublicKey) {\n      const programId = cluster === 'mainnet-beta' ? MAINNET_SERUM_DEX_PROGRAM : DEVNET_SERUM_DEX_PROGRAM;\n\n      const allOpenOrders = await OpenOrders.findForOwner(connection, userPublicKey, programId);\n\n      allOpenOrders.forEach((openOrders) => {\n        newMarketToOpenOrdersAddress.set(openOrders.market.toString(), openOrders.address);\n      });\n    }\n    return newMarketToOpenOrdersAddress;\n  };\n\n  public exchange: (params: {\n    routeInfo: RouteInfo;\n    /**\n     * This will overwrite the default Jupiter.setUser, useful for stateless usage like API\n     */\n    userPublicKey?: PublicKey;\n    /**\n     * This will overwrite the default token ledger, useful for stateless usage like API\n     */\n    tokenLedger?: PublicKey;\n    /**\n     * This will overwrite the default fee account, useful for stateless usage like API\n     */\n    feeAccount?: PublicKey;\n    /**\n     * This will overwrite the default wrapUnwrapSOL, useful for stateless usage like API\n     */\n    wrapUnwrapSOL?: boolean;\n  }) => Promise<{\n    transactions: {\n      setupTransaction?: Transaction;\n      swapTransaction: Transaction;\n      cleanupTransaction?: Transaction;\n    };\n    execute: (params?: ExecuteParams) => Promise<SwapResult>;\n  }> = async ({ routeInfo, userPublicKey, feeAccount, wrapUnwrapSOL, tokenLedger }) => {\n    const { connection, serumOpenOrdersPromise } = this;\n    const user: PublicKey | Keypair | undefined = userPublicKey || this.user;\n    if (!user) {\n      throw new Error('user not found');\n    }\n\n    const owner = new Owner(user);\n\n    const lastMarketInfoIndex = routeInfo.marketInfos.length - 1;\n    const inputMint = routeInfo.marketInfos[0].inputMint;\n    const outputMint = routeInfo.marketInfos[lastMarketInfoIndex].outputMint;\n    const _wrapUnwrapSOL = wrapUnwrapSOL ?? this.wrapUnwrapSOL;\n\n    const [sourceInstruction, ataInstructions, openOrdersInstructions] = await Promise.all([\n      inputMint.equals(WRAPPED_SOL_MINT) && _wrapUnwrapSOL\n        ? createAndCloseWSOLAccount({\n            connection,\n            owner,\n            amount: routeInfo.swapMode === SwapMode.ExactIn ? routeInfo.inAmount : routeInfo.otherAmountThreshold,\n          })\n        : Token.getAssociatedTokenAddress(\n            ASSOCIATED_TOKEN_PROGRAM_ID,\n            TOKEN_PROGRAM_ID,\n            inputMint,\n            owner.publicKey,\n            true,\n          ).then((address) => ({\n            ...getEmptyInstruction(),\n            address,\n          })),\n      routeAtaInstructions({ connection, marketInfos: routeInfo.marketInfos, owner, unwrapSOL: _wrapUnwrapSOL }),\n      Promise.all(\n        routeInfo.marketInfos.map(async ({ amm }) => {\n          if (amm instanceof SerumAmm || amm instanceof SplitTradeAmm) {\n            if (!amm.market) return;\n            return await getOrCreateOpenOrdersAddress(\n              connection,\n              owner.publicKey,\n              amm.market,\n              await serumOpenOrdersPromise,\n            );\n          }\n          return;\n        }),\n      ),\n    ]);\n\n    const instructions = {\n      intermediate: ataInstructions.userIntermediaryTokenAccountResult,\n      destination: ataInstructions.userDestinationTokenAccountResult,\n      openOrders: openOrdersInstructions,\n    };\n\n    const hasOpenOrders = instructions.openOrders.filter(Boolean).length > 0;\n\n    // Construct platform fee\n    feeAccount = feeAccount || this.platformFeeAndAccounts.feeAccounts.get(outputMint.toBase58());\n\n    const platformFee = feeAccount\n      ? {\n          feeBps:\n            this.platformFeeAndAccounts.feeBps ||\n            Math.floor(routeInfo.marketInfos[lastMarketInfoIndex].platformFee.pct * 100),\n          feeAccount,\n        }\n      : undefined;\n\n    const preparedInstructions = await routeToInstructions({\n      user: owner,\n      tokenLedger: tokenLedger || this.tokenLedger,\n      openOrdersAddresses: instructions.openOrders.map((oo) => oo?.address),\n      userSourceTokenAccountAddress: sourceInstruction.address,\n      userIntermediaryTokenAccountAddress: instructions.intermediate?.address,\n      userDestinationTokenAccountAddress: instructions.destination.address,\n      routeInfo,\n      platformFee,\n      quoteMintToReferrer: this.quoteMintToReferrer,\n    });\n\n    const { needCleanup, needSetup } = isSplitSetupRequired(routeInfo.marketInfos, {\n      hasSerumOpenOrderInstruction: hasOpenOrders,\n    });\n\n    const setupTransactionBuilder = new TransactionBuilder(connection, owner.publicKey, owner);\n\n    const transactionBuilder = new TransactionBuilder(connection, owner.publicKey, owner);\n\n    const cleanupTransactionBuilder = new TransactionBuilder(connection, owner.publicKey, owner);\n\n    const ixs = [\n      instructions.intermediate,\n      sourceInstruction,\n      // if source address the same as destination address, then we don't need to setup or cleanup twice, mainly SOL-SOL\n      !instructions.destination.address.equals(sourceInstruction.address) && instructions.destination,\n    ];\n\n    if (needSetup) {\n      if (hasOpenOrders) {\n        instructions.openOrders.forEach((openOrders) => {\n          if (openOrders) {\n            setupTransactionBuilder.addInstruction(openOrders);\n          }\n        });\n      }\n\n      ixs.forEach((instruction) => {\n        if (instruction) {\n          // we cannot put cleanup here because we cannot do cleanup in setupTransaction\n          setupTransactionBuilder.addInstruction({\n            ...instruction,\n            cleanupInstructions: [],\n          });\n\n          if (instruction.cleanupInstructions.length) {\n            const cleanupIx = {\n              ...getEmptyInstruction(),\n              cleanupInstructions: instruction.cleanupInstructions,\n            };\n            if (needCleanup) {\n              cleanupTransactionBuilder.addInstruction(cleanupIx);\n            } else {\n              transactionBuilder.addInstruction(cleanupIx);\n            }\n          }\n        }\n      });\n    } else {\n      if (hasOpenOrders) {\n        instructions.openOrders.forEach((openOrders) => {\n          if (openOrders) {\n            transactionBuilder.addInstruction(openOrders);\n          }\n        });\n      }\n\n      ixs.forEach((instruction) => {\n        if (instruction) {\n          transactionBuilder.addInstruction(instruction);\n        }\n      });\n    }\n\n    transactionBuilder.addInstruction(preparedInstructions);\n\n    const recentBlockHash = (await this.connection.getLatestBlockhash('confirmed')).blockhash;\n\n    const { transaction: setupTransaction } = await setupTransactionBuilder.build(recentBlockHash);\n\n    const { transaction } = await transactionBuilder.build(recentBlockHash);\n\n    const { transaction: cleanupTransaction } = await cleanupTransactionBuilder.build(recentBlockHash);\n\n    const [setupTransactionObject, swapTransactionObject, cleanupTransactionObject] = [\n      setupTransaction.instructions.length ? setupTransaction : undefined,\n      transaction,\n      cleanupTransaction.instructions.length ? cleanupTransaction : undefined,\n    ];\n\n    const setupInstructions = instructions;\n    return {\n      transactions: {\n        setupTransaction: setupTransactionObject,\n        swapTransaction: swapTransactionObject,\n        cleanupTransaction: cleanupTransactionObject,\n      },\n      execute: ({ wallet, onTransaction }: ExecuteParams = {}) =>\n        this.executeInternal({\n          wallet,\n          onTransaction,\n          inputMint,\n          outputMint,\n          sourceInstruction,\n          setupInstructions,\n          setupTransaction: setupTransactionObject,\n          swapTransaction: swapTransactionObject,\n          cleanupTransaction: cleanupTransactionObject,\n          wrapUnwrapSOL: _wrapUnwrapSOL,\n          owner,\n        }),\n    };\n  };\n\n  /** sign, send and await confirmation for an exchange */\n  private async executeInternal({\n    wallet,\n    onTransaction,\n    inputMint,\n    outputMint,\n    sourceInstruction,\n    setupInstructions,\n    setupTransaction,\n    swapTransaction,\n    cleanupTransaction,\n    owner,\n    wrapUnwrapSOL,\n  }: {\n    wallet: ExecuteParams['wallet'];\n    onTransaction?: OnTransaction;\n    inputMint: PublicKey;\n    outputMint: PublicKey;\n    sourceInstruction: Instruction & { address: PublicKey };\n    setupInstructions: SetupInstructions;\n    setupTransaction?: Transaction;\n    swapTransaction: Transaction;\n    cleanupTransaction?: Transaction;\n    wrapUnwrapSOL?: boolean;\n    owner: Owner;\n  }): Promise<SwapResult> {\n    try {\n      const transactions = [setupTransaction, swapTransaction, cleanupTransaction].filter(\n        (tx): tx is Transaction => tx !== undefined,\n      );\n\n      const totalTxs = transactions.length;\n\n      if (owner.signer) {\n        const signer = owner.signer;\n        transactions.forEach((transaction) => {\n          transaction.sign(signer);\n        });\n      } else {\n        if (!wallet) {\n          throw new Error('Signer wallet not found');\n        }\n        if (totalTxs > 1) {\n          await wallet.signAllTransactions(transactions);\n        } else {\n          await wallet.signTransaction(transactions[0]);\n        }\n      }\n\n      if (setupTransaction) {\n        onTransaction?.(getSignature(setupTransaction), totalTxs, 'SETUP');\n\n        await validateTransactionResponse(\n          await transactionSenderAndConfirmationWaiter(this.connection, setupTransaction),\n        );\n      }\n\n      onTransaction?.(getSignature(swapTransaction), totalTxs, 'SWAP');\n\n      let swapError: Error | undefined;\n      let swapResult: SwapResult | undefined = undefined;\n\n      try {\n        const { txid, transactionResponse } = await validateTransactionResponse(\n          await transactionSenderAndConfirmationWaiter(this.connection, swapTransaction),\n        );\n\n        const [sourceTokenBalanceChange, destinationTokenBalanceChange] = getTokenBalanceChangesFromTransactionResponse(\n          {\n            txid,\n            inputMint,\n            outputMint,\n            user: owner.publicKey,\n            sourceAddress: sourceInstruction.address,\n            destinationAddress: setupInstructions.destination.address,\n            transactionResponse,\n            hasWrappedSOL: Boolean(cleanupTransaction) || !wrapUnwrapSOL,\n          },\n        );\n\n        swapResult = {\n          txid,\n          inputAddress: sourceInstruction.address,\n          outputAddress: setupInstructions.destination.address,\n          inputAmount: sourceTokenBalanceChange,\n          outputAmount: destinationTokenBalanceChange,\n        };\n      } catch (e: any) {\n        swapError = e;\n      } finally {\n        if (cleanupTransaction) {\n          onTransaction?.(getSignature(cleanupTransaction), totalTxs, 'CLEANUP');\n\n          // wait for confirmation but swallow error to conserve behaviour\n          await transactionSenderAndConfirmationWaiter(this.connection, cleanupTransaction);\n        }\n      }\n\n      if (swapError || !swapResult) {\n        throw swapError || new Error('Swap failed');\n      }\n\n      // return must be after `finally` clause to ensure we wait what we done in the `finally`\n      return swapResult;\n    } catch (error) {\n      return { error: error as TransactionError };\n    } finally {\n      this.routeCache.clear();\n    }\n  }\n\n  static async getIntermediateTokens() {\n    const intermediateTokensSet = await getTopTokens();\n    for (const swapProtocolToken of SWAP_PROTOCOL_TOKENS) {\n      intermediateTokensSet.add(swapProtocolToken);\n    }\n    const saberDecimalAmms = getSaberWrappedDecimalsAmms();\n\n    saberDecimalAmms.forEach((item) => {\n      intermediateTokensSet.add(item.wrappedToken.addDecimals.mint.toBase58());\n    });\n\n    return Array.from(intermediateTokensSet);\n  }\n\n  static createInitializeTokenLedgerInstruction = createInitializeTokenLedgerInstruction;\n}\n"],"names":["IDL","version","name","instructions","accounts","isMut","isSigner","args","type","option","defined","kind","fields","types","variants","errors","code","msg","WRAPPED_SOL_MINT","PublicKey","MAINNET_SERUM_DEX_PROGRAM","DEVNET_SERUM_DEX_PROGRAM","MARKETS_URL","devnet","testnet","TOKEN_LIST_URL","LAMPORTS_PER_SIGNATURE","RAYDIUM_AMM_V4_PROGRAM_ID","ALDRIN_SWAP_PROGRAM_ID","ALDRIN_SWAP_V2_PROGRAM_ID","SABER_ADD_DECIMALS_PROGRAM_ID","CROPPER_PROGRAM_ID","SENCHA_PROGRAM_ID","LIFINITY_PROGRAM_ID","CREMA_PROGRAM_ID","JUPITER_WALLET","MERCURIAL_SWAP_PROGRAM_ID","WHIRLPOOL_PROGRAM_ID","CYKURA_PROGRAM_ID","CYKURA_FACTORY_STATE_ADDRESS","MARINADE_PROGRAM_ID","STEPN_PROGRAM_ID","SWAP_PROTOCOL_TOKENS","JUPITER_ERRORS","Object","freeze","TransactionNotConfirmed","BalancesNotExtractedProperly","reduce","accErrors","error","IS_DEV","process","env","NODE_ENV","MIN_SEGMENT_SIZE_FOR_INTERMEDIATE_MINTS","PublicKeyLayout","Layout","constructor","property","layout","blob","span","getSpan","b","offset","decode","encode","src","toBuffer","publicKey","U64Layout","bn","u64","toArrayLike","Buffer","uint64","uint128","CropperTokenSwapLayout","struct","u8","CropperStateLayout","CROPPER_STATE_ADDRESS","accountInfoToCropperPoolState","address","accountInfo","programId","owner","decoded","data","authority","findProgramAddressSync","isInitialized","Boolean","nonce","ammId","serumProgramId","tokenProgramId","tokenAAccount","tokenBAccount","serumMarket","poolMint","mintA","mintB","stateAccountInfoToCropperState","stateOwner","feeOwner","initialSupply","returnFeeNumerator","toNumber","fixedFeeNumerator","feeDenominator","curveType","curveParameters","Side","Bid","bid","Ask","ask","JUPITER_PROGRAM_ID_PRODUCTION","JUPITER_PROGRAM_ID","JUPITER_PROGRAM","Program","PRODUCTION_TOKEN_LEDGERS","TOKEN_LEDGER","Math","floor","random","length","stableSwapNPoolIntoMercurialExchange","swayLayout","sourceTokenAccount","destinationTokenAccount","userTransferAuthority","swapProgram","swapState","tokenProgram","TOKEN_PROGRAM_ID","poolAuthority","raydiumAmmToRaydiumSwap","raydiumAmm","userSourceTokenAccount","userDestinationTokenAccount","ammAuthority","Uint8Array","from","replace","serumMarketKeys","Error","ammOpenOrders","poolCoinTokenAccount","poolPcTokenAccount","serumBids","serumAsks","serumEventQueue","serumCoinVaultAccount","serumPcVaultAccount","serumVaultSigner","userSourceOwner","marketIntoSerumSwap","market","openOrdersAddress","orderPayerTokenAccountAddress","coinWallet","pcWallet","vaultSigner","createProgramAddressSync","vaultSignerNonce","openOrders","requestQueue","eventQueue","bids","bidsAddress","asks","asksAddress","coinVault","baseVault","pcVault","quoteVault","orderPayerTokenAccount","dexProgram","rent","SYSVAR_RENT_PUBKEY","createMercurialExchangeInstruction","swapLayout","inAmount","minimumOutAmount","tokenLedger","platformFee","remainingAccounts","swapTokenAccount","tokenAccounts","push","pubkey","isWritable","prepareRemainingAccounts","feeAccount","instruction","mercurialExchange","feeBps","createSerumSwapInstruction","sourceMint","referrer","side","equals","baseMintAddress","serumSwap","createTokenSwapInstruction","tokenSwapState","isStep","swapSource","swapDestination","tokenAccountA","tokenAccountB","stepTokenSwap","tokenSwap","tokenSwapProgram","swap","source","destination","poolToken","poolFee","createSenchaSwapInstruction","poolState","token0Mint","token0Reserves","token1Reserves","feesSource","feesDestination","token0Fees","token1Fees","senchaExchange","userAuthority","inputUserAccount","inputTokenAccount","inputFeesAccount","outputUserAccount","outputTokenAccount","outputFeesAccount","createCropperSwapInstruction","cropperTokenSwap","createRaydiumSwapInstruction","raydiumSwapV2","createAldrinSwapInstruction","userBaseTokenAccount","userQuoteTokenAccount","baseTokenMint","aldrinSwap","pool","poolSigner","baseTokenVault","quoteTokenVault","feePoolTokenAccount","walletAuthority","createAldrinV2SwapInstruction","curve","aldrinV2Swap","createCremaSwapInstruction","cremaTokenSwap","poolSourceTokenAccount","poolDestinationTokenAccount","poolTicksAccount","ticksKey","createRiskCheckAndFeeInstruction","riskCheckAndFee","createSetTokenLedgerInstruction","tokenAccountAddress","setTokenLedger","tokenAccount","createInitializeTokenLedgerInstruction","payer","initializeTokenLedger","systemProgram","SystemProgram","createOpenOrdersInstruction","ix","createOpenOrders","saberPoolIntoSaberSwap","saberPool","sourceMintAddress","feesTokenAccount","state","tokenA","mint","tokenB","adminFeeAccount","reserve","config","swapProgramID","swapAccount","swapAuthority","createSaberSwapInstruction","stableSwap","saberSwap","createSaberAddDecimalsDepositInstruction","addDecimals","saberAddDecimalsDeposit","addDecimalsProgram","wrapper","wrapperMint","wrapperUnderlyingTokens","userUnderlyingTokens","userWrappedTokens","createSaberAddDecimalsWithdrawInstruction","saberAddDecimalsWithdraw","createLifinitySwapInstruction","tokenAMint","lifinityTokenSwap","amm","sourceInfo","destinationInfo","pythAccount","pythPcAccount","configAccount","createCykuraSwapInstruction","additionalArgs","cykuraSwap","signer","factoryState","poolAddress","inputVault","outputVault","lastObservationState","coreProgram","concat","swapAccountMetas","nextObservationState","createWhirlpoolSwapInstruction","tokenOwnerAccountA","tokenOwnerAccountB","aToB","whirlpoolSwap","tokenAuthority","whirlpool","tokenVaultA","tokenVaultB","tickArray0","tickArray1","tickArray2","oracle","createMarinadeFinanceDepositInstruction","transferFrom","tempWsolTokenAccount","tempSolPda","marinadeFinanceDeposit","marinadeFinanceProgram","msolMint","marinadeStateResponse","liqPoolSolLegPda","liqPoolMsolLeg","liqPool","msolLeg","liqPoolMsolLegAuthority","reservePda","mintTo","msolMintAuthority","userWsolTokenAccount","wsolMint","NATIVE_MINT","createMarinadeFinanceLiquidUnstakeInstruction","marinadeFinanceLiquidUnstake","treasuryMsolAccount","getMsolFrom","getMsolFromAuthority","transferSolTo","createWhirlpoolSwapExactOutputInstruction","outAmount","maximumInAmount","whirlpoolSwapExactOutput","BN","getSaberWrappedDecimalsAmms","addDecimalsJson","map","addDecimalJson","underlying","underlyingDecimals","decimals","SaberAddDecimalsAmm","WrappedToken","multiplier","JSBI","BigInt","getOutputAmount","inputAmount","inputMint","calculateWithdrawOutputAmount","calculateDepositOutputAmount","toString","multiply","divide","wrappedToken","id","label","shouldPrefetch","exactOutputSupported","toBase58","getAccountsForUpdate","Array","update","_accountInfoMap","getQuote","amount","notEnoughLiquidity","feeAmount","ZERO","feeMint","feePct","priceImpactPct","createSwapInstructions","swapParams","otherAmountThreshold","reserveTokenMints","getTwoPermutations","array","acc","item","forEach","otherItem","chunks","size","apply","ceil","_","index","slice","chunkedGetMultipleAccountInfos","connection","pks","batchChunkSize","maxAccountsChunkSize","Promise","all","batchPubkeys","batch","pubkeys","methodName","_buildArgs","commitment","_rpcBatchRequest","then","batchResults","res","result","value","catch","e","flat","SwapMode","mapAddressToAccountInfos","accountInfoMap","addresses","accountInfos","get","tokenAccountsToJSBIs","prefetchAmms","amms","accountInfosMap","Map","set","AMM_INFO_LAYOUT_V4","nu64","RaydiumAmm","ammAccountInfo","params","coinMint","pcMint","status","ammTargetOrders","coinReserve","pcReserve","calculator","coinMintAddress","pcMintAddress","keys","pk","swapFeeNumerator","swapFeeDenominator","Decimal","div","TokenSwapConstantProduct","Fraction","ZERO_FRACTION","decodeSerumMarketKeysString","serumMarketInfo","decodedMarket","Market","getLayout","poolCoinTokenAccountInfo","poolPcTokenAccountInfo","ammOpenOrdersAccountInfo","coinAmount","pcAmount","tokenAmountAccessor","OpenOrders","fromAccountInfo","add","baseTokenTotal","sub","String","needTakePnlCoin","quoteTokenTotal","needTakePnlPc","tokenAccountInfo","fromBuffer","outputIndex","exchange","expectedOutputAmount","fees","priceImpact","TAKER_FEE_PCT","STABLE_TAKER_FEE_PCT","STABLE_MARKET_ADDRESSES","getOutAmountMeta","fromAmount","fromMint","toMint","takerFeePct","includes","quoteMintAddress","forecastBuy","forecastSell","orderbook","pcIn","coinOut","bestPrice","worstPrice","totalCost","totalCoins","quoteSizeLots","quoteSizeLotsToNumber","availablePc","baseSizeLots","baseSizeLotsToNumber","lotPrice","lotQuantity","getL2","equal","orderCoinAmount","orderPcAmount","greaterThanOrEqual","numberLotsPurchasable","subtract","bestPriceDecimal","worstPriceDecimal","bestPriceSizeLots","priceLotsToDecimal","totalCostSizeLots","inAmountWithoutFee","mul","fee","lessThanOrEqual","minimum","in","out","coinIn","pcOut","totalCoin","availableCoin","numberLotsCanSell","totalCoinAmountToSell","pcOutAfterFee","minus","greaterThan","round","descending","isBids","key","quantity","slab","items","price","ushrn","divideBnToDecimal","numerator","denominator","quotient","rem","umod","gcd","baseLotSize","_decoded","isZero","quoteLotSize","_baseSplTokenMultiplier","_quoteSplTokenMultiplier","SerumAmm","_orderbooks","orderbooks","asksAccountInfo","bidsAccountInfo","Orderbook","destinationMint","outAmountMeta","minInAmount","minOutAmount","quoteMintToReferrer","isSplitSupported","firstAmm","secondAmm","HUNDRED","SplitTradeAmm","portion1","portion2","getAmmIdsFromSplitTradeAmmId","ammIds","split","create","firstAmmTwoPermutations","secondAmmTwoPermutations","firstAmmTwoPermutation","secondAmmTwoPermutation","every","setPortions","labelWithPortions","portion","sort","a","join","quoteParams","sourceMintString","bestSolution","firstQuote","undefined","secondQuote","p","firstAmount","secondAmount","lessThan","firstAmmFee","secondAmmFee","isValidRoute","ammA","ammB","isSerumAndRaydium","marketInfos","mi","SaberAmm","Stable","TWO","calculateAmpFactor","ONE","trade","tokenAccountInfos","info","deserializeAccount","asFraction","toFixed","inputIndex","setAmp","Percentage","fromDecimal","number","fromFraction","toDecimalPlaces","num","denom","toDecimal","eq","p2","denomGcd","denomLcm","p1DenomAdjustment","p2DenomAdjustment","p1NumeratorAdjusted","p2NumeratorAdjusted","newNumerator","FEES_LAYOUT","POOL_FIELDS_COMMON","POOL_LAYOUT","POOL_V2_LAYOUT","STABLE_CURVE_LAYOUT","accountInfoToAldrinPoolState","isV2","curveObject","quoteTokenMint","feeBaseAccount","feeQuoteAccount","traderFee","tradeFeeNumerator","tradeFeeDenominator","ownerFee","ownerTradeFeeNumerator","ownerTradeFeeDenominator","AldrinAmm","amp","TokenSwapStable","decodeStableCurveAmp","STEP_TOKEN_SWAP_PROGRAM_ID","PROGRAM_ID_TO_LABEL","TokenSwapLayout","StepTokenSwapLayout","accountInfoToTokenSwapState","tokenSwapAccountInfo","tokenSwapData","tokenPool","ownerWithdrawFeeNumerator","ownerWithdrawFeeDenominator","poolNonce","CurveType","SplTokenSwapAmm","swapStateAccountInfo","ConstantProduct","FEE_DENOMINATOR","pow","MercurialSwapLayout","u32","accountInfoToMercurialSwapLayout","tokenAccountsLength","precisionMultipliers","precisionMultiplierA","precisionMultiplierB","precisionMultiplierC","precisionMultiplierD","tokenAccountC","tokenAccountD","amplificationCoefficient","feeNumerator","precisionFactor","MercurialAmm","precisionMultiplier","filter","x","findIndex","tokenMints","tokenMint","decodeSwapLayout","CropperAmm","getStateFromStateAccount","getAccountInfo","tokenAFeeAccount","tokenBFeeAccount","decodePoolState","accountInfoToCremaPoolState","TokenSwapAccountLayout","swapTokenA","swapTokenB","tokenBMint","currentSqrtPrice","currentLiquity","CremaAmm","ticks","ticksAccountInfo","ticksInfo","parseTicksAccount","preSwapA","preSwapB","revert","amountOut","feeUsed","impact","amountIn","calculateSwapA2B","currentPriceA","transactionPriceA","amountUsed","abs","calculateSwapB2A","currentPriceB","transactionPriceB","SenchaSwapLayout","accountInfoToSenchaPoolState","isPaused","bump","token1Mint","tradeFeeKbps","SenchaAmm","swapStateToPoolInfo","poolCoinMint","poolPcMint","poolCoinDecimal","poolPcDecimal","poolMintDecimal","pythBaseDecimal","accountInfoLifinitySwapLayout","LIFINITY_AMM_LAYOUT","poolFeeAccount","LifinityAmm","poolInfo","idx","account","tradeDirection","TradeDirection","AtoB","BtoA","pyth","pythPc","coinBalance","pcBalance","getParsedData","getCurveAmount","publishSlot","amountSwapped","feePercent","FEE_RATE_MUL_VALUE","fromX64","parseWhirlpoolSafe","whirlpoolData","parseWhirlpool","WhirlpoolAmm","whirlpoolAccountInfo","tickArrays","tickPks","feeRate","getTickArrayPks","clear","tickArrayPk","tickArrayAddress","tickArrayAccountInfo","tickArray","parseTickArray","swapMode","swapQuote","getSwapQuote","ExactIn","tokenAmount","isInput","quotePrice","currentPrice","sqrtPrice","Number","tokenMintA","targetSqrtPrice","getDefaultSqrtPriceLimit","getTickArrayPublicKeysForSwap","tickCurrentIndex","tickSpacing","tokenMintB","SolanaTickDataProvider","program","bitmapCache","tickCache","accountsToFetch","bitmaps","eagerLoadCache","tickCurrent","compressed","wordPos","tickPosition","bitmapsToFetch","WORD_POS_MIN","TickMath","MIN_TICK","WORD_POS_MAX","MAX_TICK","minWord","max","maxWord","min","i","getBitmapAddressSync","fetchedBitmaps","tickBitmapState","fetchMultiple","tickAddresses","currentWordPos","wordArray","word","generateBitmapWord","eqn","j","shrn","and","tick","tickAddress","getTickAddressSync","fetchedTicks","tickState","fetchedTick","liquidityNet","lazyLoadAccountsToCache","bitmap","tickAddressesToFetch","getTick","savedTick","getTickAddress","TICK_SEED","token0","token1","u32ToSeed","getBitmapAddress","BITMAP_SEED","u16ToSeed","getBitmap","savedBitmap","nextInitializedTickWithinOneWord","lte","bitPos","cachedBitmap","next","nextBit","initialized","nextInitializedBit","nextTick","buildTick","updateCachedAccountInfos","bitmapAddress","bitmapAccountInfo","coder","tickStateAccountInfo","provider","anchor","AnchorProvider","skipPreflight","CYCLOS_CORE","CykuraAmm","accountInfoOrPoolState","tickDataProvider","tokens","vaults","sqrtPriceX32","liquidity","Token","CykuraPool","vault0","ASSOCIATED_TOKEN_PROGRAM_ID","vault1","poolAccountInfo","inputToken","currentOutAmount","newPool","CurrencyAmount","fromRawAmount","priceImpactDecimal","sqrtRatioX32","OBSERVATION_SEED","observationIndex","observationCardinalityNext","unstakeNowFeeBp","lpMinFeeBasisPoints","lpMaxFeeBasisPoints","lpLiquidityTarget","lamportsAvailable","lamportsToObtain","gte","lamportsAfter","delta","proportionalBN","MarinadeAmm","liqPoolSolLegPdaAddress","marinadeState","marinadeFinanceIdlSchema","findProgramDerivedAddress","stateAccountInfo","liqPoolMSOLLegAccountInfo","liqPoolMSOLLeg","MarinadeState","lamports","amountBN","depositQuote","liquidUnstakeQuote","seed","extraSeeds","seeds","liqPoolSolLegPdaLamports","liqPoolMSOLLegAmount","userLamports","userMSOLBuyOrder","calcMSOLFromLamports","swapMSOLMax","outAmountBN","gt","lamportsForTheLiqPool","calcLamportsFromMSOLAmount","saturatingSub","checkStakingCap","MSOLToMint","transferingLamports","resultAmount","totalLamportsUnderControl","stakingSolCap","stakeLamports","sharesFromValue","totalVirtualStakedLamports","msolSupply","msolAmount","valueFromShares","circulatingTicketBalance","validatorSystem","totalActiveBalance","totalCoolingDown","availableReserveBalance","stakeSystem","delayedUnstakeCoolingDown","emergencyCoolingDown","maxLamports","rentExemptForTokenAcc","liquidUnstakeFeeBp","lpMinFee","basisPoints","lpMaxFee","msolFee","workingLamportsValue","shares","totalValue","totalShares","left","right","ammFactory","SerumMarket","accountFlags","SABER_SWAP_PROGRAM_ID","StableSwap","loadWithData","senchaAmm","fetchMarketCache","url","marketsCache","fetch","json","fetchExtraKeyedAccountInfos","extraKeyedAccountInfos","getAllAmms","marketCacheToAccountInfo","format","rest","marketKeyedAccountInfos","extraKeys","keyedAccountInfo","ammCrossProtocolPairs","arr","callback","getTokenRouteSegments","tokenRouteSegments","reserveTokenMintPermutations","firstReserveMint","secondReserveMint","addSegment","inMint","outMint","segments","computeInputRouteSegments","outputMint","intermediateTokens","onlyDirectRoutes","inputRouteSegments","inputSegment","outputSegment","minSegmentSize","shouldStartWithInputSegment","inputInnerMap","outputInnerMap","startSegment","endSegment","startMint","endMint","entries","filteredAmms","ExactOut","shouldSkipOutputMint","intersectionAmms","filteredIntersectionAmms","computeRouteMap","routeMap","firstLevelOutputs","validOutputMints","Set","firstLevelOutputMint","firstLevelAmms","secondLevelOutputs","secondLevelOutputMint","secondLevelAmms","outputMintSize","firstLevelAmm","secondLevelAmm","isSplitSetupRequired","hasSerumOpenOrderInstruction","needSetup","needCleanup","marketInfo","isPlatformFeeSupported","firstMarket","secondMarket","getRouteInfoUniqueId","routeInfo","getEmptyInstruction","cleanupInstructions","signers","createAndCloseWSOLAccount","toAccount","getAssociatedTokenAddress","createAssociatedTokenAccountInstruction","transfer","fromPubkey","toPubkey","createSyncNativeInstruction","createCloseAccountInstruction","findOrCreateAssociatedAccountByMint","mintAddress","unwrapSOL","associatedToken","associatedTokenProgramId","TransactionInstruction","alloc","routeToInstructions","user","openOrdersAddresses","userSourceTokenAccountAddress","userIntermediaryTokenAccountAddress","userDestinationTokenAccountAddress","legs","effectiveQuoteMintToReferrer","userIntermediateTokenAccountAddresses","userTokenAccountAddresses","platformFeeSupported","legAmount","isLastLeg","legOtherAmountThreshold","legPlatformFee","isKeyPair","routeAtaInstructions","getUserIntermediateTokenAccountAddress","userIntermediateTokenAccountAddress","getUserDestinationTokenAccountAddress","userIntermediaryTokenAccountResult","userDestinationTokenAccountResult","getOrCreateOpenOrdersAddress","marketToOpenOrdersAddress","marketAddress","openOrdersAccountInfo","newOpenOrdersAddress","newOpenOrdersAddressInfo","SERUM_OPEN_ACCOUNT_LAMPORTS","OPEN_TOKEN_ACCOUNT_LAMPORTS","sum","values","calculateTransactionDepositAndFee","intermediate","hasWrapUnwrapSOL","feeCalculator","openOrdersDeposits","ooi","ataDeposits","signatureFee","oo","lamportsPerSignature","totalFeeAndDeposits","minimumSOLForTransaction","getDepositAndFeeFromInstructions","serumOpenOrdersPromise","wrapUnwrapSOL","openOrdersInstructionsPromise","promise","openOrdersInstructions","instructionResult","NO_PLATFORM_FEE","feeAccounts","getPlatformFeeAccounts","feeAccountOwner","getTokenAccountsByOwner","deserializedtokenAccount","TransactionBuilder","feePayer","addInstruction","build","recentBlockHash","getLatestBlockhash","blockhash","txFields","recentBlockhash","curr","transaction","Transaction","execute","sendTransaction","Owner","_owner","isPublicKey","secretKey","wait","time","resolve","setTimeout","diffTokenBalance","accountKeyIndex","meta","postBalance","postTokenBalances","find","postTokenBalance","accountIndex","uiTokenAmount","preBalance","preTokenBalances","preTokenBalance","parseInt","extractTokenBalanceChangeFromTransaction","message","accountKeys","extractSOLChangeFromTransaction","postBalances","preBalances","getTokenBalanceChangesFromTransactionResponse","txid","sourceAddress","destinationAddress","transactionResponse","hasWrappedSOL","sourceTokenBalanceChange","destinationTokenBalanceChange","TransactionError","getUnixTs","Date","getTime","SEND_OPTIONS","maxRetries","transactionSenderAndConfirmationWaiter","signedTransaction","timeout","pollInterval","sendInterval","sendRetries","rawTransaction","serialize","sendRawTransaction","start","lastSendTimestamp","retries","timestamp","response","any","getTransaction","getSignature","signature","bs58","validateInput","arrays","isArray","TypeError","validateArray","validateDimensions","validateCombinations","MAX_DIMENSIONS","multiplySize","MAX_SIZE","sizeStr","isFinite","toExponential","fastCartesian","loopFunc","getLoopFunc","cachedLoopFunc","cache","mGetLoopFunc","indexes","getIndex","middle","end","repeat","Function","PLATFORM_FEE_DENOMINATOR","fetchAccountInfos","routes","accountsToFetchSet","ammMap","innerMap","getInputOutputId","getQuoteId","getQuoteAndSortBasedOnOutAmount","quotes","quote","MAX_LEVEL","processInputRouteSegmentToRoutesInfos","inputRouteSegment","getDepositAndFeeForRoute","platformFeeBps","slippage","filterTopNResult","inputMintString","outputMintString","tradeIdQuoteMap","inputMintInnerMap","maxLevel","walkTheTree","level","walked","tradeId","sortedQuotesWithAmms","quoteMap","splitTradeAmms","splitTradeAmm","mints","_mints","ammsArr","permutations","routesInfo","route","intermediateAmount","cacheQuote","pct","amountForFees","amountAfterFees","lpFee","getDepositAndFee","priceFactor","validateTransactionResponse","err","parseErrorForTransaction","UNKNOWN_ERROR","getTopTokens","topTokens","Jupiter","cluster","platformFeeAndAccounts","routeCacheDuration","shouldLoadSerumOpenOrders","routeCache","getDepositAndFees","userPublicKey","getDepositAndFeesForUser","lastMarketInfoIndex","_wrapUnwrapSOL","sourceInstruction","ataInstructions","hasOpenOrders","preparedInstructions","setupTransactionBuilder","transactionBuilder","cleanupTransactionBuilder","ixs","cleanupIx","setupTransaction","cleanupTransaction","setupTransactionObject","swapTransactionObject","cleanupTransactionObject","setupInstructions","transactions","swapTransaction","wallet","onTransaction","executeInternal","load","marketUrl","restrictIntermediateTokens","_quoteMintToReferrer","fetchTokenRouteSegments","getRecentBlockhashAndContext","getIntermediateTokens","jupiter","setUserPublicKey","getAccountToAmmMap","accountToAmmMap","tokenRouteSegment","getAmmIdToAmmMap","ammIdToAmmMap","computeRoutes","forceFetch","now","inputMintAndOutputMint","localeCompare","shouldBustCache","fetchTimestamp","routesInfos","cached","delete","findSerumOpenOrdersForOwner","marketCaches","getRouteMap","tx","totalTxs","sign","signAllTransactions","signTransaction","swapError","swapResult","inputAddress","outputAddress","outputAmount","intermediateTokensSet","swapProtocolToken","saberDecimalAmms","newMarketToOpenOrdersAddress","allOpenOrders","findForOwner"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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"}