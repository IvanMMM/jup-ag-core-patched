"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@solana/web3.js"),t=require("@solana/spl-token");class r extends Error{constructor(e,t,r){super(e),this.txid=void 0,this.code=void 0,this.txid=t,this.code=r,Object.setPrototypeOf(this,Error.prototype)}}const o="Unknown error, visit the explorer";async function n(e){const t=e[1].Custom;let r="";switch(t){case 0:r="An account with the same address already exists";case 1:r="The account does not have enough SOL to perform the operation";default:r=o}return{code:t,message:r}}exports.TransactionError=r,exports.UNKNOWN_ERROR=o,exports.deserializeAccount=r=>{if(null==r||0==r.length)return;const o=t.AccountLayout.decode(r);return o.mint=new e.PublicKey(o.mint),o.owner=new e.PublicKey(o.owner),o.amount=t.u64.fromBuffer(o.amount),0===o.delegateOption?(o.delegate=null,o.delegatedAmount=new t.u64(0)):(o.delegate=new e.PublicKey(o.delegate),o.delegatedAmount=t.u64.fromBuffer(o.delegatedAmount)),o.isInitialized=0!==o.state,o.isFrozen=2===o.state,1===o.isNativeOption?(o.rentExemptReserve=t.u64.fromBuffer(o.isNative),o.isNative=!0):(o.rentExemptReserve=null,o.isNative=!1),o.closeAuthority=0===o.closeAuthorityOption?null:new e.PublicKey(o.closeAuthority),o},exports.parseErrorForTransaction=async function(t){var r;const s=[];if(null!=t&&t.meta&&t.meta.logMessages&&t.meta.logMessages.forEach((e=>{const t=/Error: (.*)/gm;let r;for(;null!==(r=t.exec(e));)r.index===t.lastIndex&&t.lastIndex++,r.length>1&&s.push(r[1])})),s.length>0)return{message:s.join(",")};const i=null==t||null===(r=t.meta)||void 0===r?void 0:r.err,a=JSON.stringify(i);let u;if(i&&"string"!=typeof i){var l;const r=i.InstructionError,[o,{Custom:s}]=r;u=s;const d=null==t||null===(l=t.meta)||void 0===l?void 0:l.innerInstructions;var c;if(!d||o>=d.length)return null!=t&&t.meta&&t.meta.logMessages&&((null===(c=t.meta)||void 0===c?void 0:c.logMessages).forEach((e=>{if(e.includes("Program 11111111111111111111111111111111 invoke"))return!0})),0)?n(r):{message:a,code:u};const m=d.find((e=>e.index===o));if(!m)return{message:a,code:u};if(t.transaction.message.accountKeys[m.instructions[m.instructions.length-1].programIdIndex].equals(e.SystemProgram.programId))return n(r)}return{message:"string"==typeof i?i:o,code:u}};
//# sourceMappingURL=optimist.cjs.production.min.js.map
